<!DOCTYPE html>
<html lang="cn">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="Wilson" />


    
    


<meta name="description" content="每周分享博客">
<meta property="og:type" content="website">
<meta property="og:title" content="Wilson">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Wilson">
<meta property="og:description" content="每周分享博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Wilson">
<meta name="twitter:description" content="每周分享博客">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="Wilson" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">


    <style> .article { opacity: 0;} </style>


<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>Wilson</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: undefined
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Wilson</a></h1>
        </hgroup>

        
        <p class="header-subtitle">爱折腾的技术男</p>
        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>Menu</li>
                        <li>Tags</li>
                        
                        <li>Friends</li>
                        
                        
                        <li>About Me</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:123@123.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Chrome/">Chrome</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tablayout/">tablayout</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/博客/">博客</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/同步异步/">同步异步</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/坑/">坑</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/开发效率/">开发效率</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/效率/">效率</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/研发杂谈/">研发杂谈</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/线程/">线程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网站/">网站</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">专注于前端</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Wilson</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Wilson</a></h1>
            </hgroup>
            
            <p class="header-subtitle">爱折腾的技术男</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:123@123.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="Tags" friends="Friends" about="About Me"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-周精益分享-后端开发" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/25/周精益分享-后端开发/" class="article-date">
      <time datetime="2015-11-25T10:30:00.000Z" itemprop="datePublished">2015-11-25</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/25/周精益分享-后端开发/">周精益分享 - 后端开发</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="Swift学习之二-张超耀"><a href="#Swift学习之二-张超耀" class="headerlink" title="Swift学习之二 - 张超耀"></a>Swift学习之二 - 张超耀</h2><h3 id="深度理解”-”-amp-amp-“-”"><a href="#深度理解”-”-amp-amp-“-”" class="headerlink" title="深度理解”?” &amp;&amp; “!”"></a>深度理解”?” &amp;&amp; “!”</h3> <figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Optional其实是个<span class="class"><span class="keyword">enum</span>，里面有<span class="title">None</span>和<span class="title">Some</span>两种类型。 <span class="title">nil</span>就是<span class="title">Optional</span>.<span class="title">None</span>, 非<span class="title">nil</span>就是<span class="title">Optional</span>.<span class="title">Some</span>, 然后会通过<span class="title">Some</span>(<span class="title">T</span>)包装（<span class="title">wrap</span>）原始值，这也是为什么在使用<span class="title">Optional</span>的时候要拆包（从<span class="title">enum</span>里取出来原始值）的原因。声明为<span class="title">Optional</span>只需要在类型后面紧跟一个"?"即可</span></div></pre></td></tr></table></figure>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> strValue: <span class="built_in">String</span>?  <span class="comment">//?相当于下面这种写法的语法糖</span></div><div class="line"><span class="keyword">var</span> strValue1: Optional&lt;Int&gt;</div></pre></td></tr></table></figure>
<p> 一旦声明为Optional的，如果不显式的赋值就会有个默认值nil。判断一个Optional的值是否有值，可以用if来判断：</p>
<figure class="highlight nimrod"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (strValue != <span class="keyword">nil</span>) &#123;</div><div class="line">    //<span class="keyword">do</span> sth <span class="keyword">with</span> strValue</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>怎么使用Optional值呢？<br>在使用Optional值的时候只前面需要加上一个”?”，就是这么简单。 </p>
<ul>
<li>这个”？”什么意思？：<br> 1、  询问是否响应后面这个方法，如果是nil值，也就是Optional.None，就不响应后面的方法，直接跳过，<br> 2、 如果有值，就是Optional.Some，可能就会拆包(unwrap)，然后对拆包后的值执行后面的操作，比如</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">let</span> <span class="built_in">hash</span>Value = strValue?.hashValue</div></pre></td></tr></table></figure>
<ul>
<li><p>strValue是Optional的字符串，如果strValue是nil，则hashValue也为nil，如果strValue不为nil，hashValue就是strValue字符串的值</p>
</li>
<li><p>到这里我们看到了?的两种使用场景:</p>
<pre><code>1.声明Optional值变量
2.用在对Optional值操作中，用来判断是否能响应后面的操作
</code></pre></li>
<li>对于Optional值，不能直接进行操作，否则会报错</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">let</span> <span class="built_in">hash</span>Value1 = strValue!.hashValue</div></pre></td></tr></table></figure>
<p> 上面错误提示需要拆包(unwrap)后才能得到值，然后才能对其操作，那怎么来拆包呢？拆包提到了几种方法，一种是Optional Binding</p>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> <span class="attr">str</span> = strValue &#123;</div><div class="line">    <span class="keyword">let</span> <span class="attr">hashValue</span> = str.hashValue</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>还有一种是在具体的操作前添加”!”符号。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">let</span> <span class="built_in">hash</span>Value2 = strValue!.hashValue</div></pre></td></tr></table></figure>
<p> 这里的”!”表示<strong>我确定肯定这里的的strValue一定是非nil的，随便用吧，木事de</strong> 就像下面：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (strValue != nil) &#123;</div><div class="line">    <span class="built_in">let</span> <span class="built_in">hash</span>Value = strValue!.hashValue</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&#123;&#125;里的strValue一定是非<span class="literal">nil</span>的，所以就能直接加上!，强制拆包(unwrap)并执行后面的操作。</div><div class="line">当然如果不加判断，strValue不小心为<span class="literal">nil</span>的话，就会出错，crash掉。</div></pre></td></tr></table></figure>
<p><strong><em> 51offer例子解释『隐式拆包的Optional』</em></strong></p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">这种是特殊的<span class="keyword">Optional</span>，称为Implicitly Unwrapped Optionals, 直译就是隐式拆包的<span class="keyword">Optional</span>，就等于说你每次对这种类型的值操作时，都会自动在操作前补上一个<span class="comment">!进行拆包，然后在执行后面的操作，当然如果该值是nil，也一样会报错crash掉。</span></div></pre></td></tr></table></figure>
<ul>
<li>“!”也有两种使用场景<pre><code>1、强制对Optional值进行拆包(unwrap)
2、声明Implicitly Unwrapped Optionals值，一般用于类中的属性
</code></pre></li>
</ul>
<h3 id="swift-断言"><a href="#swift-断言" class="headerlink" title="swift 断言"></a>swift 断言</h3><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">断言（Assertions）</div><div class="line">Optionals可以让我们检测值是否存在。在某些情况下，如果某个值不存在或者没有提供特定的满足条件，代码不应该继续往下执行。</div><div class="line">在这些情况下，可以使用触发断言来终止执行并提供调试。</div><div class="line">断言是在运行时检测条件是否为<span class="literal">true</span>,如果为<span class="literal">true</span>,就继续往下执行，否则就在这里中断。</div></pre></td></tr></table></figure>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">var</span> jobs = <span class="string">"我是一个好人"</span></div><div class="line"><span class="function"><span class="title">assert</span><span class="params">(jobs == <span class="string">"我是一个好人"</span>, <span class="string">"我是一个好人"</span>)</span></span></div><div class="line"><span class="function"><span class="title">assert</span><span class="params">(jobs == <span class="string">"我是一个坏人"</span>, <span class="string">"我是一个坏人么？"</span>)</span></span></div></pre></td></tr></table></figure>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">什么时候使用断言呢？</div><div class="line">包含下面的情况时使用断言：</div><div class="line">        <span class="number">1</span>、整型下标索引作为值传给自定义索引实现的参数时，但下标索引值不能太低也不能太高时，使用断言</div><div class="line">      **<span class="number">2</span>、传值给函数但如果这个传过来的值无效时，函数就不能完成功能时，使用断言。</div><div class="line">        <span class="number">3</span>、Optional值当前为nil，但是后面的代码成功执行的条件是要求这个值不能为nil，使用断言</div></pre></td></tr></table></figure>
<h2 id="IM中输入框的优化方案实现"><a href="#IM中输入框的优化方案实现" class="headerlink" title="IM中输入框的优化方案实现"></a>IM中输入框的优化方案实现</h2><p><code>以下图的输入框为例</code></p>
<p><img src="https://cloud.githubusercontent.com/assets/9360037/11319390/0ad964a8-90b0-11e5-90aa-9d2ca1fa548e.png" alt="stand"></p>
<h4 id="输入框的呈现方式选择"><a href="#输入框的呈现方式选择" class="headerlink" title="输入框的呈现方式选择"></a>输入框的呈现方式选择</h4><p><code>以下两个方法对比</code></p>
<ul>
<li>Keyboard的inputAccessoryView</li>
</ul>
<blockquote>
<p>相对推荐的方法，有更好的丰富的交互效果</p>
<p>可以与scrollView的一些属性直接绑定</p>
</blockquote>
<ul>
<li>InputView的frame适应</li>
</ul>
<blockquote>
<p>传统的方法</p>
<p>优点：灵活控制显示位置</p>
<p>缺点：过多的计算frame</p>
</blockquote>
<p>###InputAccessoryView方式</p>
<p><a href="https://github.com/ZhipingYang/UUKeyboardInputView" target="_blank" rel="external">案例见GitHub的Demo</a></p>
<blockquote>
<p>iOS的输入源都有输入源（keyboard及keyboard的配件InputAccessoryView），那通常的方法是输入源控件（Textfield、TextView等）使用一般的<code>InputView的frame适应</code></p>
</blockquote>
<p><strong>解释几个技巧点</strong></p>
<ul>
<li>InputView（ 输入源 ）的父视图作为该InputView的InputAccessoryView，要避免相互引用</li>
<li>巧用第三方不可见的InputView在适当时间点转移第一响应者给可见的InputView</li>
<li>完成编辑时去除第一响应者（注意iOS9下键盘响应逻辑视图层级都发生了变化）</li>
</ul>
<p><strong>主要代码</strong></p>
<p><img src="https://cloud.githubusercontent.com/assets/9360037/11436829/4b2d95f2-9523-11e5-8d66-8745354c0e99.png" alt="simulator screen shot nov 27 2015 4 17 38 pm"></p>
<figure class="highlight xl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 单例初始化</span></div><div class="line">+ (UUInputAccessoryView*)sharedView &#123;</div><div class="line">    static dispatch_once_t once;</div><div class="line">    static UUInputAccessoryView *sharedView;</div><div class="line">    dispatch_once(&amp;once, ^ &#123;</div><div class="line">        sharedView = [[UUInputAccessoryView alloc] init];</div><div class="line">        <span class="function"><span class="title">sharedView</span>-&gt;</span>btnBack = [UIButton buttonWithType:UIButtonTypeCustom];</div><div class="line">        <span class="function"><span class="title">sharedView</span>-&gt;</span>btnBack.frame = CGRectMake(<span class="number">0</span>, <span class="number">0</span>, UUIAV_MAIN_W, UUIAV_MAIN_H);</div><div class="line">        [<span class="function"><span class="title">sharedView</span>-&gt;</span>btnBack addTarget:sharedView action:@selector(dismiss) forControlEvents:UIControlEventTouchUpInside];</div><div class="line">        <span class="function"><span class="title">sharedView</span>-&gt;</span>btnBack.backgroundColor=[UIColor clearColor];</div><div class="line">        UIToolbar *toolbar = [[UIToolbar alloc]initWithFrame:CGRectMake(<span class="number">0</span>, <span class="number">0</span>, UUIAV_MAIN_W, <span class="number">44</span>)];</div><div class="line">        <span class="function"><span class="title">sharedView</span>-&gt;</span>inputView = [[UITextField alloc]initWithFrame:CGRectMake(UUIAV_Edge_Hori, UUIAV_Edge_Vert, UUIAV_MAIN_W-UUIAV_Btn_W-<span class="number">4</span>*UUIAV_Edge_Hori, UUIAV_Btn_H)];</div><div class="line">        <span class="function"><span class="title">sharedView</span>-&gt;</span>inputView.borderStyle = UITextBorderStyleRoundedRect;</div><div class="line">        <span class="function"><span class="title">sharedView</span>-&gt;</span>inputView.returnKeyType = UIReturnKeyDone;</div><div class="line">        <span class="function"><span class="title">sharedView</span>-&gt;</span>inputView.clearButtonMode = UITextFieldViewModeWhileEditing;</div><div class="line">        <span class="function"><span class="title">sharedView</span>-&gt;</span>inputView.enablesReturnKeyAutomatically = YES;</div><div class="line">        <span class="function"><span class="title">sharedView</span>-&gt;</span>inputView.delegate = sharedView;</div><div class="line">        [<span class="function"><span class="title">toolbar</span> addSubview:sharedView-&gt;</span>inputView];</div><div class="line">        <span class="function"><span class="title">sharedView</span>-&gt;</span>assistView = [[UITextField alloc]init];</div><div class="line">        <span class="function"><span class="title">sharedView</span>-&gt;</span>assistView.delegate = sharedView;</div><div class="line">        <span class="function"><span class="title">sharedView</span>-&gt;</span>assistView.returnKeyType = UIReturnKeyDone;</div><div class="line">        <span class="function"><span class="title">sharedView</span>-&gt;</span>assistView.enablesReturnKeyAutomatically = YES;</div><div class="line">        [<span class="function"><span class="title">sharedView</span>-&gt;</span><span class="function"><span class="title">btnBack</span> addSubview:sharedView-&gt;</span>assistView];</div><div class="line">        <span class="function"><span class="title">sharedView</span>-&gt;</span>assistView.inputAccessoryView = toolbar;</div><div class="line">        <span class="function"><span class="title">sharedView</span>-&gt;</span>BtnSave = [UIButton buttonWithType:UIButtonTypeCustom];</div><div class="line">        <span class="function"><span class="title">sharedView</span>-&gt;</span>BtnSave.frame = CGRectMake(UUIAV_MAIN_W-UUIAV_Btn_W-<span class="number">2</span>*UUIAV_Edge_Hori, UUIAV_Edge_Vert, UUIAV_Btn_W, UUIAV_Btn_H);</div><div class="line">        <span class="function"><span class="title">sharedView</span>-&gt;</span>BtnSave.backgroundColor = [UIColor clearColor];</div><div class="line">        [<span class="function"><span class="title">sharedView</span>-&gt;</span>BtnSave setTitle:@<span class="string">"确定"</span> forState:UIControlStateNormal];</div><div class="line">        [<span class="function"><span class="title">sharedView</span>-&gt;</span>BtnSave setTitleColor:[UIColor redColor] forState:UIControlStateNormal];</div><div class="line">        [<span class="function"><span class="title">sharedView</span>-&gt;</span>BtnSave addTarget:sharedView action:@selector(Done) forControlEvents:UIControlEventTouchUpInside];</div><div class="line">        [<span class="function"><span class="title">toolbar</span> addSubview:sharedView-&gt;</span>BtnSave];</div><div class="line">    &#125;);</div><div class="line">	CGRectGetHeight([UIScreen mainScreen].bounds);</div><div class="line">	return sharedView;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>实现逻辑代码</code></p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">+ (void)<span class="keyword">showKeyboardType:(UIKeyboardType)type </span>content:(NSString *)content <span class="keyword">Block:(UUInputAccessoryBlock)block</span></div><div class="line">&#123;</div><div class="line">    [[UUInputAccessoryView <span class="keyword">sharedView] </span><span class="keyword">show:block</span></div><div class="line"><span class="symbol">                               keyboardType:</span>type</div><div class="line"><span class="symbol">                                    content:</span>content]<span class="comment">;</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)<span class="keyword">show:(UUInputAccessoryBlock)block </span>keyboardType:(UIKeyboardType)type content:(NSString *)content</div><div class="line">&#123;</div><div class="line">    UIWindow *window=[UIApplication <span class="keyword">sharedApplication].keyWindow;</span></div><div class="line">    [window <span class="keyword">addSubview:btnBack];</span></div><div class="line"></div><div class="line">    inputBlock = <span class="keyword">block;</span></div><div class="line">    inputView<span class="meta">.text</span> = content<span class="comment">;</span></div><div class="line">    inputView.keyboardType = type<span class="comment">;</span></div><div class="line">    assistView.keyboardType = type<span class="comment">;</span></div><div class="line">    [assistView <span class="keyword">becomeFirstResponder];</span></div><div class="line">    <span class="keyword">shouldDismiss </span>= NO<span class="comment">;</span></div><div class="line">    </div><div class="line">    [[NSNotificationCenter defaultCenter] <span class="keyword">addObserverForName:UIKeyboardDidShowNotification</span></div><div class="line"><span class="symbol">                                                      object:</span>nil</div><div class="line"><span class="symbol">                                                       queue:</span>nil</div><div class="line"><span class="symbol">                                                  usingBlock:</span>^(NSNotification * _Nonnull note) &#123;</div><div class="line">                                                      if (!<span class="keyword">shouldDismiss) </span>&#123;</div><div class="line">                                                          [inputView <span class="keyword">becomeFirstResponder];</span></div><div class="line">                                                      &#125;</div><div class="line">                                                  &#125;]<span class="comment">;</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)Done</div><div class="line">&#123;</div><div class="line">    [inputView resignFirstResponder]<span class="comment">;</span></div><div class="line">    !inputBlock ?: inputBlock(inputView<span class="meta">.text</span>)<span class="comment">;</span></div><div class="line">    [self <span class="keyword">dismiss];</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">BOOL)textFieldShouldReturn:(UITextField </span>*)textField</div><div class="line">&#123;</div><div class="line">    [self Done]<span class="comment">;</span></div><div class="line">    return NO<span class="comment">;</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)<span class="keyword">dismiss</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">shouldDismiss </span>= YES<span class="comment">;</span></div><div class="line">    [inputView resignFirstResponder]<span class="comment">;</span></div><div class="line">    [<span class="keyword">btnBack </span>removeFromSuperview]<span class="comment">;</span></div><div class="line">    [[NSNotificationCenter defaultCenter] removeObserver:self]<span class="comment">;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="InputView的frame适应"><a href="#InputView的frame适应" class="headerlink" title="InputView的frame适应"></a>InputView的frame适应</h3><p><a href="https://github.com/ZhipingYang/UUChatSwift/blob/master/UUChatTableViewSwift/ChatTableViewController.swift#L123" target="_blank" rel="external">案例见GitHub的Demo</a></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 键盘响应布局</span></div><div class="line"><span class="meta">@objc</span> <span class="function"><span class="keyword">func</span> <span class="title">keyboardFrameChanged</span><span class="params">(notification: NSNotification)</span></span> &#123;</div><div class="line">    </div><div class="line">    <span class="keyword">let</span> dict = <span class="type">NSDictionary</span>(dictionary: notification.userInfo!)</div><div class="line">    <span class="keyword">let</span> keyboardValue = dict.objectForKey(<span class="type">UIKeyboardFrameEndUserInfoKey</span>) <span class="keyword">as</span>! <span class="type">NSValue</span></div><div class="line">    <span class="keyword">let</span> bottomDistance = mainScreenSize().height - keyboardValue.<span class="type">CGRectValue</span>().origin.y</div><div class="line">    <span class="keyword">let</span> duration = <span class="type">Double</span>(dict.objectForKey(<span class="type">UIKeyboardAnimationDurationUserInfoKey</span>) <span class="keyword">as</span>! <span class="type">NSNumber</span>)</div><div class="line">    </div><div class="line">    <span class="type">UIView</span>.animateWithDuration(duration, animations: &#123;</div><div class="line">        <span class="keyword">self</span>.inputViewConstraint!.constant = -bottomDistance</div><div class="line">        <span class="keyword">self</span>.view.layoutIfNeeded()</div><div class="line">        &#125;, completion: &#123;</div><div class="line">            (value: <span class="type">Bool</span>) <span class="keyword">in</span></div><div class="line">            <span class="keyword">self</span>.chatTableView.scrollToBottom(animation: <span class="literal">true</span>)</div><div class="line">    &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ScrollView下拉动态修改keyboard（InputView）的frame"><a href="#ScrollView下拉动态修改keyboard（InputView）的frame" class="headerlink" title="ScrollView下拉动态修改keyboard（InputView）的frame"></a>ScrollView下拉动态修改keyboard（InputView）的frame</h3><p><strong>常见隐藏keyboard的一些方式</strong></p>
<ul>
<li>TouchBeigin</li>
<li>DidDrag</li>
<li>EndDrag</li>
<li>Interactive</li>
</ul>
<p><strong>iOS7 开始，ScrollView提供</strong></p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">@available(iOS <span class="number">7.0</span>, *)</div><div class="line">public <span class="class"><span class="keyword">enum</span> <span class="title">UIScrollViewKeyboardDismissMode</span> : <span class="title">Int</span> &#123;</span></div><div class="line">    <span class="keyword">case</span> None</div><div class="line">    <span class="keyword">case</span> OnDrag /<span class="regexp">/ dismisses the keyboard when a drag begins</span></div><div class="line">    case Interactive /<span class="regexp">/ the keyboard follows the dragging touch off screen, and may be pulled upward again to cancel the dismiss</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>所以在ScrollView上添加<code>scrollView.keyboardDismissMode = UIScrollViewKeyboardDismissMode.Interactive</code>就可以了。<br>效果详见iOS7及以上原生设备的短信滑动消失键盘的交互</p>
<h2 id="写负责任的代码之异常处理-曾铭"><a href="#写负责任的代码之异常处理-曾铭" class="headerlink" title="写负责任的代码之异常处理 - 曾铭"></a>写负责任的代码之异常处理 - 曾铭</h2><blockquote>
<p>千万不要以为你可以忽视这个特殊的返回值，因为它是一种“可能性”。代码漏掉任何一种可能出现的情况，都可能产生意想不到的灾难性结果。</p>
</blockquote>
<ul>
<li>重视代码（及业务）逻辑的异常情况，将其视为『正常流程』的一部分。</li>
</ul>
<ul>
<li>重视函数的抛出异常，将其视为返回值之一（union类型）。</li>
</ul>
<h3 id="政策之后的对策"><a href="#政策之后的对策" class="headerlink" title="政策之后的对策"></a>政策之后的对策</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function">String <span class="title">foo</span><span class="params">()</span> <span class="keyword">throws</span> MyException </span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>catch 全部异常</li>
</ul>
<ul>
<li>try 全部代码</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">  ...</div><div class="line">  ...</div><div class="line">  ... foo() ...</div><div class="line">  ...</div><div class="line">  ...</div><div class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;&#125;</div></pre></td></tr></table></figure>
<h4 id="我们-API-为什么难调试"><a href="#我们-API-为什么难调试" class="headerlink" title="我们 API 为什么难调试"></a>我们 API 为什么难调试</h4><ul>
<li>Service 层未声明抛出异常，也会抛出异常</li>
<li>抛出的异常 API 层记入日志，向上抛时却丢弃了异常信息</li>
<li>API 层方法代码全部 try，很难定位到是哪一行出问题</li>
</ul>
<h3 id="推荐的对策"><a href="#推荐的对策" class="headerlink" title="推荐的对策"></a>推荐的对策</h3><ul>
<li>只 catch 指定的 exception</li>
<li>try 进可能的小</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">  foo();</div><div class="line">&#125; <span class="keyword">catch</span> (MyException e) &#123;</div><div class="line">  Log.warning(e);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>源头思考全部可能性，内部的问题不抛给别人</li>
<li>不要试图忽略（隐藏）错误，每次出错都是优化代码（反思自己局限）的好机会。否则，你终将付出代价。</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-周精益分享-动画" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/18/周精益分享-动画/" class="article-date">
      <time datetime="2015-11-18T10:30:00.000Z" itemprop="datePublished">2015-11-18</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/18/周精益分享-动画/">周精益分享 - 动画</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="Android-L动画-吴明"><a href="#Android-L动画-吴明" class="headerlink" title="Android L动画  - 吴明"></a>Android L动画  - 吴明</h2><ul>
<li>Touch feedback（触摸反馈）<ul>
<li>波纹有边界</li>
<li>波纹超出边界</li>
<li>波纹颜色</li>
</ul>
</li>
<li>Reveal effect（揭露效果）</li>
<li>liecap<ul>
<li>Circular Reveal动画</li>
</ul>
</li>
<li>Activity transitions（Activity转换效果）<ul>
<li>Enter（进入）<ul>
<li>普通Transition<ul>
<li>explode：从场景的中心移入或移出 </li>
<li>slide：从场景的边缘移入或移出 </li>
<li>fade：调整透明度产生渐变效果</li>
</ul>
</li>
<li>Shared Elements Transition 共享元素转换:共享两个                acitivity中共同的元素<ul>
<li>changeBounds -  改变目标视图的布局边界</li>
<li>changeClipBounds - 裁剪目标视图边界</li>
<li>changeTransform - 改变目标视图的缩放比例和旋转角度        changeImageTransform - 改变目标图片的大小和缩放比例</li>
</ul>
</li>
</ul>
</li>
<li>Exit（退出）</li>
<li><a href="http://pan.baidu.com/s/1o6Kngnw" target="_blank" rel="external">demo地址</a><br><img src="http://7xn0ue.com1.z0.glb.clouddn.com/Untitled123.gif" alt="Markdown preferences pane"></li>
</ul>
</li>
</ul>
<p>##objectorAnimator 动画  王进</p>
<p>###动画类型</p>
<ul>
<li>View Animation(Tween Animation 补间动画)<br>只能支持简单的缩放、平移、旋转、透明度等基本的动画，且有一定的局限性<br>动画时View的真正的View的属性保持不变，实际位置未改变<br>原理：提供动画的起始和结束状态信息，中间的状态根据上述类里差值器算法填充</li>
<li>Drawable Animation（Frame Animation 帧动画）</li>
<li>Property Animation(属性动画)<br>它更改的是对象的实际属性，</li>
</ul>
<p>###Property Animation属性</p>
<ul>
<li>Duration：动画的持续时间</li>
<li>TimeInterpolation：属性值的计算方式，如先快后慢</li>
<li>TypeEvaluator：根据属性的开始、结束值与TimeInterpolation计算出的因子计算出当前时间的属性值</li>
<li>Repeat Count and behavoir：重复次数与方式，如播放3次、5次、无限循环，可以此动画一直重复，或播放完时再反向播放</li>
<li>Animation sets：动画集合，即可以同时对一个对象应用几个动画，这些动画可以同时播放也可以对不同动画设置不同开始偏移</li>
<li>Frame refreash delay：多少时间刷新一次，即每隔多少时间计算一次属性值，默认为10ms，最终刷新时间还受系统进程调度与硬件的影响</li>
</ul>
<p>###Property Animation 动画流程<br><img src="http://pic002.cnblogs.com/images/2011/168097/2011120119191590.png" alt=""></p>
<p>###ValueAnimator<br>ValueAnimator包含Property Animation动画的所有核心功能，如动画时间，开始、结束属性值，相应时间属性值计算方法等。应用Property Animation有两个步聚：</p>
<ol>
<li>计算属性值</li>
<li>根据属性值执行相应的动作，如改变对象的某一属性。（需要在onAnimationUpdate中传入执行动画的对象）<figure class="highlight pony"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="type">ValueAnimator</span> animation = <span class="type">ValueAnimator</span>.ofFloat(<span class="number">0</span>f, <span class="number">1</span>f);</div><div class="line">animation.setDuration(<span class="number">1000</span>);</div><div class="line">animation.addUpdateListener(<span class="function"><span class="keyword">new</span> <span class="title">AnimatorUpdateListener</span>() &#123;</span></div><div class="line">    @<span class="title">Override</span></div><div class="line">    <span class="title">public</span> <span class="title">void</span> <span class="title">onAnimationUpdate</span>(<span class="type">ValueAnimator</span> animation) &#123;</div><div class="line">        <span class="title">Log</span>.<span class="title">i</span>("update", ((<span class="type">Float</span>) <span class="title">animation</span>.<span class="title">getAnimatedValue</span>()).<span class="title">toString</span>());</div><div class="line">        <span class="comment">//这个函数中会传入ValueAnimator对象做为参数，通过这个ValueAnimator对象的getAnimatedValue()函数可以得到当前的属性值</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"><span class="title">animation</span>.<span class="title">setInterpolator</span>(new <span class="type">CycleInterpolator</span>(<span class="number">3</span>));</div><div class="line"><span class="title">animation</span>.<span class="title">start</span>();</div></pre></td></tr></table></figure>
</li>
</ol>
<p>###ObjectAnimator<br>ObjectAnimator继承自ValueAnimator，要指定一个对象及该对象的一个属性,例如</p>
<ul>
<li>常用方法有ofFloat()，ofInt()，ofObject()，ofArgb()，ofPropertyValuesHolder()。</li>
<li><p>属性动画可用的属性<br>答案是：任何一切带有set开头的方法属性名字。可能我们常用的有：</p>
<ul>
<li>平移 translationX，translationY, X，Y。 </li>
<li>缩放 scaleX，scaleY。 </li>
<li>旋转 rotationX， rotationY。</li>
<li>透明度 alpha。</li>
</ul>
<p>也就是说我们所有控件都有以上setTranslationX(),setScaleX(),setRotationX(),setAlpha()等方法。<br>我们不仅限于这几个属性，就拿TextView控件来说，只要是TextView有的属性都可以用来实现动画效果，比如 字体大小：“textColor”，字体颜色“textSize”等。</p>
<blockquote>
<p>限制：对象应该有一个setter函数：set<propertyname>（驼峰命名法）及要有相应属性的getter方法：get<propertyname><br>且应返回值类型应与相应的setter方法的参数类型一致。<br>如果上述条件不满足，则不能用ObjectAnimator，应用ValueAnimator代替。</propertyname></propertyname></p>
</blockquote>
</li>
</ul>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">ObjectAnimator animator = ObjectAnimator.ofFloat(imageView, 'alpha', <span class="number">1.0</span>f, <span class="number">0.3</span>f, <span class="number">1.0</span>F);</div><div class="line">       animator.setDuration(<span class="number">2000</span>);<span class="comment">//动画时间</span></div><div class="line">       animator.setInterpolator(new BounceInterpolator());<span class="comment">//动画插值</span></div><div class="line">       animator.setRepeatCount(<span class="number">-1</span>);<span class="comment">//设置动画重复次数</span></div><div class="line">       animator.setRepeatMode(ValueAnimator.RESTART);<span class="comment">//动画重复模式</span></div><div class="line">       animator.setStartDelay(<span class="number">1000</span>);<span class="comment">//动画延时执行</span></div><div class="line">       animator.start();<span class="comment">//启动动画</span></div></pre></td></tr></table></figure>
<blockquote>
<p>根据应用动画的对象或属性的不同，可能需要在onAnimationUpdate函数中调用invalidate()函数刷新视图。</p>
</blockquote>
<p>###组合动画</p>
<ul>
<li><p><strong>组合动画1–AnimatorSet的使用</strong><br>这个类提供了一个play()方法，如果我们向这个方法中传入一个Animator对象(ValueAnimator或ObjectAnimator)将会返回一个AnimatorSet.Builder的实例，AnimatorSet.Builder中包括以下四个方法：</p>
<ul>
<li>after(Animator anim) 将现有动画插入到传入的动画之后执行</li>
<li>after(long delay) 将现有动画延迟指定毫秒后执行</li>
<li>before(Animator anim) 将现有动画插入到传入的动画之前执行</li>
<li>with(Animator anim) 将现有动画和传入的动画同时执行</li>
</ul>
<blockquote>
<p>Android 除了提供play(),还有playSequentially(),playTogether() 可供使用，可传入一个或者多个动画对象（，隔开），或者动画集合</p>
</blockquote>
</li>
</ul>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">ObjectAnimator animator = ObjectAnimator.ofInt(container, <span class="string">"backgroundColor"</span>, <span class="number">0xFFFF0000</span>, <span class="number">0xFFFF00FF</span>);</div><div class="line">             ObjectAnimator animator1 = ObjectAnimator.ofFloat(view, <span class="string">"translationX"</span>, <span class="number">0.0</span>f, <span class="number">200.0</span>f, <span class="number">0</span>f);</div><div class="line">             ObjectAnimator animator2 = ObjectAnimator.ofFloat(view, <span class="string">"scaleX"</span>, <span class="number">1.0</span>f, <span class="number">2.0</span>f);</div><div class="line">             ObjectAnimator animator3 = ObjectAnimator.ofFloat(view, <span class="string">"rotationX"</span>, <span class="number">0.0</span>f, <span class="number">90.0</span>f, <span class="number">0.0</span>F);</div><div class="line">             ObjectAnimator animator4 = ObjectAnimator.ofFloat(view, <span class="string">"alpha"</span>, <span class="number">1.0</span>f, <span class="number">0.2</span>f, <span class="number">1.0</span>F);</div><div class="line"></div><div class="line">             <span class="comment">//组合动画方式1</span></div><div class="line">             AnimatorSet set = new AnimatorSet();</div><div class="line">            ((set.play(animator).with(animator1).before(animator2)).before(animator3)).after(animator4);</div><div class="line">             set.setDuration(<span class="number">5000</span>);</div><div class="line">             set.start();</div></pre></td></tr></table></figure>
<ul>
<li><p><strong>组合动画2–PropertyValuesHolder的使用</strong><br>使用方法ObjectAnimator.ofPropertyValuesHolder(Object target,PropertyValuesHolder… values)；第一个参数是动画的目标对象，之后的参数是PropertyValuesHolder类的实例，可以有多个这样的实例。代码如下：</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">PropertyValuesHolder valuesHolder = PropertyValuesHolder.ofFloat(<span class="string">"translationX"</span>, <span class="number">0.0</span>f, <span class="number">300.0</span>f);</div><div class="line">                PropertyValuesHolder valuesHolder1 = PropertyValuesHolder.ofFloat(<span class="string">"scaleX"</span>, <span class="number">1.0</span>f, <span class="number">1.5</span>f);</div><div class="line">                PropertyValuesHolder valuesHolder2 = PropertyValuesHolder.ofFloat(<span class="string">"rotationX"</span>, <span class="number">0.0</span>f, <span class="number">90.0</span>f, <span class="number">0.0</span>F);</div><div class="line">                PropertyValuesHolder valuesHolder3 = PropertyValuesHolder.ofFloat(<span class="string">"alpha"</span>, <span class="number">1.0</span>f, <span class="number">0.3</span>f, <span class="number">1.0</span>F);</div><div class="line"></div><div class="line">                ObjectAnimator objectAnimator = ObjectAnimator.ofPropertyValuesHolder(view, valuesHolder, valuesHolder1, valuesHolder2, valuesHolder3);</div><div class="line">                objectAnimator.setDuration(<span class="number">2000</span>).start();</div><div class="line">                <span class="comment">//类似于AnimatorSet.playTogether(Animator... items);</span></div></pre></td></tr></table></figure>
</li>
<li><p><strong>组合动画3-ViewPropertyAnimator（多属性动画）</strong></p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ViewPropertyAnimator animator5 = imageView.animate<span class="params">()</span>;</div><div class="line">animator5.translationX<span class="params">(200)</span><span class="string">.scaleX</span><span class="params">(2)</span><span class="string">.setDuration</span><span class="params">(2000)</span><span class="string">.start</span><span class="params">()</span>;</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>注意：使用ViewPropertyAnimator类需要API&gt;=12</p>
</blockquote>
<h3 id="动画监听"><a href="#动画监听" class="headerlink" title="动画监听"></a>动画监听</h3><ul>
<li>animator.addListener(new Animator.AnimatorListener(){});//监听动画开始，结束，取消，重复（四种都包括）</li>
<li>animator.addListener(new  AnimatorListenerAdapter(){});<br>推荐，可代替AnimatorListener，需要监听动画开始，结束，取消，重复那种就直接实现那种方法就行<br>其实AnimatorListenerAdapter的源码只是一个实现了AnimatorListener接口的抽象类而已</li>
<li>animator.addUpdateListener(new  ValueAnimator.AnimatorUpdateListener(){});<br>更加精确的方法来时刻监听当前动画的执行情况，可以读取到动画的每个更新值了<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">animator.addUpdateListener(<span class="keyword">new</span> ValueAnimator.AnimatorUpdateListener() &#123;</div><div class="line">            @<span class="function">Override</span></div><div class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAnimationUpdate</span>(<span class="params">ValueAnimator animation</span>) &#123;</div><div class="line">                <span class="keyword">float</span> <span class="keyword">value</span> = (<span class="keyword">float</span>) animation.getAnimatedValue();</div><div class="line">                <span class="comment">//可以根据自己的需要来获取动画更新值。</span></div><div class="line">                Log.e(<span class="string">'TAG'</span>, <span class="string">'the animation value is '</span> + <span class="keyword">value</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div></pre></td></tr></table></figure>
</li>
</ul>
<p>###Keyframes<br>keyFrame是一个 时间/值 对，通过它可以定义一个在特定时间的特定状态，即关键帧，而且在两个keyFrame之间可以定义不同的Interpolator，就好像多个动画的拼接，第一个动画的结束点是第二个动画的开始点。KeyFrame是抽象类，要通过ofInt(),ofFloat(),ofObject()获得适当的KeyFrame，然后通过PropertyValuesHolder.ofKeyframe获得PropertyValuesHolder对象，如以下例子：<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">*   动画效果：btn对象的width属性值使其：</div><div class="line">*   开始时 Width=400</div><div class="line">*   动画开始1/4时 Width=200</div><div class="line">*   动画开始1/2时 Width=400</div><div class="line">*   动画开始3/4时 Width=100</div><div class="line">*   动画结束时 Width=500</div><div class="line">*/</div><div class="line">Keyframe kf0 = Keyframe.ofInt(<span class="number">0</span>, <span class="number">400</span>);</div><div class="line">Keyframe kf1 = Keyframe.ofInt(<span class="number">0.25</span>f, <span class="number">200</span>);</div><div class="line">Keyframe kf2 = Keyframe.ofInt(<span class="number">0.5</span>f, <span class="number">400</span>);</div><div class="line">Keyframe kf4 = Keyframe.ofInt(<span class="number">0.75</span>f, <span class="number">100</span>);</div><div class="line">Keyframe kf3 = Keyframe.ofInt(<span class="number">1</span>f, <span class="number">500</span>);</div><div class="line">PropertyValuesHolder pvhRotation = PropertyValuesHolder.ofKeyframe(<span class="string">"width"</span>, kf0, kf1, kf2, kf4, kf3);</div><div class="line">ObjectAnimator rotationAnim = ObjectAnimator.ofPropertyValuesHolder(btn2, pvhRotation);</div><div class="line">rotationAnim.setDuration(<span class="number">2000</span>);</div></pre></td></tr></table></figure></p>
<h3 id="Property-Animation在XML中使用"><a href="#Property-Animation在XML中使用" class="headerlink" title="Property Animation在XML中使用"></a>Property Animation在XML中使用</h3><ul>
<li><p>xml文件放在res/animator/中</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">'http://schemas.android.com/apk/res/android'</span></span></div><div class="line">    <span class="attr">android:duration</span>=<span class="string">'2000'</span></div><div class="line">    <span class="attr">android:ordering</span>=<span class="string">'sequentially'</span>&gt;<span class="comment">&lt;!--动画执行顺序 sequentially：顺序执行；together：同时执行。 --&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">objectAnimator</span></span></div><div class="line">        <span class="attr">android:propertyName</span>=<span class="string">'translationX'</span></div><div class="line">        <span class="attr">android:valueFrom</span>=<span class="string">'0'</span></div><div class="line">        <span class="attr">android:valueTo</span>=<span class="string">'200'</span></div><div class="line">        <span class="attr">android:valueType</span>=<span class="string">'floatType'</span> /&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">set</span> <span class="attr">android:ordering</span>=<span class="string">'together'</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">objectAnimator</span></span></div><div class="line">            <span class="attr">android:propertyName</span>=<span class="string">'scaleX'</span></div><div class="line">            <span class="attr">android:valueFrom</span>=<span class="string">'1'</span></div><div class="line">            <span class="attr">android:valueTo</span>=<span class="string">'2'</span></div><div class="line">            <span class="attr">android:valueType</span>=<span class="string">'floatType'</span> /&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">objectAnimator</span></span></div><div class="line">            <span class="attr">android:propertyName</span>=<span class="string">'rotationX'</span></div><div class="line">            <span class="attr">android:valueFrom</span>=<span class="string">'0'</span></div><div class="line">            <span class="attr">android:valueTo</span>=<span class="string">'90'</span></div><div class="line">            <span class="attr">android:valueType</span>=<span class="string">'floatType'</span> /&gt;<span class="comment">&lt;!--动画值的类型--&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>通过AnimatorInflater.loadAnimator方法加载xml动画返回一个Animator的对象，然后调用setTarget方法给动画设置对象调用哪个start启动动画即可完成xml动画效果</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Animator animator = AnimatorInflater.loadAnimator(<span class="built_in">context</span>, R.animator.anim_file)<span class="comment">;</span></div><div class="line">animator.setTarget(view)<span class="comment">;  </span></div><div class="line">animator.start()<span class="comment">;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="花花绿绿的ProgressBar-杨俊构"><a href="#花花绿绿的ProgressBar-杨俊构" class="headerlink" title="花花绿绿的ProgressBar  杨俊构"></a>花花绿绿的ProgressBar  杨俊构</h2><p><em>参考<a href="http://www.runoob.com/w3cnote/android-tutorial-progressbar.html" target="_blank" rel="external">Android 基础入门教程</a></em></p>
<ul>
<li>ProgressBar(进度条)是Android基本UI控件，ProgressBar的应用场景很多，比如 用户登录时，后台在发请求，以及等待服务器返回信息，这个时候会用到进度条；或者当在进行一些比较 耗时的操作，需要等待一段较长的时间，这个时候如果没有提示，用户可能会以为程序Carsh或者手机死机 了，这样会大大降低用户体验，所以在需要进行耗时操作的地方，添加上进度条，让用户知道当前的程序 在执行中，也可以直观的告诉用户当前任务的执行进度等！使用进度条可以给我带来这样的便利！ </li>
</ul>
<ul>
<li>ProgressBar<a href="http://androiddoc.qiniudn.com/reference/android/widget/ProgressBar.html" target="_blank" rel="external">官方API文档</a>，ProgressBar继承与View类，直接子类有AbsSeekBar和ContentLoadingProgressBar， 其中AbsSeekBar的子类有SeekBar和RatingBar，可见这二者也是基于ProgressBar实现的</li>
</ul>
<p><img src="http://7xohph.com1.z0.glb.clouddn.com/46760225.jpg" alt=""></p>
<ul>
<li>常用属性详解：</li>
</ul>
<blockquote>
<ul>
<li>android:max：进度条的最大值</li>
<li>android:progress：进度条已完成进度值</li>
<li>android:progressDrawable：设置轨道对应的Drawable对象</li>
<li>android:indeterminate：如果设置成true，则进度条不精确显示进度</li>
<li>android:indeterminateDrawable：设置不显示进度的进度条的Drawable对象</li>
<li>android:indeterminateDuration：设置不精确显示进度的持续时间</li>
<li>android:secondaryProgress：二级进度条，类似于视频播放的一条是当前播放进度，一条是缓冲进度，前者通过progress属性进行设置！</li>
</ul>
</blockquote>
<ul>
<li>对应的再Java中我们可调用下述方法：</li>
</ul>
<blockquote>
<ul>
<li>getMax()：返回这个进度条的范围的上限</li>
<li>getProgress()：返回进度</li>
<li>getSecondaryProgress()：返回次要进度</li>
<li>incrementProgressBy(int diff)：指定增加的进度</li>
<li>isIndeterminate()：指示进度条是否在不确定模式下</li>
<li>setIndeterminate(boolean indeterminate)：设置不确定模式下</li>
</ul>
</blockquote>
<ul>
<li>系统默认进度条使用实例：</li>
</ul>
<p><img src="http://7xohph.com1.z0.glb.clouddn.com/34906854.jpg" alt=""></p>
<h3 id="耀眼的IOS的ProgressBar-，参看开源中国IOS代码库"><a href="#耀眼的IOS的ProgressBar-，参看开源中国IOS代码库" class="headerlink" title="耀眼的IOS的ProgressBar ，参看开源中国IOS代码库"></a>耀眼的IOS的ProgressBar ，参看<a href="http://www.oschina.net/ios/codingList/373/ios-progress" target="_blank" rel="external">开源中国IOS代码库</a></h3><h3 id="圆形进度条"><a href="#圆形进度条" class="headerlink" title="圆形进度条"></a>圆形进度条</h3><blockquote>
<p>网上一个简单的自定义圆形进度条！代码还是比较简单，容易理解，有兴趣可以看看，或者进行相关扩展~</p>
</blockquote>
<p><img src="http://7xohph.com1.z0.glb.clouddn.com/17272953.jpg" alt=""></p>
<ul>
<li>实现代码：自定义View类：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by Jay on 2015/8/5 0005.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CirclePgBar</span> <span class="keyword">extends</span> <span class="title">View</span> </span>&#123;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keyword">private</span> Paint mBackPaint;</div><div class="line">    <span class="keyword">private</span> Paint mFrontPaint;</div><div class="line">    <span class="keyword">private</span> Paint mTextPaint;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> mStrokeWidth = <span class="number">50</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> mHalfStrokeWidth = mStrokeWidth / <span class="number">2</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> mRadius = <span class="number">200</span>;</div><div class="line">    <span class="keyword">private</span> RectF mRect;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mProgress = <span class="number">0</span>;</div><div class="line">    <span class="comment">//目标值，想改多少就改多少</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mTargetProgress = <span class="number">90</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mMax = <span class="number">100</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mWidth;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mHeight;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CirclePgBar</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context);</div><div class="line">        init();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CirclePgBar</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs);</div><div class="line">        init();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CirclePgBar</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs, defStyleAttr);</div><div class="line">        init();</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">//完成相关参数初始化</span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</div><div class="line">        mBackPaint = <span class="keyword">new</span> Paint();</div><div class="line">        mBackPaint.setColor(Color.WHITE);</div><div class="line">        mBackPaint.setAntiAlias(<span class="keyword">true</span>);</div><div class="line">        mBackPaint.setStyle(Paint.Style.STROKE);</div><div class="line">        mBackPaint.setStrokeWidth(mStrokeWidth);</div><div class="line"></div><div class="line">        mFrontPaint = <span class="keyword">new</span> Paint();</div><div class="line">        mFrontPaint.setColor(Color.GREEN);</div><div class="line">        mFrontPaint.setAntiAlias(<span class="keyword">true</span>);</div><div class="line">        mFrontPaint.setStyle(Paint.Style.STROKE);</div><div class="line">        mFrontPaint.setStrokeWidth(mStrokeWidth);</div><div class="line"></div><div class="line"></div><div class="line">        mTextPaint = <span class="keyword">new</span> Paint();</div><div class="line">        mTextPaint.setColor(Color.GREEN);</div><div class="line">        mTextPaint.setAntiAlias(<span class="keyword">true</span>);</div><div class="line">        mTextPaint.setTextSize(<span class="number">80</span>);</div><div class="line">        mTextPaint.setTextAlign(Paint.Align.CENTER);</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">//重写测量大小的onMeasure方法和绘制View的核心方法onDraw()</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onMeasure</span><span class="params">(<span class="keyword">int</span> widthMeasureSpec, <span class="keyword">int</span> heightMeasureSpec)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec);</div><div class="line">        mWidth = getRealSize(widthMeasureSpec);</div><div class="line">        mHeight = getRealSize(heightMeasureSpec);</div><div class="line">        setMeasuredDimension(mWidth, mHeight);</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>&#123;</div><div class="line">        initRect();</div><div class="line">        <span class="keyword">float</span> angle = mProgress / (<span class="keyword">float</span>) mMax * <span class="number">360</span>;</div><div class="line">        canvas.drawCircle(mWidth / <span class="number">2</span>, mHeight / <span class="number">2</span>, mRadius, mBackPaint);</div><div class="line">        canvas.drawArc(mRect, -<span class="number">90</span>, angle, <span class="keyword">false</span>, mFrontPaint);</div><div class="line">        canvas.drawText(mProgress + <span class="string">"%"</span>, mWidth / <span class="number">2</span> + mHalfStrokeWidth, mHeight / <span class="number">2</span> + mHalfStrokeWidth, mTextPaint);</div><div class="line">        <span class="keyword">if</span> (mProgress &lt; mTargetProgress) &#123;</div><div class="line">            mProgress += <span class="number">1</span>;</div><div class="line">            invalidate();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getRealSize</span><span class="params">(<span class="keyword">int</span> measureSpec)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> result = <span class="number">1</span>;</div><div class="line">        <span class="keyword">int</span> mode = MeasureSpec.getMode(measureSpec);</div><div class="line">        <span class="keyword">int</span> size = MeasureSpec.getSize(measureSpec);</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (mode == MeasureSpec.AT_MOST || mode == MeasureSpec.UNSPECIFIED) &#123;</div><div class="line">            <span class="comment">//自己计算</span></div><div class="line">            result = (<span class="keyword">int</span>) (mRadius * <span class="number">2</span> + mStrokeWidth);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            result = size;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initRect</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (mRect == <span class="keyword">null</span>) &#123;</div><div class="line">            mRect = <span class="keyword">new</span> RectF();</div><div class="line">            <span class="keyword">int</span> viewSize = (<span class="keyword">int</span>) (mRadius * <span class="number">2</span>);</div><div class="line">            <span class="keyword">int</span> left = (mWidth - viewSize) / <span class="number">2</span>;</div><div class="line">            <span class="keyword">int</span> top = (mHeight - viewSize) / <span class="number">2</span>;</div><div class="line">            <span class="keyword">int</span> right = left + viewSize;</div><div class="line">            <span class="keyword">int</span> bottom = top + viewSize;</div><div class="line">            mRect.set(left, top, right, bottom);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>然后在布局文件中加上：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">com.jay.progressbardemo.CirclePgBar</span></span></div><div class="line">     <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">  <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>/&gt;</div></pre></td></tr></table></figure>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ul>
<li>progressbar是Android中的常用控件，在实际开发中和动画结合较多，好的进度条可以缓解使用者焦躁的情趣，自定义圆形进度条可以自行完善，然后用到实际开发中！</li>
</ul>
<h2 id="layer-list实现阴影效果——xpleemoon"><a href="#layer-list实现阴影效果——xpleemoon" class="headerlink" title="layer-list实现阴影效果——xpleemoon"></a>layer-list实现阴影效果——xpleemoon</h2><ul>
<li><p>为控件实现阴影效果，可以有多种方式：</p>
<ul>
<li>多个drawable层叠在一起（不好的实现是多个View层叠达到多个drawable的层叠效果，相对好的实现是在同一个View钟实现多个drawable的层叠）</li>
<li>自定义view</li>
<li>Material Design中设置Z轴的方式</li>
</ul>
</li>
<li><p>本文的思路是多个drawable叠在一起，但是不额外使用View，通过layer-list可以将多个item按照顺序层叠在一起显示。首先来看效果图：</p>
</li>
</ul>
<p><img src="https://github.com/xpleemoon/layer-list-shadow-demo/blob/master/gif/LayerShadow.gif?raw=true" alt="LayerShadow"></p>
<ul>
<li><p>第一个和第二个控件是用来展示layer-list实现阴影效果的基本款，而第三个控件是综合上述两个控件效果，再集合selector实现的。</p>
</li>
<li><p>默认状态：</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span><span class="meta">?&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">layer-list</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- 阴影：左偏移2dp，上偏移4dp --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span></span></div><div class="line">        <span class="attr">android:left</span>=<span class="string">"2dp"</span></div><div class="line">        <span class="attr">android:top</span>=<span class="string">"4dp"</span>&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">shape</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"@android:color/holo_blue_dark"</span> /&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">"10dp"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- 前景：：底偏移4dp，右偏移2dp --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span></span></div><div class="line">        <span class="attr">android:bottom</span>=<span class="string">"4dp"</span></div><div class="line">        <span class="attr">android:right</span>=<span class="string">"2dp"</span>&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">shape</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"@android:color/holo_blue_bright"</span> /&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">"10dp"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">layer-list</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>点击状态：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span><span class="meta">?&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">layer-list</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- 为了达到点击的真实感，将原来默认状态的前景色设置为阴影，并将前景设为无透明--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span></span></div><div class="line">        <span class="attr">android:left</span>=<span class="string">"2dp"</span></div><div class="line">        <span class="attr">android:top</span>=<span class="string">"4dp"</span>&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">shape</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"@android:color/holo_blue_bright"</span> /&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">"10dp"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span></span></div><div class="line">        <span class="attr">android:bottom</span>=<span class="string">"4dp"</span></div><div class="line">        <span class="attr">android:right</span>=<span class="string">"2dp"</span>&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">shape</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">"10dp"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">layer-list</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>layer-list的item可以通过以下属性设置偏移量：</p>
<ul>
<li>android:top 顶部的偏移量</li>
<li>android:bottom 底部的偏移量</li>
<li>android:left 左边的偏移量</li>
<li>android:right 右边的偏移量</li>
</ul>
</blockquote>
<ul>
<li>selector，使用上述layer-list：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span><span class="meta">?&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/layer_list_btn_pressed"</span> <span class="attr">android:state_pressed</span>=<span class="string">"true"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/layer_list_btn_pressed"</span> <span class="attr">android:state_selected</span>=<span class="string">"true"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/layer_list_btn"</span> /&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>最后再来看下，布局代码：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span><span class="meta">?&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></div><div class="line">    <span class="attr">android:paddingBottom</span>=<span class="string">"@dimen/activity_vertical_margin"</span></div><div class="line">    <span class="attr">android:paddingLeft</span>=<span class="string">"@dimen/activity_horizontal_margin"</span></div><div class="line">    <span class="attr">android:paddingRight</span>=<span class="string">"@dimen/activity_horizontal_margin"</span></div><div class="line">    <span class="attr">android:paddingTop</span>=<span class="string">"@dimen/activity_vertical_margin"</span></div><div class="line">    <span class="attr">tools:context</span>=<span class="string">".MainActivity"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"100dp"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"50dp"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"@drawable/layer_list_btn"</span></div><div class="line">        <span class="attr">android:clickable</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">        <span class="attr">android:text</span>=<span class="string">"默认状态"</span> /&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"100dp"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"50dp"</span></div><div class="line">        <span class="attr">android:layout_marginTop</span>=<span class="string">"@dimen/activity_vertical_margin"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"@drawable/layer_list_btn_pressed"</span></div><div class="line">        <span class="attr">android:clickable</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">        <span class="attr">android:text</span>=<span class="string">"点击状态"</span> /&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"100dp"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"50dp"</span></div><div class="line">        <span class="attr">android:layout_marginTop</span>=<span class="string">"@dimen/activity_vertical_margin"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"@drawable/selector_btn"</span></div><div class="line">        <span class="attr">android:clickable</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">        <span class="attr">android:text</span>=<span class="string">"点我"</span> /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li><p>第一个和第二个TextView分别引用了对应的layer-list（默认和点击）作为背景，第三个引用了selector</p>
</li>
<li><p><strong><em><a href="https://github.com/xpleemoon/layer-list-shadow-demo" target="_blank" rel="external">源码地址</a></em></strong></p>
</li>
</ul>
<h2 id="零部署的云服务-王胜"><a href="#零部署的云服务-王胜" class="headerlink" title="零部署的云服务 - 王胜"></a>零部署的云服务 - 王胜</h2><blockquote>
<p>本周的分享主题是动画，但之前7月份我已经分享过一次，<a href="http://51offer.github.io/2015/07/07/%E7%A7%BB%E5%8A%A8%E7%BB%84%E5%91%A8%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB-%E7%9F%A5%E5%85%B6%E6%89%80%E4%BB%A5%E7%84%B6/" target="_blank" rel="external">知其所以然</a> 。再加上前面几位已经对android的动画介绍的很完整了，所以我就分享另一个话题『云平台下的零部署开发网站』。</p>
</blockquote>
<h3 id="牵扯的技能"><a href="#牵扯的技能" class="headerlink" title="牵扯的技能"></a>牵扯的技能</h3><ul>
<li>Git</li>
<li>任何一门后端开发语言</li>
</ul>
<h3 id="搭建步骤"><a href="#搭建步骤" class="headerlink" title="搭建步骤"></a>搭建步骤</h3><p><a href="https://tryappservice.azure.com/zh-cn" target="_blank" rel="external">AZURE</a> -&gt; 点击 <a href="https://azure.microsoft.com/zh-cn/services/app-service/web/" target="_blank" rel="external">Web应用模块</a> -&gt; 选择语言，点击<strong>创建Web应用</strong> -&gt; 选择模板，点击<strong>创建</strong>，至此，应用以创建，点击页面上站点url，就能看到新创建的Web站点了。</p>
<h3 id="修改代码，Git提交自动完成部署"><a href="#修改代码，Git提交自动完成部署" class="headerlink" title="修改代码，Git提交自动完成部署"></a>修改代码，Git提交自动完成部署</h3><p>复制创建成功页面『使用 Git 克隆或推送』里的Git地址，将初始化源码clone到本地，然后编辑代码，修改功能。完成后，直接push到远程，云平台自动完成部署。再看看网页是不是已经发生变化了。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line">Victors-MPB:azure wangsheng$ git clone https://$4f743e5d-0ee0-4-231-b9ee:WSc8Szx4Rf30apo3Ky7hpw6mXAadAZYvn1zagCvMaboj7mHFyJ2vzuYn9i12@4f743e5d-0ee0-4-231-b9ee.scm.azurewebsites.net/4f743e5d-0ee0-4-231-b9ee.git</div><div class="line">Cloning into '4f743e5d-0ee0-4-231-b9ee'...</div><div class="line">remote: Counting objects: 4, done.</div><div class="line">remote: Compressing objects: 100% (3/3), done.</div><div class="line">remote: Total 4 (delta 0), reused 0 (delta 0)</div><div class="line">Unpacking objects: 100% (4/4), done.</div><div class="line">Checking connectivity... done.</div><div class="line">Victors-MPB:azure wangsheng$ ls</div><div class="line">4f743e5d-0ee0-4-231-b9ee</div><div class="line">Victors-MPB:azure wangsheng$ cd 4f743e5d-0ee0-4-231-b9ee/</div><div class="line">Victors-MPB:4f743e5d-0ee0-4-231-b9ee wangsheng$ git br</div><div class="line">* master</div><div class="line">Victors-MPB:4f743e5d-0ee0-4-231-b9ee wangsheng$ git log</div><div class="line">commit cf6edda65210ef7254f9bc545c778489f123620e</div><div class="line">Author: windowsazure &lt;windowsazure&gt;</div><div class="line">Date:   Fri Nov 20 03:53:00 2015 +0000</div><div class="line"></div><div class="line">    Initial Commit</div><div class="line">Victors-MPB:4f743e5d-0ee0-4-231-b9ee wangsheng$ ls</div><div class="line">favicon.ico	index.php</div><div class="line">Victors-MPB:4f743e5d-0ee0-4-231-b9ee wangsheng$ vi index.php</div><div class="line">Victors-MPB:4f743e5d-0ee0-4-231-b9ee wangsheng$ git st</div><div class="line">On branch master</div><div class="line">Your branch is up-to-date with 'origin/master'.</div><div class="line">Changes not staged for commit:</div><div class="line">  (use "git add &lt;file&gt;..." to update what will be committed)</div><div class="line">  (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)</div><div class="line"></div><div class="line">	modified:   index.php</div><div class="line"></div><div class="line">no changes added to commit (use "git add" and/or "git commit -a")</div><div class="line">Victors-MPB:4f743e5d-0ee0-4-231-b9ee wangsheng$ git diff</div><div class="line">diff --git a/index.php b/index.php</div><div class="line">&lt;?php</div><div class="line">index 712f825..50a17e7 100644</div><div class="line">--- a/index.php</div><div class="line">+++ b/index.php</div><div class="line">@@ -1,3 +1,4 @@</div><div class="line"> &lt;?php</div><div class="line">     echo "Hello World"</div><div class="line">-?&gt;</div><div class="line">\ No newline at end of file</div><div class="line">+    echo "hack it."</div><div class="line">+?&gt;</div><div class="line">Victors-MPB:4f743e5d-0ee0-4-231-b9ee wangsheng$ git ci -am "add one line."</div><div class="line">[master 6c5551f] add one line.</div><div class="line"> 1 file changed, 2 insertions(+), 1 deletion(-)</div><div class="line">Victors-MPB:4f743e5d-0ee0-4-231-b9ee wangsheng$ git push origin master</div><div class="line">Counting objects: 3, done.</div><div class="line">Delta compression using up to 4 threads.</div><div class="line">Compressing objects: 100% (3/3), done.</div><div class="line">Writing objects: 100% (3/3), 324 bytes | 0 bytes/s, done.</div><div class="line">Total 3 (delta 0), reused 0 (delta 0)</div><div class="line">remote: Updating branch 'master'.</div><div class="line">remote: Updating submodules.</div><div class="line">remote: Preparing deployment for commit id '6c5551f090'.</div><div class="line">remote: Generating deployment script.</div><div class="line">remote: Generating deployment script for Web Site</div><div class="line">remote: Generated deployment script files</div><div class="line">remote: Running deployment command...</div><div class="line">remote: Handling Basic Web Site deployment.</div><div class="line">remote: Finished successfully.</div><div class="line">remote: Deployment successful.</div></pre></td></tr></table></figure>
<p>对，后端开发可以如此简单快乐地开发部署！！！</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-周精益分享-Swift入门专题" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/13/周精益分享-Swift入门专题/" class="article-date">
      <time datetime="2015-11-13T10:30:00.000Z" itemprop="datePublished">2015-11-13</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/13/周精益分享-Swift入门专题/">周精益分享 - Swift入门专题</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="Swift初见-–-张超耀"><a href="#Swift初见-–-张超耀" class="headerlink" title="Swift初见 – 张超耀"></a>Swift初见 – 张超耀</h2><h3 id="宏"><a href="#宏" class="headerlink" title="宏"></a>宏</h3><figure class="highlight mizar"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// <span class="keyword">in</span> objective-c, but <span class="keyword">in</span> swift, #<span class="keyword">define</span> can't <span class="keyword">be</span> used any more  </div><div class="line">// use <span class="keyword">let</span> keyword to <span class="keyword">define</span> a macro, look up original document:  </div><div class="line">/*  </div><div class="line">Simple Macros  </div><div class="line">Where you typically used the #<span class="keyword">define</span> directive to <span class="keyword">define</span> a primitive constant <span class="keyword">in</span> C <span class="keyword">and</span> Objective-C, <span class="keyword">in</span> Swift you use a global constant instead. For example, the constant <span class="keyword">definition</span> #<span class="keyword">define</span> FADE_ANIMATION_DURATION 0.35 can <span class="keyword">be</span> better expressed <span class="keyword">in</span> Swift with <span class="keyword">let</span> FADE_ANIMATION_DURATION = 0.35. Because simple constant-like macros map directly to Swift global variables, the compiler automatically imports simple macros defined <span class="keyword">in</span> C <span class="keyword">and</span> Objective-C source files.  </div><div class="line">*/  </div><div class="line">// <span class="keyword">in</span> objective-c  </div><div class="line">// #<span class="keyword">define</span> kCommonAPI @"http://xxxxxxx"  </div><div class="line">// but <span class="keyword">in</span> swift, no #<span class="keyword">define</span>, just use <span class="keyword">let</span> to <span class="keyword">define</span>  </div><div class="line"><span class="keyword">let</span> kCommonAPI = "http://xxxxxxx"</div></pre></td></tr></table></figure>
<h3 id="注释-amp-分号"><a href="#注释-amp-分号" class="headerlink" title="注释 &amp; 分号"></a>注释 &amp; 分号</h3><ul>
<li>在Swift中，注释跟C/OC语言中的注释很像，但最大的不同点就是在Swift中多行注释可以嵌套</li>
</ul>
<figure class="highlight ceylon"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 这是单行注释  </span></div><div class="line">  </div><div class="line"><span class="comment">/* 这也是注释，但是多行注释   </span></div><div class="line">  <span class="comment">/*多行注释在swift中是可以嵌套的*/</span>  </div><div class="line">  <span class="comment">/*原官方指导教程上说嵌套多行注释可以快速、简单地把大的代码块分成多块来注释 */</span>  </div><div class="line">*/</div></pre></td></tr></table></figure>
<ul>
<li>与其它开发语言不同的时，swift是不要求写分号的，当然如果想写，也是可以的。当你想把多个语句写到同一行时，这种情况下就一定要使用分号来隔开不同的语句了</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> dog = <span class="string">"a gog"</span> <span class="comment">// 可以不添加分号  </span></div><div class="line"><span class="keyword">let</span> cat = <span class="string">"a cat"</span>; <span class="built_in">print</span>(cat)<span class="comment">// 除了最后一条语句可以不添加分号外，其它都需要添加分号来隔开  </span></div><div class="line"><span class="keyword">let</span> catTwo = <span class="string">"two cats"</span>; <span class="keyword">let</span> name = <span class="string">"Jobs"</span>; <span class="built_in">print</span>(<span class="string">"<span class="subst">\(name)</span> has <span class="subst">\(catTwos)</span>"</span>)</div></pre></td></tr></table></figure>
<h3 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h3><ul>
<li>Swift不会像C、OC那样自动<strong>隐式转换</strong>类型，所以我们需要手动进行类型转换 </li>
</ul>
<figure class="highlight capnproto"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">let twoThousand: <span class="built_in">UInt16</span> = <span class="number">2000</span>   </div><div class="line">// one是<span class="built_in">UInt8</span>类型  </div><div class="line">let one: <span class="built_in">UInt8</span> = <span class="number">1</span>  </div><div class="line">// twoThousand是<span class="built_in">UInt16</span>类型，one是<span class="built_in">UInt8</span>类型，如果要执行相加，那么就需要进行类型转换   </div><div class="line">// 否则会报错的。  </div><div class="line">let twoThousandAndOne = twoThousand + <span class="built_in">UInt16</span>(one) </div><div class="line"></div><div class="line">** 浮点值转换成整型时，会截尾**</div></pre></td></tr></table></figure>
<h3 id="类型别名-Typealias"><a href="#类型别名-Typealias" class="headerlink" title="类型别名(Typealias)"></a>类型别名(Typealias)</h3><ul>
<li>类型别名也就是给已经存在的类型起一个别名。定义类型别名是使用关键字typealias。 类型别名一般是为了让开发者更容易看出变量或者常量的类型或者是更好地归类某一个模块中需要使用到的类型，让开发者见名知意。</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 下面是给UInt16起一个别名，叫mySample  </span></div><div class="line"><span class="comment">// 然后就可以在其它地方使用这个mySample声明变量或者常量  </span></div><div class="line">typealias mySample = UInt16  </div><div class="line">  </div><div class="line"><span class="comment">// 由于前面已经定义了类型别名，那么这里使用AudioSample也相当于使用UInt16  </span></div><div class="line">所以mySample<span class="selector-class">.min</span> = UInt16<span class="selector-class">.min</span>,也就是<span class="number">0</span> </div><div class="line"><span class="selector-tag">var</span> maxAmplitudeFound = mySample.min</div></pre></td></tr></table></figure>
<h3 id="“-”-和-“-”"><a href="#“-”-和-“-”" class="headerlink" title="“?” 和 “!”"></a>“?” 和 “!”</h3><ul>
<li>Swift语言使用var定义变量，但和别的语言不同，Swift里不会自动给变量赋初始值， 也就是说变量不会有默认值，所以要求使用变量之前必须要对其初始化<br>。如果在使用变量之前不进行初始化就会报错.</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> stringValue : <span class="type">String</span>?</div><div class="line">stringValue = <span class="literal">nil</span></div><div class="line"><span class="built_in">print</span>(<span class="string">"<span class="subst">\(stringValue)</span>"</span>)</div><div class="line"><span class="keyword">let</span> hashValue = stringValue?.hashValue</div><div class="line"></div><div class="line"><span class="comment">// 这就是optional, strValue自动得到默认值：nil</span></div><div class="line"><span class="comment">// 这个nil跟Objective-C中的nil不同，不是指针，而是表示值不存在。</span></div><div class="line"><span class="keyword">var</span> strValue: <span class="type">String</span>?</div><div class="line"></div><div class="line"><span class="comment">// 判断optional是否有值</span></div><div class="line"><span class="keyword">if</span> (strValue != <span class="literal">nil</span>) &#123;</div><div class="line">    <span class="comment">// do what you need to do here</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>##下期预告</p>
<h3 id="深度理解Swift的”-”和”-”"><a href="#深度理解Swift的”-”和”-”" class="headerlink" title="深度理解Swift的”?”和”!”"></a>深度理解Swift的”?”和”!”</h3><h3 id="Swift之断言"><a href="#Swift之断言" class="headerlink" title="Swift之断言"></a>Swift之断言</h3><h3 id="浅谈Swift的closure"><a href="#浅谈Swift的closure" class="headerlink" title="浅谈Swift的closure"></a>浅谈Swift的closure</h3><h2 id="Dubbo-上手-–-陈奎"><a href="#Dubbo-上手-–-陈奎" class="headerlink" title="Dubbo 上手 – 陈奎"></a>Dubbo 上手 – 陈奎</h2><h2 id="『图像和滤镜』-图像选择器"><a href="#『图像和滤镜』-图像选择器" class="headerlink" title="『图像和滤镜』 - 图像选择器"></a>『图像和滤镜』 - 图像选择器</h2><p><code>我们可以使用以下常规的图像获取方式</code></p>
<p><img src="./Simulator Screen Shot Nov 12, 2015, 8.11.12 PM.png" alt="Alt text"></p>
<p><code>图库与相册</code></p>
<p><img src="./Simulator Screen Shot Nov 12, 2015, 8.16.30 PM.png" alt="Alt text"></p>
<h4 id="系统自带"><a href="#系统自带" class="headerlink" title="系统自带"></a>系统自带</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">touchesBegan</span><span class="params">(touches: Set&lt;UITouch&gt;, withEvent event: UIEvent?)</span></span> &#123;</div><div class="line">    </div><div class="line">    <span class="keyword">let</span> sheet = <span class="type">UIAlertController</span>(title: <span class="string">"图片选择"</span>, message: <span class="string">"简单版的三种选择"</span>, preferredStyle: .<span class="type">ActionSheet</span>)</div><div class="line">    <span class="comment">// 判断设备是否支持相机（iPod &amp; Simulator）</span></div><div class="line">    <span class="keyword">if</span> (<span class="type">UIImagePickerController</span>.isSourceTypeAvailable(.<span class="type">Camera</span>)) &#123;</div><div class="line">        sheet.addAction(<span class="type">UIAlertAction</span>.<span class="keyword">init</span>(title: <span class="string">"Camera"</span>, style: .<span class="type">Default</span>, handler: &#123; <span class="number">_</span> <span class="keyword">in</span></div><div class="line">            <span class="keyword">self</span>.showPhotoes(.<span class="type">Camera</span>)</div><div class="line">        &#125;))</div><div class="line">    &#125;</div><div class="line">    sheet.addAction(<span class="type">UIAlertAction</span>.<span class="keyword">init</span>(title: <span class="string">"PhotoLibrary"</span>, style: .<span class="type">Default</span>, handler: &#123; <span class="number">_</span> <span class="keyword">in</span></div><div class="line">        <span class="keyword">self</span>.showPhotoes(.<span class="type">PhotoLibrary</span>)</div><div class="line">    &#125;))</div><div class="line">    sheet.addAction(<span class="type">UIAlertAction</span>.<span class="keyword">init</span>(title: <span class="string">"SavedPhotosAlbum"</span>, style: .<span class="type">Default</span>, handler: &#123; <span class="number">_</span> <span class="keyword">in</span></div><div class="line">        <span class="keyword">self</span>.showPhotoes(.<span class="type">SavedPhotosAlbum</span>)</div><div class="line">    &#125;))</div><div class="line">    sheet.addAction(<span class="type">UIAlertAction</span>.<span class="keyword">init</span>(title: <span class="string">"Cancel"</span>, style: .<span class="type">Cancel</span>, handler: <span class="literal">nil</span>))</div><div class="line">    presentViewController(sheet, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">showPhotoes</span><span class="params">(source: UIImagePickerControllerSourceType)</span></span> &#123;</div><div class="line">    <span class="keyword">let</span> controller = <span class="type">UIImagePickerController</span>()</div><div class="line">    controller.delegate = <span class="keyword">self</span></div><div class="line">    controller.sourceType = source</div><div class="line">    controller.allowsEditing = source == .<span class="type">SavedPhotosAlbum</span> ? <span class="literal">true</span>:<span class="literal">false</span></div><div class="line"></div><div class="line">    <span class="keyword">self</span>.presentViewController(controller, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>UIImagePickerController的代理</code><br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">imagePickerControllerDidCancel</span><span class="params">(picker: UIImagePickerController)</span></span> &#123;</div><div class="line">    dismissViewControllerAnimated(<span class="literal">true</span>, completion: <span class="literal">nil</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 非常坑，这个方法废弃了但代码提示只有它</span></div><div class="line"><span class="comment">//	func imagePickerController(picker: UIImagePickerController, didFinishPickingImage image: UIImage, editingInfo: [String : AnyObject]?) &#123;</span></div><div class="line"><span class="comment">//	&#125;</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">imagePickerController</span><span class="params">(picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : AnyObject])</span></span> &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>#####<a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIImagePickerControllerDelegate_Protocol/#//apple_ref/doc/constant_group/Editing_Information_Keys" target="_blank" rel="external">info字典介绍</a><br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">UIImagePickerControllerMediaType</span>: String</div><div class="line"><span class="built_in">UIImagePickerControllerOriginalImage</span>: <span class="built_in">UIImage</span></div><div class="line"><span class="built_in">UIImagePickerControllerEditedImage</span>: <span class="built_in">UIImage</span></div><div class="line"><span class="built_in">UIImagePickerControllerCropRect</span>: <span class="built_in">NSValue</span> -&gt; <span class="built_in">CGRect</span></div><div class="line"><span class="comment">// MediaURL只为视频提供</span></div><div class="line"><span class="built_in">UIImagePickerControllerMediaURL</span>:  <span class="built_in">NSURL</span></div><div class="line"><span class="comment">// LivePhoto是一张图片，保留那个moment的前后动作和声音</span></div><div class="line"><span class="built_in">UIImagePickerControllerLivePhoto</span>: String</div><div class="line"><span class="comment">// 摄像摄影时返回media的信息字典</span></div><div class="line"><span class="built_in">UIImagePickerControllerMediaMetadata</span>: <span class="built_in">NSDictionary</span></div></pre></td></tr></table></figure></p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// SavedPhotosAlbum 的 info 示例</span></div><div class="line"></div><div class="line">▿ 5 elements</div><div class="line">  ▿ [0] : 2 elements</div><div class="line">    -<span class="ruby"> .<span class="number">0</span> : <span class="string">"UIImagePickerControllerCropRect"</span></span></div><div class="line">  ▿ [1] : 2 elements</div><div class="line">    -<span class="ruby"> .<span class="number">0</span> : <span class="string">"UIImagePickerControllerOriginalImage"</span></span></div><div class="line">  ▿ [2] : 2 elements</div><div class="line">    -<span class="ruby"> .<span class="number">0</span> : <span class="string">"UIImagePickerControllerReferenceURL"</span></span></div><div class="line">    -<span class="ruby"> .<span class="number">1</span> : assets-<span class="symbol">library:</span>/<span class="regexp">/asset/asset</span>.JPG?id=<span class="number">99</span>D53A1F-FEEF-<span class="number">40</span>E1-<span class="number">8</span>BB3-<span class="number">7</span>DD55A43C8B7&amp;ext=JPG</span></div><div class="line">  ▿ [3] : 2 elements</div><div class="line">    -<span class="ruby"> .<span class="number">0</span> : <span class="string">"UIImagePickerControllerMediaType"</span></span></div><div class="line">    -<span class="ruby"> .<span class="number">1</span> : public.image</span></div><div class="line">  ▿ [4] : 2 elements</div><div class="line">    -<span class="ruby"> .<span class="number">0</span> : <span class="string">"UIImagePickerControllerEditedImage"</span></span></div></pre></td></tr></table></figure>
<h3 id="自定义"><a href="#自定义" class="headerlink" title="自定义"></a>自定义</h3><p><img src="./1447343597718.png" alt="Alt text"></p>
<p>遍历相册的所有图片<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// AssetsLibrary.framework</span></div><div class="line"><span class="comment">// ALAssetsLibrary 的使用,但是它慢慢的被放弃了</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">loadLocalPhotoes</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">var</span> countOne = <span class="number">0</span></div><div class="line">        <span class="comment">//ALAssetsGroupSavedPhotos表示只读取相机胶卷（ALAssetsGroupAll则读取全部相簿）</span></div><div class="line">        assetsLibrary.enumerateGroupsWithTypes(<span class="type">ALAssetsGroupSavedPhotos</span>, usingBlock: &#123;</div><div class="line">            (group: <span class="type">ALAssetsGroup</span>!, stop) <span class="keyword">in</span></div><div class="line">            <span class="built_in">print</span>(<span class="string">"is goin"</span>)</div><div class="line">            <span class="keyword">if</span> group != <span class="literal">nil</span> &#123;</div><div class="line">                <span class="keyword">let</span> assetBlock : <span class="type">ALAssetsGroupEnumerationResultsBlock</span> = &#123;</div><div class="line">                    (result: <span class="type">ALAsset</span>!, index: <span class="type">Int</span>, stop) <span class="keyword">in</span></div><div class="line">                    <span class="keyword">if</span> result != <span class="literal">nil</span> &#123;</div><div class="line">                        <span class="keyword">self</span>.assets.append(result)</div><div class="line">                        countOne++</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                group.enumerateAssetsUsingBlock(assetBlock)</div><div class="line">                <span class="built_in">print</span>(<span class="string">"assets:<span class="subst">\(countOne)</span>"</span>)</div><div class="line">                <span class="keyword">self</span>.startChangeLocalImages(<span class="number">0</span>)</div><div class="line">            &#125;</div><div class="line">            &#125;, failureBlock: &#123; (fail) <span class="keyword">in</span></div><div class="line">                <span class="built_in">print</span>(fail)</div><div class="line">        &#125;)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line"><span class="comment">// 展现本地图片</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">startChangeLocalImages</span><span class="params">(<span class="keyword">var</span> index: Int)</span></span>&#123;</div><div class="line">        <span class="keyword">if</span> index==assets.<span class="built_in">count</span> &#123;</div><div class="line">            index = <span class="number">0</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">let</span> myAsset = assets[index]</div><div class="line">        <span class="keyword">let</span> image = <span class="type">UIImage</span>(<span class="type">CGImage</span>:myAsset.thumbnail().takeUnretainedValue())</div><div class="line">        <span class="keyword">self</span>.backImageView.image = image</div><div class="line">        </div><div class="line">        <span class="keyword">let</span> popTime = dispatch_time(<span class="type">DISPATCH_TIME_NOW</span>, <span class="type">Int64</span>(<span class="number">1</span> * <span class="type">Double</span>(<span class="type">NSEC_PER_SEC</span>)))</div><div class="line">        dispatch_after(popTime, dispatch_get_main_queue()) &#123;</div><div class="line">            <span class="keyword">self</span>.startChangeLocalImages(index+<span class="number">1</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>iOS9 开始使用新库<br><a href="https://developer.apple.com/library/prerelease/ios/documentation/Photos/Reference/PHPhotoLibrary_Class/index.html" target="_blank" rel="external">PHPhotoLibrary</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-周精益分享-装逼指南二期" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/04/周精益分享-装逼指南二期/" class="article-date">
      <time datetime="2015-11-04T10:30:00.000Z" itemprop="datePublished">2015-11-04</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/04/周精益分享-装逼指南二期/">周精益分享 - 程序员装逼指南二期</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="Android-单元测试-吴明"><a href="#Android-单元测试-吴明" class="headerlink" title="Android 单元测试  吴明"></a>Android 单元测试  吴明</h2><ul>
<li><a href="https://developer.android.com/intl/zh-cn/training/activity-testing/preparing-activity-testing.html" target="_blank" rel="external">Android单元测试支持</a><ul>
<li>Android studio 1.2 beta3版本，原生支持单元测试</li>
</ul>
</li>
<li>环境搭建 <ul>
<li>配置环境命令：./gradlew build connectedCheck  </li>
</ul>
</li>
<li>测试示例    <ul>
<li><img src="http://7xn0ue.com1.z0.glb.clouddn.com/420E036F-4D69-47F4-A639-5A5B294F7BDD.png" alt="MacDown Screenshot"></li>
</ul>
</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">MyFirstTestActivityTest</span> <span class="keyword">extends</span> <span class="title">ActivityInstrumentationTestCase2&lt;MyFirstTestActivity&gt;</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="type">MyFirstTestActivity</span> mFirstTestActivity;</div><div class="line">    <span class="keyword">private</span> <span class="type">TextView</span> mFirstTestText;</div><div class="line"></div><div class="line">    public <span class="type">MyFirstTestActivityTest</span>() &#123;</div><div class="line">        <span class="keyword">super</span>(<span class="type">MyFirstTestActivity</span>.<span class="keyword">class</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">protected</span> void setUp() <span class="keyword">throws</span> <span class="type">Exception</span> &#123;</div><div class="line">        <span class="keyword">super</span>.setUp();</div><div class="line">        mFirstTestActivity = getActivity();</div><div class="line">        mFirstTestText =</div><div class="line">                (<span class="type">TextView</span>) mFirstTestActivity</div><div class="line">                .findViewById(<span class="type">R</span>.id.my_first_test_text_view);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>ps:由于配置环境一直报:</li>
</ul>
<figure class="highlight subunit"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Test </span>running failed: Instrumentation run failed due to 'java.lang.RuntimeException'</div></pre></td></tr></table></figure>
<ul>
<li><a href="https://developer.android.com/intl/zh-cn/training/testing/ui-testing/index.html" target="_blank" rel="external">Automating UI Tests</a></li>
<li><a href="https://developer.android.com/intl/zh-cn/training/testing/unit-testing/index.html" target="_blank" rel="external">Building Effective Unit Tests</a></li>
<li><a href="https://developer.android.com/intl/zh-cn/training/testing/performance.html" target="_blank" rel="external">Testing Display  Performance</a></li>
<li>问题：<ul>
<li>运行在模拟器上，通过对模拟器的操作或者mock，来触发函数调用，进而对其结果进行验证</li>
<li>测试的编写和维护较为困难</li>
</ul>
</li>
</ul>
<h2 id="Linux-文件权限入门-曾铭"><a href="#Linux-文件权限入门-曾铭" class="headerlink" title="Linux 文件权限入门 - 曾铭"></a>Linux 文件权限入门 - 曾铭</h2><h3 id="一个线上-bug"><a href="#一个线上-bug" class="headerlink" title="一个线上 bug"></a>一个线上 bug</h3><p>图片上传 API 无法使用，定位到问题是 dev1 帐号移动的 tomcat 无法访问 /home/img_temp 目录，处理权限问题后搞定</p>
<h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><p>user, group, others</p>
<figure class="highlight tap"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[dev1@apps-51offer ~]$ ll</div><div class="line">total 16</div><div class="line">-rw-r--r--<span class="number"> 1 </span>dev1 dev  <span class="number"> 742 </span>Nov <span class="number"> 5 </span>11:22 ming.pub</div><div class="line">drwxrwx---<span class="number"> 4 </span>root root<span class="number"> 4096 </span>Nov <span class="number"> 6 </span>09:30 test1</div><div class="line">drwxr-xr--<span class="number"> 2 </span>dev1 dev <span class="number"> 4096 </span>Nov <span class="number"> 6 </span>10:44 test2</div><div class="line">drwxr-xr-x<span class="number"> 2 </span>dev1 dev <span class="number"> 4096 </span>Nov <span class="number"> 6 </span>09:30 test3</div></pre></td></tr></table></figure>
<ul>
<li>文件 <code>-</code></li>
<li>文件夹 <code>d</code></li>
<li>链接 <code>l</code></li>
</ul>
<p>rwx 读、写、执行权限 , 754 代表什么</p>
<ul>
<li>文件所有者变更：<code>chown ming:mobile file</code></li>
<li>文件权限变更： <code>chmod g+rx file</code></li>
</ul>
<h3 id="一个小坑"><a href="#一个小坑" class="headerlink" title="一个小坑"></a>一个小坑</h3><h4 id="问："><a href="#问：" class="headerlink" title="问："></a>问：</h4><blockquote>
<p><code>drwxr-xr-- 2 dev1 dev  4096 Nov  6 10:44 test2</code> 文件夹下有 <code>-rwxr-xr-- 2 root root  4096 Nov  6 10:44 file</code><br>dev1 用户可以删除 file 这个文件吗？</p>
</blockquote>
<h4 id="答："><a href="#答：" class="headerlink" title="答："></a>答：</h4><blockquote>
<p>可以，文件的 rwx 控制文件本身的读写运行权限，文件的增删文件名的修改要看文件夹的权限。</p>
</blockquote>
<p>##Android 压力测试工具 Monkey&amp;MonkeyRunner- 杨俊构</p>
<p>###Monkey</p>
<h4 id="一、Monkey-是什么？"><a href="#一、Monkey-是什么？" class="headerlink" title="一、Monkey 是什么？"></a>一、Monkey 是什么？</h4><ul>
<li>Monkey 就是SDK中附带的一个工具。</li>
</ul>
<h4 id="二、Monkey-测试的目的？"><a href="#二、Monkey-测试的目的？" class="headerlink" title="二、Monkey 测试的目的？"></a>二、Monkey 测试的目的？</h4><ul>
<li>该工具用于进行压力测试。 然后开发人员结合monkey 打印的日志 和系统打印的日志，结局测试中出现的问题。</li>
</ul>
<h4 id="三、Monkey-测试的特点？"><a href="#三、Monkey-测试的特点？" class="headerlink" title="三、Monkey 测试的特点？"></a>三、Monkey 测试的特点？</h4><ul>
<li>Monkey 测试,所有的事件都是随机产生的，不带任何人的主观性。</li>
</ul>
<h4 id="四、Monkey-命令详解"><a href="#四、Monkey-命令详解" class="headerlink" title="四、Monkey 命令详解"></a>四、Monkey 命令详解</h4><ul>
<li><p>标准的monkey 命令: [adb shell] monkey [options] <eventcount> ,</eventcount></p>
<blockquote>
<p> 例如：adb shell monkey -v 500 ——–产生500次随机事件，</p>
</blockquote>
</li>
</ul>
<ul>
<li><p>四大类—— 常用选项 、 事件选项 、 约束选项 、 调试选项</p>
<blockquote>
<p>-v：指定打印信息的详细级别，一个 -v增加一个级别 ， 默认级别为 0 。</p>
<p>-s：指定产生随机事件种子值，相同的种子值产生相同的事件序列。如： -s 200</p>
<p>-p：指定有效的package（如不指定，则对系统中所有package有效），一个-p 对应一个有效package， 如：-p com.ckt -p com.ckt.asura；</p>
</blockquote>
</li>
</ul>
<h4 id="五、一个简单的monkey命令："><a href="#五、一个简单的monkey命令：" class="headerlink" title="五、一个简单的monkey命令："></a>五、一个简单的monkey命令：</h4><ul>
<li><p>adb shell monkey -p com.xy.android.junit -s 500 -v 10000</p>
</li>
<li><p>但是，工作中为了保证测试数量的完整进行，我们一般不会在发生错误时立刻退出压力测试。</p>
</li>
<li><p>monkey 测试命令如下</p>
</li>
</ul>
<blockquote>
<p>adb shell monkey -p com.xy.android.junit -s 500 –ignore-crashes –ignore-timeouts –monitor-native-crashes -v -v 10000 &gt; E:\monkey_log\java_monkey_log.txt</p>
</blockquote>
<p>###MonkeyRunner</p>
<p>####一、什么是monkeyrunner</p>
<ul>
<li><p>monkeyrunner工具提供了一个API，使用此API写出的程序可以在Android代码之外控制Android设备和模拟器。通过monkeyrunner，您可以写出一个Python程序去安装一个Android应用程序或测试包，运行它，向它发送模拟击键，截取它的用户界面图片。</p>
</li>
<li><p>monkeyrunner工具的主要设计目的是用于测试功能/框架水平上的应用程序和设备，或用于运行单元测试套件，但您当然也可以将其用于其它目的。</p>
</li>
</ul>
<h4 id="二、monkeyrunner工具同Monkey工具的差别"><a href="#二、monkeyrunner工具同Monkey工具的差别" class="headerlink" title="二、monkeyrunner工具同Monkey工具的差别"></a>二、monkeyrunner工具同Monkey工具的差别</h4><ul>
<li><p>Monkey： Monkey工具直接运行在设备或模拟器的adb shell中，生成用户或系统的伪随机事件流，属于黑盒测试。</p>
</li>
<li><p>monkeyrunner：monkeyrunner工具则是类似于灰盒测试的样子，可以编写定制一些测试方法和用例针对具体情况测试。</p>
</li>
</ul>
<h4 id="三、实例-：双11抽取优惠券不停点击一个按钮脚本"><a href="#三、实例-：双11抽取优惠券不停点击一个按钮脚本" class="headerlink" title="三、实例 ：双11抽取优惠券不停点击一个按钮脚本"></a>三、实例 ：双11抽取优惠券不停点击一个按钮脚本</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#coding=utf-8 </span></div><div class="line"><span class="keyword">from</span> com.android.monkeyrunner <span class="keyword">import</span> MonkeyRunner, MonkeyDevice, MonkeyImage</div><div class="line"><span class="keyword">from</span> com.android.monkeyrunner <span class="keyword">import</span> MonkeyRunner <span class="keyword">as</span> mr</div><div class="line"><span class="keyword">from</span> com.android.monkeyrunner <span class="keyword">import</span> MonkeyDevice <span class="keyword">as</span> md</div><div class="line"><span class="keyword">from</span> com.android.monkeyrunner <span class="keyword">import</span> MonkeyImage <span class="keyword">as</span> mi</div><div class="line">device=mr.waitForConnection()</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1000</span>): </div><div class="line">	MonkeyRunner.sleep(<span class="number">1</span>)</div><div class="line">	<span class="keyword">print</span> i</div><div class="line">	device.touch(<span class="number">500</span>,<span class="number">950</span>,<span class="string">'DOWN_AND_UP'</span>)</div><div class="line"><span class="keyword">print</span> <span class="string">"end"</span></div></pre></td></tr></table></figure>
<p>##人脸识别技术简单介绍- 王进</p>
<h4 id="Android自带的API-FaceDetector"><a href="#Android自带的API-FaceDetector" class="headerlink" title="Android自带的API:FaceDetector"></a>Android自带的API:FaceDetector</h4><ul>
<li><p>Step 1: 读取bitmap图片（API 只接受Bitmap）</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Bitmap </span>sampleBmp=<span class="keyword">BitmapFactory.decodeResource(getResources(), </span>R.drawable.sample1)<span class="comment">;</span></div></pre></td></tr></table></figure>
<p>(拍照或者从相册中也可以)</p>
</li>
<li><p>Step 2: 通过FaceDetector API进行人脸识别</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">  <span class="comment">//FaceDetecor只能读取RGB 565格式的Bitmap</span></div><div class="line">  Bitmap tmpBmp = inputImage.copy(Bitmap.Config.RGB_565, <span class="literal">true</span>);</div><div class="line">  <span class="comment">//新建FaceDetector 实例，</span></div><div class="line">  FaceDetector faceDet = <span class="keyword">new</span> <span class="type">FaceDetector</span>(tmpBmp.getWidth(), tmpBmp.getHeight(), MAX_FACES);<span class="comment">//MAX_FACES 搜索人脸个数</span></div><div class="line">  <span class="comment">// 调用findFaces方法，将数据储存在facelist中</span></div><div class="line">  FaceDetector.Face[] faceList = <span class="keyword">new</span> <span class="type">FaceDetector</span>.Face[MAX_FACES];</div><div class="line">faceDet.findFaces(tmpBmp, faceList);</div></pre></td></tr></table></figure>
<blockquote>
<p>找人脸的原理是：找眼睛。<br>它返回的人脸数据face中，<br>通过调用public float eyesDistance ()，得到眼距<br>public void getMidPoint (PointF point)，得到两眼中心点位置。<br>public float confidence () 可以返回该人脸数据的可信度(0~1)，这个值越大，该人脸数据的准确度也就越高</p>
</blockquote>
</li>
<li><p>Step3:对原图进行缩放，并在图上显示人脸框</p>
<ul>
<li>吐槽：<br>A，只能接受Bitmap 格式的数据；<br>B，只能识别双眼距离大于20 像素的人脸像（当然，这个可在framework层中修改）；<br>C，只能检测出人脸的位置（双眼的中心点及距离），不能对人脸进行匹配（查找指定的脸谱）。</li>
</ul>
</li>
</ul>
<p>###第三方Face++</p>
<ul>
<li>在线API：基础版API供免费调用测试和小规模使用（会尽力维护API服务稳定性，但不保证每次调用均会成功），企业版API相对基础版API在算法和稳定性方面会有更好的表现</li>
<li>离线SDK包括人脸关键点定位等功能。</li>
<li>网址：<a href="http://www.faceplusplus.com.cn/" target="_blank" rel="external">http://www.faceplusplus.com.cn/</a></li>
</ul>
<h2 id="Android启动模式之singelTask扫盲－-李仙鹏"><a href="#Android启动模式之singelTask扫盲－-李仙鹏" class="headerlink" title="Android启动模式之singelTask扫盲－ 李仙鹏"></a>Android启动模式之singelTask扫盲－ 李仙鹏</h2>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-2015-10-30-周精益分享-程序员装逼指南" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/30/2015-10-30-周精益分享-程序员装逼指南/" class="article-date">
      <time datetime="2015-10-30T10:30:00.000Z" itemprop="datePublished">2015-10-30</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/30/2015-10-30-周精益分享-程序员装逼指南/">周精益分享 - 程序员装逼指南</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="Android-单元测试"><a href="#Android-单元测试" class="headerlink" title="Android 单元测试"></a>Android 单元测试</h2><h2 id="『图像和滤镜』"><a href="#『图像和滤镜』" class="headerlink" title="『图像和滤镜』"></a>『图像和滤镜』</h2><p>@(Share)[UIImage]</p>
<p>[toc]</p>
<h3 id="图像"><a href="#图像" class="headerlink" title="图像"></a>图像</h3><h4 id="常见的图像格式"><a href="#常见的图像格式" class="headerlink" title="常见的图像格式"></a>常见的图像格式</h4><ul>
<li>png（Portable Network Graphic）便携式网络图形格式</li>
<li>tiff、tif（Tagged Image File Format）标记图像文件格式</li>
<li>jpg、jpeg（Joint Photographic Experts Group）联合摄影专家组</li>
<li>gif（Graphic Interchange Format）图形交换格式</li>
</ul>
<h4 id="图像实例化"><a href="#图像实例化" class="headerlink" title="图像实例化"></a>图像实例化</h4><ul>
<li><p>imageNamed:</p>
<blockquote>
<p>使用频率高，内存缓存优化</p>
</blockquote>
</li>
<li><p>imageWithContentsOfFile:</p>
<blockquote>
<p>单次使用，暂时不清楚如何支持ImageAssert下的图片路径</p>
</blockquote>
</li>
<li><p>imageWithData:</p>
<blockquote>
<p>本地或网络的文件数据加载</p>
</blockquote>
</li>
<li><p>imageWithCGImage:</p>
<blockquote>
<p>绘制生成图，代码如下</p>
</blockquote>
</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 旧图局部裁剪</span></div><div class="line">   <span class="built_in">CGImageRef</span> myImageRef = [oldImage <span class="built_in">CGImageRef</span>];</div><div class="line">   <span class="built_in">CGRect</span> subRect = <span class="built_in">CGRectMake</span>(<span class="number">20</span>, <span class="number">20</span>, <span class="number">100</span>, <span class="number">100</span>);</div><div class="line">   <span class="built_in">CGImageRef</span> cgCrop = <span class="built_in">CGImageCreateWithImageInRect</span>(myImageRef, subRect);</div><div class="line">   <span class="built_in">UIImage</span> *imageCrop = [<span class="built_in">UIImage</span> imageWithCGImage:cgCrop];</div></pre></td></tr></table></figure>
<h4 id="显示图像"><a href="#显示图像" class="headerlink" title="显示图像"></a>显示图像</h4><blockquote>
<p>屏幕的缩放因子，导致我们需要@2x及@3x图，对视图截图操作也同样需要针对Retina及plus优化<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">UIImage</span>*)screenShotBy:(<span class="built_in">UIImageView</span>*)imagView</div><div class="line">&#123;</div><div class="line"><span class="comment">//  UIGraphicsBeginImageContext(imagView.bounds.size);</span></div><div class="line"><span class="comment">// 2表示Retina，3表示plus分辨率，1正常，0则是当前设备的缩放因子</span></div><div class="line"><span class="comment">// YES 表示不包含图像的alpha通道</span></div><div class="line">	<span class="built_in">UIGraphicsBeginImageContextWithOptions</span>((imagView.bounds.size), <span class="literal">YES</span>, <span class="number">2</span>);</div><div class="line">	[imagView.layer renderInContext:<span class="built_in">UIGraphicsGetCurrentContext</span>()];</div><div class="line">	<span class="built_in">UIImage</span>*image = <span class="built_in">UIGraphicsGetImageFromCurrentImageContext</span>();</div><div class="line">	<span class="built_in">UIGraphicsEndImageContext</span>();</div><div class="line">	<span class="keyword">return</span> image;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<h5 id="contentModel"><a href="#contentModel" class="headerlink" title="contentModel"></a>contentModel</h5><p><em>图像内容展现方式</em></p>
<ul>
<li>UIViewContentModelScaleToFill（默认）</li>
<li>UIViewContentModelScaleAspectFill（下拉放大）</li>
<li>UIViewContentModelScaleAspectFit</li>
<li>UIViewContentModelCenter （一些停靠模式）</li>
<li>UIViewContentModelTop/Bottom</li>
<li>UIViewContentModelLeft/Right</li>
</ul>
<h5 id="拉伸属性"><a href="#拉伸属性" class="headerlink" title="拉伸属性"></a>拉伸属性</h5><p><code>代码</code><br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 方法一</span></div><div class="line">image=[oldIconImage <span class="string">stretchableImageWithLeftCapWidth:</span><span class="number">10</span> <span class="string">topCapHeight:</span><span class="number">12</span>];</div><div class="line"></div><div class="line"><span class="comment">// 方法二</span></div><div class="line">image = [oldIconImage <span class="string">resizableImageWithCapInsets:</span>UIEdgeInsetsMake(<span class="number">17</span>, <span class="number">17</span>, <span class="number">17</span>, <span class="number">25</span>)];</div></pre></td></tr></table></figure></p>
<p><code>ImageAssert</code></p>
<p><img src="./1446137205500.png" alt="Alt text"><br>使用slicing，小变大无视差<br><img src="./1446137161636.png" alt="Alt text"></p>
<hr>
<h3 id="图像选择器"><a href="#图像选择器" class="headerlink" title="图像选择器"></a>图像选择器</h3><h4 id="系统自带"><a href="#系统自带" class="headerlink" title="系统自带"></a>系统自带</h4><h4 id="自定义"><a href="#自定义" class="headerlink" title="自定义"></a>自定义</h4><hr>
<h3 id="滤镜"><a href="#滤镜" class="headerlink" title="滤镜"></a>滤镜</h3><h3 id="人脸识别"><a href="#人脸识别" class="headerlink" title="人脸识别"></a>人脸识别</h3><h2 id="聊聊-QCon2015-曾铭"><a href="#聊聊-QCon2015-曾铭" class="headerlink" title="聊聊 QCon2015 - 曾铭"></a>聊聊 QCon2015 - 曾铭</h2><h3 id="pure-native-移动跨平台架构设计与实战"><a href="#pure-native-移动跨平台架构设计与实战" class="headerlink" title="pure-native 移动跨平台架构设计与实战"></a>pure-native 移动跨平台架构设计与实战</h3><p>by 赵世婚</p>
<h4 id="好处"><a href="#好处" class="headerlink" title="好处"></a>好处</h4><ul>
<li>重复逻辑：网络层、账户逻辑</li>
<li>性能（网络压缩、打破内存限制）</li>
<li>多一层封装应对业务变动</li>
</ul>
<h4 id="坏处"><a href="#坏处" class="headerlink" title="坏处"></a>坏处</h4><ul>
<li>跨平台开发代码生成</li>
<li>调试：异常捕获</li>
</ul>
<h4 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h4><ul>
<li>学不来：人员构成决定技术选型，技术选型决定依赖人员 {:&amp;.rollIn}</li>
<li>分层来应对业务变动（横向分层和纵向分层）</li>
</ul>
<h3 id="JavaScript-The-World’s-Best-Programming-Language"><a href="#JavaScript-The-World’s-Best-Programming-Language" class="headerlink" title="JavaScript - The World’s Best Programming Language"></a>JavaScript - The World’s Best Programming Language</h3><p>by Hax</p>
<h4 id="JavaScript-最好-？"><a href="#JavaScript-最好-？" class="headerlink" title="JavaScript 最好 ？"></a>JavaScript 最好 ？</h4><ul>
<li>语言简陋：弱类型、标准库、面向对象、模块、异步 {:&amp;.rollIn}</li>
<li>编程时注意：好的范式、不好的范式</li>
</ul>
<h4 id="不过"><a href="#不过" class="headerlink" title="不过"></a>不过</h4><ul>
<li>npm 飞速发展的 packages 数量 {:&amp;.rollIn}</li>
<li>ECMAScript 6，语言特性问题完美解决 (c)</li>
<li>Babel 6to5 (python)<ul>
<li>most hard to upgrade -&gt; always use latest feature!</li>
</ul>
</li>
<li>最快的动态语言，还会更快 (ruby)</li>
<li>JS as a Platform：中间语言 (c#, java）</li>
<li>生态系统：浏览器、node.js、公司、社区</li>
</ul>
<h4 id="总结：-1"><a href="#总结：-1" class="headerlink" title="总结："></a>总结：</h4><ul>
<li>js 是现阶段发展最快的语言 {:&amp;.rollIn}</li>
<li>前端前途无量！</li>
</ul>
<h3 id="react"><a href="#react" class="headerlink" title="react"></a>react</h3><h4 id="jQuery"><a href="#jQuery" class="headerlink" title="jQuery"></a>jQuery</h4><ul>
<li>DOM 操作</li>
<li>组件散乱，社区力量难以聚合</li>
</ul>
<h4 id="AngularJS"><a href="#AngularJS" class="headerlink" title="AngularJS"></a>AngularJS</h4><ul>
<li>绑定 数据与数据、数据与视图之间的关系</li>
<li>npm</li>
</ul>
<h4 id="React"><a href="#React" class="headerlink" title="React"></a>React</h4><ul>
<li>用 js 写界面……（似乎是一种倒退）</li>
<li>还整个 JSX 让界面好写一点</li>
<li>React Native</li>
</ul>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><ul>
<li>前端风起云涌 {:&amp;.rollIn}</li>
<li>小扎灭我客户端之心不死</li>
</ul>
<h3 id="总的总结"><a href="#总的总结" class="headerlink" title="总的总结"></a>总的总结</h3><ul>
<li>拥抱变化</li>
<li>最差也可以变最好，关键要敢于拥抱变化</li>
<li>技术紧迫感：勇于尝试新东西</li>
<li>业务紧迫感：技术改变留学</li>
</ul>
<h3 id="推荐："><a href="#推荐：" class="headerlink" title="推荐："></a>推荐：</h3><ul>
<li>JavaScript - The World’s Best Programming Language</li>
<li>pure-native移动跨平台架构设计与实战</li>
<li>注重实效的性能</li>
<li>ReactJS 实战</li>
<li>ELE.ME是如何运行的</li>
</ul>
<h2 id="Android-6-0运行权限-王胜"><a href="#Android-6-0运行权限-王胜" class="headerlink" title="Android 6.0运行权限 - 王胜"></a>Android 6.0运行权限 - 王胜</h2><h3 id="一般权限和危险权限"><a href="#一般权限和危险权限" class="headerlink" title="一般权限和危险权限"></a>一般权限和危险权限</h3><p>Android 6.0以前，所有的权限在应用安装或者更新时自动完成授权。如果用户想安装这个App，必需接受所有的权限申请。为了保护用户的隐私，Android M特意调整了Android的授权架构。将应用权限分为一般(Normal)和危险(Dangerous)两种级别的权限:</p>
<ul>
<li><p>一般权限不会直接危害用户的隐私。如果你的App在manifest列出一般权限，那么系统会自动授予这些权限。</p>
</li>
<li><p>危险权限可以访问用户的隐私数据。 如果你的App在manifest列出一般权限，那么系统会自动授予这些权限。如果列出危险权限，需要通过用户显示交互通过你的应用权限申请。</p>
</li>
</ul>
<h3 id="权限组"><a href="#权限组" class="headerlink" title="权限组"></a>权限组</h3><p>Anroid系统里所有的危险权限都拥有所归属的权限组。如果设备运行在Android6.0(API level 23)，并且App的targetSdkVersion是23或者更高，当App请求危险权限时将会有以下表现：</p>
<ul>
<li><p>如果App请求manifest里声明的危险权限，并且App当前还没有获取任何权限组里的权限，系统将弹出一个描述App想要访问权限的对话框。但是对话框不会描述该权限属于哪个权限组。例如：App请求权限 <strong>READ_CONTACTS</strong>  ，系统对话框只显示App需要访问设备的联系人。如果用户授权通过，系统仅仅给App需要的权限。</p>
</li>
<li><p>如果App请求manifest里声明的危险权限，并且App已经用户该危险权限所在的权限组的权限，系统则直接授予此次请求的权限，而不需要用户手动交互。例如：如果App已经有先前的 <strong>READ_CONTACTS</strong> 权限，那么再请求 <strong>WRITE_CONTACTS</strong> 权限，系统则直接授予。</p>
</li>
</ul>
<blockquote>
<p>任何权限都有所归属的权限组，包括一般权限和App自定义的权限。然而，权限组只影响那些危险权限相关的用户体验。你可以忽略一般权限的权限组。</p>
</blockquote>
<p><strong>危险权限和权限组</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">权限组</th>
<th style="text-align:center">权限</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">CALENDAR</td>
<td style="text-align:center"><ul><li>READ_CALENDAR</li><li>WRITE_CALENDAR</li></ul></td>
</tr>
<tr>
<td style="text-align:center">CAMERA</td>
<td style="text-align:center"><ul><li>CAMERA</li></ul></td>
</tr>
<tr>
<td style="text-align:center">CONTACTS</td>
<td style="text-align:center"><ul><li>READ_CONTACTS</li><li> WRITE_CONTACTS</li><li>GET_ACCOUNTS</li></ul></td>
</tr>
<tr>
<td style="text-align:center">LOCATION</td>
<td style="text-align:center"><ul><li>ACCESS_FINE_LOCATION</li><li> ACCESS_COARSE_LOCATION</li></ul></td>
</tr>
<tr>
<td style="text-align:center">MICROPHONE</td>
<td style="text-align:center"><ul><li>RECORD_AUDIO</li></ul></td>
</tr>
<tr>
<td style="text-align:center">PHONE</td>
<td style="text-align:center"><ul><li>READ_PHONE_STATE</li><li>CALL_PHONE</li><li>READ_CALL_LOG</li><li>WRITE_CALL_LOG</li><li> ADD_VOICEMAIL</li><li>USE_SIP</li><li> PROCESS_OUTGOING_CALLS</li></ul></td>
</tr>
<tr>
<td style="text-align:center">SENSORS</td>
<td style="text-align:center"><ul><li>BODY_SENSORS</li></ul></td>
</tr>
<tr>
<td style="text-align:center">SMS</td>
<td style="text-align:center"><ul><li>SEND_SMS</li><li>RECEIVE_SMS</li><li> READ_SMS</li><li>RECEIVE_WAP_PUSH</li><li>RECEIVE_MMS</li></ul></td>
</tr>
<tr>
<td style="text-align:center">STORAGE</td>
<td style="text-align:center"><ul><li>READ_EXTERNAL_STORAGE</li><li> WRITE_EXTERNAL_STORAGE</li></ul></td>
</tr>
</tbody>
</table>
<h3 id="权限检测"><a href="#权限检测" class="headerlink" title="权限检测"></a>权限检测</h3><p>Android的所有版本里，都需要将所需的一般权限和危险权限都声明在App的manifest里。然而这些声明在不同的系统版本和App的target SDK Level会有不同的影响:</p>
<ul>
<li><p>如果设备运行在Android 5.1或者更低，或者你的App target SDK是22或者更低：如果你在manifest里声明了危险权限，用户则不得不在安装App时给予授权；如果他们不授权，系统将不会安装此App。</p>
</li>
<li><p>如果设备运行在Android 6.0或者更高，或者你的App target SDK是23或者更高：App不仅需要在manifest里声明危险权限，而且App在运行时还需要在每次需要危险权限时发起请求。用户可以接受也可以拒绝权限申请，App也需要在用户拒绝危险权限申请时能长长运行。</p>
</li>
</ul>
<blockquote>
<p>注意：此处的权限处理只有App的target API level 23或者更高，而且运行在Android 6.0 (API level 23)或者更高的设备上才会如此。如果设备的中App的targetSdkVersion 是 22或者更低，系统则在安装或者更新App时自动授予危险权限。</p>
</blockquote>
<p><a href="http://developer.android.com/tools/support-library/index.html" target="_blank" rel="external">The Android Support Library</a>能很好地处理检测、请求和权限。Android 6.0 (API level 23) framework也提供了类似的方法。然而，使用support库能更简单一些，因为你不需要在调用方法之前检测android系统的版本。 </p>
<h3 id="发起权限申请请求"><a href="#发起权限申请请求" class="headerlink" title="发起权限申请请求"></a>发起权限申请请求</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Here, this Activity is the current activity</span></div><div class="line"><span class="keyword">if</span> (ContextCompat.checkSelfPermission(thisActivity,</div><div class="line">                Manifest.permission.READ_CONTACTS)</div><div class="line">        != PackageManager.PERMISSION_GRANTED) &#123;</div><div class="line"></div><div class="line">    <span class="comment">// Should we show an explanation?</span></div><div class="line">    <span class="keyword">if</span> (ActivityCompat.shouldShowRequestPermissionRationale(thisActivity,</div><div class="line">            Manifest.permission.READ_CONTACTS)) &#123;</div><div class="line"></div><div class="line">        <span class="comment">// Show an expanation to the user *asynchronously* -- don't block</span></div><div class="line">        <span class="comment">// this thread waiting for the user's response! After the user</span></div><div class="line">        <span class="comment">// sees the explanation, try again to request the permission.</span></div><div class="line"></div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line"></div><div class="line">        <span class="comment">// No explanation needed, we can request the permission.</span></div><div class="line"></div><div class="line">        ActivityCompat.requestPermissions(thisActivity,</div><div class="line">                <span class="keyword">new</span> String[]&#123;Manifest.permission.READ_CONTACTS&#125;,</div><div class="line">                MY_PERMISSIONS_REQUEST_READ_CONTACTS);</div><div class="line"></div><div class="line">        <span class="comment">// MY_PERMISSIONS_REQUEST_READ_CONTACTS is an</span></div><div class="line">        <span class="comment">// app-defined int constant. The callback method gets the</span></div><div class="line">        <span class="comment">// result of the request.</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="处理权限请求结果"><a href="#处理权限请求结果" class="headerlink" title="处理权限请求结果"></a>处理权限请求结果</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRequestPermissionsResult</span><span class="params">(<span class="keyword">int</span> requestCode,</span></span></div><div class="line">        String permissions[], <span class="keyword">int</span>[] grantResults) &#123;</div><div class="line">    <span class="keyword">switch</span> (requestCode) &#123;</div><div class="line">        <span class="keyword">case</span> MY_PERMISSIONS_REQUEST_READ_CONTACTS: &#123;</div><div class="line">            <span class="comment">// If request is cancelled, the result arrays are empty.</span></div><div class="line">            <span class="keyword">if</span> (grantResults.length &gt; <span class="number">0</span></div><div class="line">                &amp;&amp; grantResults[<span class="number">0</span>] == PackageManager.PERMISSION_GRANTED) &#123;</div><div class="line"></div><div class="line">                <span class="comment">// permission was granted, yay! Do the</span></div><div class="line">                <span class="comment">// contacts-related task you need to do.</span></div><div class="line"></div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line"></div><div class="line">                <span class="comment">// permission denied, boo! Disable the</span></div><div class="line">                <span class="comment">// functionality that depends on this permission.</span></div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// other 'case' lines to check for other</span></div><div class="line">        <span class="comment">// permissions this app might request</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>注意：每次需要权限时，都需要显示请求调用，即使你已经获得的同权限组的其他权限。另外，权限分组处理的机制在将来的Android发型版本中有可能更改。因此你的App不应该依赖所需的权限在或者不在同一个权限组里。</p>
</blockquote>
<p>参考：</p>
<ul>
<li><a href="http://developer.android.com/training/permissions/requesting.html" target="_blank" rel="external">Requesting Permissions at Run Time</a></li>
<li><a href="http://developer.android.com/training/permissions/best-practices.html" target="_blank" rel="external">Permissions Best Practices</a></li>
</ul>
<p>##Swift Access Control - 潘君<br>(未完待续)</p>
<ul>
<li><p>三个级别</p>
<ul>
<li>Public</li>
<li>Internal</li>
<li><p>Private</p>
<p>大部分默认是internal</p>
</li>
</ul>
</li>
<li><p>可应用于</p>
<ul>
<li>Module<ul>
<li>application</li>
<li>framework</li>
</ul>
</li>
<li>source file<ul>
<li>properties</li>
<li>types</li>
<li>functions</li>
<li>and so on（苹果文档这个太二了）</li>
</ul>
</li>
</ul>
</li>
<li><p>准则</p>
<ul>
<li>public变量不能定义为internal或者private的类型</li>
<li>函数的访问权限不能高于参数和返回值</li>
</ul>
</li>
<li><p>应用场景</p>
<ul>
<li>Single-Target Apps    Internal</li>
<li>Frameworks  Public</li>
<li>Unit Test Targets      @testable<img src="./1446175520419.png" alt="Alt text"></li>
</ul>
</li>
</ul>
<ul>
<li><p>会级联影响 例如修饰了type 同时也会影响type的members</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SomePublicClass</span> </span>&#123;          <span class="comment">// explicitly public class</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">var</span> somePublicProperty = <span class="number">0</span>    <span class="comment">// explicitly public class member</span></div><div class="line">    <span class="keyword">var</span> someInternalProperty = <span class="number">0</span>         <span class="comment">// implicitly internal class member</span></div><div class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">somePrivateMethod</span><span class="params">()</span></span> &#123;&#125;  <span class="comment">// explicitly private class member</span></div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeInternalClass</span> </span>&#123;               <span class="comment">// implicitly internal class</span></div><div class="line">    <span class="keyword">var</span> someInternalProperty = <span class="number">0</span>         <span class="comment">// implicitly internal class member</span></div><div class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">somePrivateMethod</span><span class="params">()</span></span> &#123;&#125;  <span class="comment">// explicitly private class member</span></div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">SomePrivateClass</span> </span>&#123;        <span class="comment">// explicitly private class</span></div><div class="line">    <span class="keyword">var</span> somePrivateProperty = <span class="number">0</span>          <span class="comment">// implicitly private class member</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">somePrivateMethod</span><span class="params">()</span></span> &#123;&#125;          <span class="comment">// implicitly private class member</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>Function</p>
</li>
<li><p>Tuple</p>
<ul>
<li>取元素中访问level最小的为准</li>
<li>例如 （PrivateClass, InternalClass） 则取private</li>
</ul>
</li>
<li><p>Enumeration </p>
<ul>
<li>一样</li>
</ul>
</li>
<li><p>class</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">someMethod</span><span class="params">()</span></span> &#123;&#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">internal</span> <span class="class"><span class="keyword">class</span> <span class="title">B</span>: <span class="title">A</span> </span>&#123;</div><div class="line">    <span class="keyword">override</span> <span class="keyword">internal</span> <span class="function"><span class="keyword">func</span> <span class="title">someMethod</span><span class="params">()</span></span> &#123;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-周精益分享-英语" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/23/周精益分享-英语/" class="article-date">
      <time datetime="2015-10-23T10:30:00.000Z" itemprop="datePublished">2015-10-23</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/23/周精益分享-英语/">周精益分享 - 英语</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="参与开源提高英语读写-王胜"><a href="#参与开源提高英语读写-王胜" class="headerlink" title="参与开源提高英语读写 - 王胜"></a>参与开源提高英语读写 - 王胜</h2><h3 id="阅读能力"><a href="#阅读能力" class="headerlink" title="阅读能力"></a>阅读能力</h3><ul>
<li>泡开源论坛，查看讨论</li>
<li>阅读源代码包括注解、代码提交说明</li>
</ul>
<blockquote>
<p>前期泡论坛，看注解、提交说明时需耐下性子，借助翻译工具。时间长了，久而久之，词汇量就上升了。</p>
</blockquote>
<h3 id="书写能力"><a href="#书写能力" class="headerlink" title="书写能力"></a>书写能力</h3><ul>
<li>试图修复bug或者提交建议</li>
<li>尝试翻译开源软件的使用手册</li>
</ul>
<blockquote>
<p>经历了阅读阶段的词汇量的积累，可以再通过书写来巩固词汇量的运用。此阶段要拥有儿童学语言的勇气，不要担心自己写错，被其他参与开源的人看到笑话。</p>
</blockquote>
<h2 id="MOOC-上手-曾铭"><a href="#MOOC-上手-曾铭" class="headerlink" title="MOOC 上手 - 曾铭"></a>MOOC 上手 - 曾铭</h2><h3 id="Massive-Open-Online-Courses-大型开放式网络课程"><a href="#Massive-Open-Online-Courses-大型开放式网络课程" class="headerlink" title="Massive Open Online Courses 大型开放式网络课程"></a>Massive Open Online Courses 大型开放式网络课程</h3><ul>
<li>Coursera</li>
<li>Udacity</li>
<li>edX</li>
<li>中国大学MOOC</li>
</ul>
<h3 id="上手感受"><a href="#上手感受" class="headerlink" title="上手感受"></a>上手感受</h3><ul>
<li>视频教程 vs 正规课程</li>
<li>视频教程：目标不清晰、散漫不专注、孤单、没有回顾总结，易放弃（遗忘、注意力转移）</li>
<li>正规课程：目标清晰（结课证）、专注（每周测验）、作业互评、论坛讨论，易放弃（压力）</li>
<li>专业教育的未来（非基本教育）</li>
</ul>
<h3 id="建议"><a href="#建议" class="headerlink" title="建议"></a>建议</h3><ul>
<li>根据兴趣上手，不必贪多，先坚持完成 1 门课(4-6h/w 并不容易)</li>
<li>只对视频教程感兴趣？为网易公开课点个赞</li>
</ul>
<p>##dispatch_sync的坑 - 潘君</p>
<ul>
<li><p>官方文档</p>
<figure class="highlight vhdl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">dispatch_sync</div><div class="line">Submits a <span class="keyword">block</span> object <span class="keyword">for</span> execution <span class="keyword">on</span> a dispatch queue <span class="keyword">and</span> waits <span class="keyword">until</span> that <span class="keyword">block</span> completes.</div><div class="line"></div><div class="line">。。。。。</div><div class="line"></div><div class="line">As an optimization, this <span class="keyword">function</span> invokes the <span class="keyword">block</span> <span class="keyword">on</span> the current thread <span class="keyword">when</span> possible.</div></pre></td></tr></table></figure>
</li>
<li><p>dispatch_sync 卡页面, 原因见官方说明最后一句，优化搞的鬼</p>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">写 <span class="comment">(删除操作)</span> dispatch_sy<span class="symbol">nc</span></div></pre></td></tr></table></figure>
</li>
<li><p>队列分为两种，一种是Serial Dispatch Queue，还有一种是Concurrent Dispatch Queue。</p>
</li>
<li><p>xun核心模块决定线程数</p>
</li>
</ul>
<p>参考资料：</p>
<ul>
<li><a href="http://zhangbuhuai.com/2015/04/11/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3dispatch_sync/" target="_blank" rel="external">深入理解dispatch_sync</a></li>
<li><a href="http://stackoverflow.com/questions/13972048/dispatch-sync-always-scheduling-a-block-on-main-thread" target="_blank" rel="external">dispatch_sync always scheduling a block on Main Thread</a></li>
</ul>
<h1 id="英语，程序员"><a href="#英语，程序员" class="headerlink" title="英语，程序员"></a>英语，程序员</h1><h3 id="网站"><a href="#网站" class="headerlink" title="网站"></a>网站</h3><ul>
<li><p><a href="http://www.italki.com" target="_blank" rel="external">iTalki</a></p>
<blockquote>
<p>语言交换及专业老师订课辅导的网站</p>
</blockquote>
</li>
<li><p><a href="https://www.youtube.com/channel/UCwA7Aepp7nRUJNa8roQ-6Bw" target="_blank" rel="external">YouTube一个订阅号</a></p>
<blockquote>
<p>比较有吸引力的老师，他的同事频道也很不错</p>
</blockquote>
</li>
<li><p><a href="http://www.raywenderlich.com/" target="_blank" rel="external">rayWenderlich</a></p>
<blockquote>
<p>主要是iOS方面的，安卓覆盖一些。涵盖文字、视频、播客三方面</p>
</blockquote>
</li>
</ul>
<h3 id="APP"><a href="#APP" class="headerlink" title="APP"></a>APP</h3><ul>
<li><p>飞鱼口语</p>
<blockquote>
<p>国内开发的一个及时练习口语的APP，主要是方便</p>
</blockquote>
</li>
<li><p>每日英语听力（欧陆词典推出的）</p>
<blockquote>
<p>radio 模块很不错，资源不算多但比较有质量。</p>
</blockquote>
</li>
<li><p>Podcast</p>
<ul>
<li>圆桌会议（RoundTable）</li>
<li>rayWenderlich （程序员职业发展及新技术点探讨，英式口语）</li>
</ul>
</li>
</ul>
<h3 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h3><ul>
<li>Skype 和志同道合的人交流，练习口语 </li>
</ul>
<h3 id="EF-Education"><a href="#EF-Education" class="headerlink" title="EF Education"></a>EF Education</h3><ul>
<li><a href="http://ec.ef.com" target="_blank" rel="external">网站地址</a><blockquote>
<p>想小试牛刀的记得想我拿一下账号密码</p>
</blockquote>
</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-2015-10-16-谈谈未来，职业规划，梦想" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/16/2015-10-16-谈谈未来，职业规划，梦想/" class="article-date">
      <time datetime="2015-10-16T10:30:00.000Z" itemprop="datePublished">2015-10-16</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/16/2015-10-16-谈谈未来，职业规划，梦想/">周精益分享-谈谈未来、梦想、职业规划</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="实现时间自由-王胜"><a href="#实现时间自由-王胜" class="headerlink" title="实现时间自由 - 王胜"></a>实现时间自由 - 王胜</h2><ul>
<li>近期技术打工、为公司技术出一份力</li>
<li>伺机合伙创业<ul>
<li>自己作为技术的Partner</li>
<li>需求靠谱的产品经理合伙创业</li>
<li>如果有靠谱的市场/资方人事的合伙人就更完美了</li>
</ul>
</li>
<li>财富自由和时间自由后<ul>
<li>周游开拓视野</li>
<li>做一些自己感兴趣的东西，不求有市场，只求自己感觉有价值，好玩就行</li>
</ul>
</li>
</ul>
<h2 id="品质生活-吴明"><a href="#品质生活-吴明" class="headerlink" title="品质生活 - 吴明"></a>品质生活 - 吴明</h2><ul>
<li>短期目标<ul>
<li>学习和开发使用Material Design</li>
</ul>
</li>
<li>长期目标：以下目标之一<ul>
<li>技术专家</li>
<li>管理和技术</li>
<li>换行业</li>
</ul>
</li>
<li>第二职业<ul>
<li>除工作之外培养第二职业</li>
<li>第二职业主要兴趣爱好方向</li>
<li>不求工资和市场价值高低，只追求兴趣快乐</li>
</ul>
</li>
</ul>
<h2 id="兴趣主导，快乐很重要-杨志平"><a href="#兴趣主导，快乐很重要-杨志平" class="headerlink" title="兴趣主导，快乐很重要 - 杨志平"></a>兴趣主导，快乐很重要 - 杨志平</h2><ul>
<li><p>兴趣</p>
<ul>
<li>在失去当前工作兴趣之前，不会转行</li>
<li>职业规划随兴趣走</li>
</ul>
</li>
<li><p>肉身翻墙</p>
<ul>
<li>出去走一遭，趁年轻（工作或打工旅行）</li>
<li>去牛逼公司镀金</li>
</ul>
</li>
<li><p>终极目标</p>
<ul>
<li>年轻时，向往自由工作者的工作方式，能够养活自己的游行工作方式</li>
<li>适当年纪收心回归平常心（保持感兴趣的工作即可）</li>
</ul>
</li>
</ul>
<h2 id="一步一个脚印，顺其自然-王进"><a href="#一步一个脚印，顺其自然-王进" class="headerlink" title="一步一个脚印，顺其自然-王进"></a>一步一个脚印，顺其自然-王进</h2><ul>
<li><p>近期目标，一步一个脚印，不断提高自己</p>
<ul>
<li>做好现在工作，打下坚实的基础</li>
<li>专注于技术，近期不考虑创业，转行等</li>
<li>顺其自然，当未来出现创业等机会，自己也准备好了，也不错过</li>
</ul>
</li>
<li><p>未来愿景：</p>
<ul>
<li>看好移动端的未来发展，以会后向智能家居，物联网方向发展</li>
<li>最终希望能在未来能有时间与机会出去走走</li>
</ul>
</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-周精益分享-设计规范交流 " class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/09/25/周精益分享-设计规范交流 /" class="article-date">
      <time datetime="2015-09-25T10:30:00.000Z" itemprop="datePublished">2015-09-25</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/25/周精益分享-设计规范交流 /">周精益分享-设计规范交流</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>#Label的一些使用规范 - 杨志平</p>
<p>##动态适应字体大小</p>
<blockquote>
<p>iOS系统自带的常见字体样式（字号及粗细等等）</p>
<ul>
<li>UIFontTextStyleHeadline</li>
<li>UIFontTextStyleSubheadline</li>
<li>UIFontTextStyleBody</li>
<li>UIFontTextStyleFootnote</li>
<li>UIFontTextStyleCaption1</li>
<li>UIFontTextStyleCaption2</li>
</ul>
</blockquote>
<p>###效果如下：</p>
<p><img src="http://useyourloaf.com/assets/images/2013/2013-12-16-002.png" alt="Font"></p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 字体初始化</span></div><div class="line"><span class="built_in">UIFont</span> *font = [<span class="built_in">UIFont</span> preferredFontForTextStyle:<span class="built_in">UIFontTextStyleBody</span>];</div><div class="line"></div><div class="line"><span class="comment">// 通知需要刷新的文本字体</span></div><div class="line">    [[<span class="built_in">NSNotificationCenter</span> defaultCenter]addObserver:<span class="keyword">self</span></div><div class="line">                                           selector:<span class="keyword">@selector</span>(userTextSizeDidChange)</div><div class="line">                                               name:<span class="built_in">UIContentSizeCategoryDidChangeNotification</span></div><div class="line">                                             object:<span class="literal">nil</span>];</div></pre></td></tr></table></figure>
<h1 id="国际化支持（适配注意点）"><a href="#国际化支持（适配注意点）" class="headerlink" title="国际化支持（适配注意点）"></a>国际化支持（适配注意点）</h1><p>####工具：<a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/genstrings.1.html" target="_blank" rel="external">genstrings</a></p>
<p>####参考：<a href="http://objccn.io/issue-9-3/" target="_blank" rel="external">博客链接</a></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">先看看它的宏定义：</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> NSLocalizedString(key, comment) </span></div><div class="line">[[NSBundle mainBundle] localizedStringForKey:(key) <span class="keyword">value</span>:<span class="string">@""</span> table:nil]</div></pre></td></tr></table></figure>
<p><strong>本地化对象：</strong>标签和按钮上的文本，或者在运行时获取的字符串和数据动态生成的字符串。</p>
<h3 id="难点"><a href="#难点" class="headerlink" title="难点"></a>难点</h3><h4 id="不同语言的语法问题"><a href="#不同语言的语法问题" class="headerlink" title="不同语言的语法问题"></a>不同语言的语法问题</h4><blockquote>
<p>语序，人称不一致：<br>「Paul invited you」和「You invited Paul」 -&gt; 「%@ invited %@」，看似可以<br>以德语为例，「Paul invited you」译为「Paul hat dich eingeladen」，<br>而「You invited Paul」则译为「Du hast Paul eingeladen」。<br>正确处理其他语言的特殊语法方案:「%@ invited you」和「You invited %@」。</p>
</blockquote>
<h4 id="一词多意"><a href="#一词多意" class="headerlink" title="一词多意"></a>一词多意</h4><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">run</span><span class="bash"> -&gt; </span></div><div class="line">	 vt. &amp; vi. 跑</div><div class="line">	 移动</div><div class="line">	 (使)流动</div><div class="line">	 n. 跑, 奔跑</div><div class="line">	 旅行, 旅程</div><div class="line">	 行驶路线</div><div class="line">	 时期; 一段时间</div></pre></td></tr></table></figure>
<p>正确做法：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">NSLocalizedString</span><span class="params">(@<span class="string">"activity-profile.title.the-run"</span>, nil)</span></span>  </div><div class="line"><span class="function"><span class="title">NSLocalizedString</span><span class="params">(@<span class="string">"home.button.start-run"</span>, nil)</span></span></div></pre></td></tr></table></figure>
<p>或者：(完全没有试过)</p>
<blockquote>
<p>NSLocalizedString 有一些变体能够提供更多字符串本地化的操作方式。NSLocalizedStringFromTable 接收 key、table 和 comment 这三个参数，其中 table 参数表示该字符串对应的一个表格，genstrings 会为表中的每一个条目生成一个以条目名称（假设为 table-item）命名的独立字符串文件 table-item.strings。<br>这样你就可以把字符串文件分割成几个小一些的文件。在一个庞大的项目或者团队中工作时，这一点显得尤为重要。同时这也让合并原有的和重新生成的字符串文件变得容易一些。</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">NSLocalizedStringFromTable</span>(@"<span class="keyword">home</span>.<span class="keyword">button</span>.<span class="keyword">start</span>-<span class="keyword">run</span>", @<span class="string">"ActivityTracker"</span>, @<span class="string">"some comment.."</span>)</div></pre></td></tr></table></figure>
<p>###调试本地化字符串（拓展）<br>应用支持的语言版本越多，确保所有元素都正确显示就越难。但是这里有一些默认的用户选项和工具可以减轻你的负担。</p>
<blockquote>
<p>NSDoubleLocalizedStrings<br>AppleTextDirection<br>NSForceRightToLeftWritingDirection<br>选项保证你的布局不会因为长字符串或者从右往左读的语言而混乱。</p>
<p>NSShowNonLocalizedStrings<br>NSShowNonLocalizableStrings<br>则可以帮助你找到没有翻译的字符串和根本没有制定字符串本地化宏的字符串。</p>
</blockquote>
<h2 id="单位和度量-吴明"><a href="#单位和度量-吴明" class="headerlink" title="单位和度量 -吴明"></a>单位和度量 -吴明</h2><p>####Android基本单位规范  -吴明</p>
<p>#####单位和度量</p>
<ul>
<li>像素密度<ul>
<li>每英寸的像素数被称为“像素密度”。</li>
<li>DPI =屏幕宽度（或高度）像素/屏幕宽度（或高度）英寸</li>
<li>mdpi-160dpi,<br>hdpi-480x800-240dpi,<br>xhdpi-720x1280-320dpi,<br>xxhdpi-1080x1920-480dpi</li>
<li>mipmap-hdpi,<br>  drawable-hdpi区别:用mipmap会缩放图片并优化性能。</li>
<li><img src="http://www.2cto.com/uploadfile/Collfiles/20150718/2015071808335256.png" alt="MacDown Screenshot"></li>
</ul>
</li>
<li>密度独立像素<ul>
<li>“密度独立”是指在屏幕上用不同的密度来统一的显示用户界面元素</li>
<li><img src="http://wiki.jikexueyuan.com/project/material-design/images/4_5.png" alt="MacDown Screenshot"></li>
<li>1dp 和 160 dpi 屏幕的一个物理像素相等。计算 dp 的方法：<br><code><em>dp =(宽度像素</em>160)/ dpi**</code></li>
</ul>
</li>
<li><p>可扩展像素（sp）</p>
<ul>
<li>在为安卓系统开发程序时，可扩展的像素（SP）提供和DP一样的功能，但只是在字体上。一个 SP 的默认值和 DP 上的默认值一样。</li>
<li>density==scaledDensity,即1sp=1dp，</li>
<li><p>还是采用dp替代sp,<a href="http://www.oschina.net/question/272860_70761" target="_blank" rel="external">为什么</a></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">float</span> <span class="title">applyDimension</span>(<span class="params"><span class="keyword">int</span> unit, <span class="keyword">float</span> <span class="keyword">value</span>,DisplayMetrics metrics</span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">switch</span> (unit) &#123;</div><div class="line">    <span class="keyword">case</span> COMPLEX_UNIT_PX:</div><div class="line">        <span class="keyword">return</span> <span class="keyword">value</span>;</div><div class="line">    <span class="keyword">case</span> COMPLEX_UNIT_DIP:</div><div class="line">        <span class="keyword">return</span> <span class="keyword">value</span> * metrics.density;</div><div class="line">    <span class="keyword">case</span> COMPLEX_UNIT_SP:</div><div class="line">        <span class="keyword">return</span> <span class="keyword">value</span> * metrics.scaledDensity;</div><div class="line">    <span class="keyword">case</span> COMPLEX_UNIT_PT:</div><div class="line">        <span class="keyword">return</span> <span class="keyword">value</span> * metrics.xdpi * (<span class="number">1.0</span>f/<span class="number">72</span>);</div><div class="line">    <span class="keyword">case</span> COMPLEX_UNIT_IN:</div><div class="line">        <span class="keyword">return</span> <span class="keyword">value</span> * metrics.xdpi;</div><div class="line">    <span class="keyword">case</span> COMPLEX_UNIT_MM:</div><div class="line">        <span class="keyword">return</span> <span class="keyword">value</span> * metrics.xdpi * (<span class="number">1.0</span>f/<span class="number">25.4</span>f);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>pt(磅)，标准的长度单位，1pt＝1/72英寸，用于印刷业,买蛋糕的时候挺说最多</p>
</li>
<li>em,em指字体高,1em=16px,任意浏览器的默认字体高都是16px.</li>
</ul>
<h5 id="字体排版"><a href="#字体排版" class="headerlink" title="字体排版"></a>字体排版</h5><ul>
<li>字体排版的缩放和基本样式<ul>
<li>同时使用过多的字体尺寸和样式可以很轻易的毁掉布局,最基本的样式集合就是基于 12、14、16、20 和 34 号的字体排版缩放,以下Google建议字体尺寸:<br><img src="http://7xn0ue.com1.z0.glb.clouddn.com/style_typography_style1.png" alt="MacDown Screenshot"></li>
</ul>
</li>
<li>基本色/色彩对比度<ul>
<li>最基本的常识是，相同颜色的背景和文字是很难阅读的。但有些人不知道的是，带有过强对比度的文本会有些炫目，同样难以阅读。</li>
<li>文本应当满足对比度7:1的是最适合阅读,最低的对比度4.5:1(依据明度计算),</li>
<li>Google对比度建议:<img src="http://wiki.jikexueyuan.com/project/material-design/images/style-typography-16_large_mdpi.png" alt="MacDown Screenshot"></li>
</ul>
</li>
<li>行高<ul>
<li>只有“主体”、“次要标题”、“大纲”等类似的样式中才允许使用自动换行。其它所有样式应当以单行形式出现。</li>
<li><img src="http://7xn0ue.com1.z0.glb.clouddn.com/style_typography_lineheight_tall1.png" alt="MacDown Screenshot"></li>
<li>For all styles, line height is 0.1em larger than the English-like languages. English and English-like languages mostly use a portion of the em box, often the lower portion below the x-height. Chinese, Japanese, and Korean (CJK) ideographic characters use the entire em box. Characters in tall languages often have long descenders and/or ascenders. To achieve the same design intention as English for CJK and to avoid potential text clipping between two lines next to each other for tall languages, the line height needs to be larger than in English for tall and dense languages.</li>
</ul>
</li>
<li>换行规则/连字符<ul>
<li>正确：<br><img src="http://wiki.jikexueyuan.com/project/material-design/images/style-typography-32_large_mdpi.png" alt="MacDown Screenshot"></li>
<li>错误<br><img src="http://wiki.jikexueyuan.com/project/material-design/images/style-typography-33_large_mdpi.png" alt="MacDown Screenshot"></li>
</ul>
</li>
<li><p>每行字符</p>
<ul>
<li><a href="http://baymard.com/blog/line-length-readability" target="_blank" rel="external">每行应当保持在50-60个字符左右</a></li>
<li>太长,用户的眼睛将难以找到在文本上对焦。这是因为过长的文字导致用户难以判断一行的起始点，甚至在大段文字中出现读错行的现象</li>
<li>太短，会导致眼睛来回扫视过于频繁，破坏阅读的节奏。过短的内容还会给人压力，导致用户完成本行阅读前过早跳转到下一行阅读(因此会错过潜在的重要信息)</li>
<li><p><img src="http://7xn0ue.com1.z0.glb.clouddn.com/style_typography_styles_linelengths1.png" alt="MacDown Screenshot"></p>
<ul>
<li><img src="http://7xn0ue.com1.z0.glb.clouddn.com/style_typography_styles_linelengths2.png" alt="MacDown Screenshot"></li>
</ul>
</li>
</ul>
</li>
<li>字间距<ul>
<li><img src="http://7xn0ue.com1.z0.glb.clouddn.com/style_typography_styles_tracking.png" alt="MacDown Screenshot"></li>
<li></li>
</ul>
</li>
</ul>
<h2 id="设计规范之我见-张超耀"><a href="#设计规范之我见-张超耀" class="headerlink" title="设计规范之我见 - 张超耀"></a>设计规范之我见 - 张超耀</h2><h2 id="设计规范阅读心得-潘君"><a href="#设计规范阅读心得-潘君" class="headerlink" title="设计规范阅读心得 - 潘君"></a>设计规范阅读心得 - 潘君</h2><p>###官方设计文档<br>参考资料：<a href="http://isux.tencent.com/ios8-human-interface-guidelines.html" target="_blank" rel="external">[ISUX转译]iOS 8人机界面指南（一）：UI设计基础</a></p>
<ul>
<li>突出内容</li>
<li>统一</li>
<li>为变化做好准备<ul>
<li>压缩 </li>
<li>拉伸</li>
</ul>
</li>
<li>充足的互动空间</li>
<li>路径合理</li>
<li>注意层级</li>
<li>使用标准的手势</li>
<li>页面切换过渡需要有焦点</li>
<li>反馈要准确</li>
</ul>
<p>###案例<br>参考资料：<a href="http://beforweb.com/node/766" target="_blank" rel="external">向用户征询iOS授权的五种常见设计模式</a></p>
<h2 id="设计规范之奇妙的Z轴-王进"><a href="#设计规范之奇妙的Z轴-王进" class="headerlink" title="设计规范之奇妙的Z轴- 王进"></a>设计规范之奇妙的Z轴- 王进</h2><p>###Z轴组成：</p>
<blockquote>
<p>z=elevation+translationZ;</p>
</blockquote>
<ul>
<li>eleavation是静态的成员，静止高度，是不会变化的。当一个对象的高度产生变化时，它将会尽快恢复到自身的静止高度。</li>
</ul>
<p>translationZ是用来做动画。动态高度偏移</p>
<ul>
<li>在layout中使用 android:elevation属性去定义 </li>
</ul>
<p>在代码中使用 View.setElevation 方法去定义 </p>
<ul>
<li><p>在layout中使用 android:translationz属性去定义设置视图的translation，可以使用View.setTranslationZ方法 </p>
</li>
<li><p>新的属性值：translationZ允许你创建一个动画暂时的反应出View的高度值（elevation）变化。</p>
</li>
</ul>
<p>这对于响应触摸手势很有用处:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">int</span> action = motionEvent.getActionMasked();  </div><div class="line"></div><div class="line">                <span class="comment">/* Raise view on ACTION_DOWN and lower it on ACTION_UP. */</span>  </div><div class="line"></div><div class="line">                <span class="keyword">switch</span> (action) &#123;  </div><div class="line"></div><div class="line">                    <span class="keyword">case</span> MotionEvent.<span class="string">ACTION_DOWN:</span>  </div><div class="line"></div><div class="line">                        Log.d(TAG, <span class="string">"ACTION_DOWN on view."</span>);  </div><div class="line"></div><div class="line">                        view.setTranslationZ(<span class="number">120</span>);  </div><div class="line"></div><div class="line">                        <span class="keyword">break</span>;  </div><div class="line"></div><div class="line">                    <span class="keyword">case</span> MotionEvent.<span class="string">ACTION_UP:</span>  </div><div class="line"></div><div class="line">                        Log.d(TAG, <span class="string">"ACTION_UP on view."</span>);  </div><div class="line"></div><div class="line">                        view.setTranslationZ(<span class="number">0</span>);  </div><div class="line"></div><div class="line">                        <span class="keyword">break</span>;  </div><div class="line"><span class="symbol"></span></div><div class="line">                    default:  </div><div class="line"></div><div class="line">                        <span class="keyword">return</span> <span class="literal">false</span>;  </div><div class="line"></div><div class="line">                &#125;</div></pre></td></tr></table></figure>
<p>###系统高度参考</p>
<p><img src="http://wiki.jikexueyuan.com/project/material-design/images/3_2.png" alt=""></p>
<p>###高度特性：</p>
<ul>
<li><p>“高度”的度量单位与 XY 轴的度量单位相同，主要是 DP。由于所有 Material 元素都具有 1 单位 DP 的厚度，所以“高度”度量的是从一个平面顶部到另一个平面顶部的距离。</p>
</li>
<li><p>一个子对象的高度与其父对象的高度相关</p>
</li>
</ul>
<p>###阴影</p>
<p>“阴影”提供了对象深度和方向性移动的重要视觉线索。它们是唯一一种标示不同平面之间分离程度的视觉线索。某一对象的“高度”决定了其具体“阴影”的表现形式。</p>
<ul>
<li>Z 轴影响阴影效果</li>
</ul>
<p>z轴越大，阴影越明显，</p>
<ul>
<li>Z轴影响View 的绘制顺序：</li>
</ul>
<p>在同一个父view内部，z轴越小，绘制越早，z轴后绘制的会覆盖先前绘制的，只有Z轴相同，才按照添加循序绘制</p>
<ul>
<li><p>Z轴属性会扩大view的显示区域，如果他的大小≥父控件大小，他的阴影效果就无法显示</p>
</li>
<li></li>
</ul>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&lt;TextView</div><div class="line"></div><div class="line">          android:layout_marginTop=<span class="string">"20dp"</span></div><div class="line"></div><div class="line">          android:layout_marginBottom=<span class="string">"20dp"</span></div><div class="line"></div><div class="line">          android:gravity=<span class="string">"center"</span></div><div class="line"></div><div class="line">          android:<span class="built_in">text</span>=<span class="string">"2dp"</span></div><div class="line"></div><div class="line">          android:textColor=<span class="string">"#88000000"</span></div><div class="line"></div><div class="line">          android:layout_width=<span class="string">"150dp"</span></div><div class="line"></div><div class="line">          android:layout_height=<span class="string">"100dp"</span></div><div class="line"></div><div class="line">          android:elevation=<span class="string">"2dp"</span></div><div class="line"></div><div class="line">          android:<span class="built_in">background</span>=<span class="string">"#ffffff"</span>/&gt;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">  &lt;TextView</div><div class="line"></div><div class="line">          android:layout_marginTop=<span class="string">"20dp"</span></div><div class="line"></div><div class="line">          android:layout_marginBottom=<span class="string">"20dp"</span></div><div class="line"></div><div class="line">          android:layout_marginLeft=<span class="string">"20dp"</span></div><div class="line"></div><div class="line">          android:gravity=<span class="string">"center"</span></div><div class="line"></div><div class="line">          android:<span class="built_in">text</span>=<span class="string">"4dp"</span></div><div class="line"></div><div class="line">          android:textColor=<span class="string">"#88000000"</span></div><div class="line"></div><div class="line">          android:layout_width=<span class="string">"150dp"</span></div><div class="line"></div><div class="line">          android:layout_height=<span class="string">"100dp"</span></div><div class="line"></div><div class="line">          android:elevation=<span class="string">"4dp"</span></div><div class="line"></div><div class="line">          android:<span class="built_in">background</span>=<span class="string">"#ffffff"</span>/&gt;</div></pre></td></tr></table></figure>
<ul>
<li><p>使用直接使用图片（除非shape)，设置z轴，阴影效果不会显示，必须通过代码viewOutlineProvider指明轮廓</p>
<ul>
<li>在layout中使用android：outlineProvider属性</li>
</ul>
<blockquote>
<p>none 即使设置里z轴也不会显示阴影</p>
</blockquote>
<p>background 按照background 设置背景</p>
<p>bounds  按照view 大小设置背景</p>
<p>paddedbounds 与bounds 类似，不过背景向右偏些</p>
</li>
</ul>
<ul>
<li>代码设置</li>
</ul>
<figure class="highlight pony"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="type">ViewOutlineProvider</span> viewOutlineProvider = <span class="function"><span class="keyword">new</span> <span class="title">ViewOutlineProvider</span>() &#123;  </span></div><div class="line"></div><div class="line">    @<span class="title">Override</span>  </div><div class="line"></div><div class="line">    <span class="title">public</span> <span class="title">void</span> <span class="title">getOutline</span>(<span class="type">View</span> view, <span class="type">Outline</span> outline)  </div><div class="line"></div><div class="line">        <span class="comment">//可以指定圆形，矩形，圆角矩形，path</span></div><div class="line"></div><div class="line">        <span class="title">outline</span>.<span class="title">setOval</span>(<span class="number">0</span>, <span class="number">0</span>, view.getWidth(), <span class="title">view</span>.<span class="title">getHeight</span>());  </div><div class="line"></div><div class="line">    &#125;  </div><div class="line"></div><div class="line">&#125;;  </div><div class="line"></div><div class="line"><span class="title">fab</span>.<span class="title">setOutlineProvider</span>(viewOutlineProvider);?</div></pre></td></tr></table></figure>
<h3 id="两层阴影"><a href="#两层阴影" class="headerlink" title="两层阴影"></a>两层阴影</h3><p><img src="https://pic2.zhimg.com/65fe5d60a56fd38f968fd2d1e991a889_b.jpg" alt=""></p>
<p><img src="https://pic2.zhimg.com/e2c6e088fd8ea8fc3e5ccdfb2e4e3199_b.jpg" alt=""></p>
<ul>
<li><p>这两层阴影, 一层是环境光投射的阴影, 另一层是关键光照射在 material 上投射的阴影.这两种光线叠加在一起, 才能构成 material design 中的阴影.</p>
</li>
<li><p>而理论上, 这两种阴影都应该是有平滑曲线的, 但是由于手机处理器性能问题, 实时计算平滑后的阴影会导致可怕的耗电与发热, 所以 Google 只能在这方面妥协, 将阴影曲线拉直, 直接导致某些阴影效果变差.通过叠加可以模拟真实的曲线阴影。</p>
</li>
</ul>
<p><img src="https://pic2.zhimg.com/12b97051d79c5f018461d7954594308d_b.jpg" alt=""></p>
<p>链接：<a href="http://www.zhihu.com/question/28865209/answer/42749018" target="_blank" rel="external">http://www.zhihu.com/question/28865209/answer/42749018</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-周精益分享-自由主题 " class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/09/19/周精益分享-自由主题 /" class="article-date">
      <time datetime="2015-09-18T18:00:00.000Z" itemprop="datePublished">2015-09-18</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/19/周精益分享-自由主题 /">周精益分享-自由主题</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="51offer-api-项目上手总结-曾铭"><a href="#51offer-api-项目上手总结-曾铭" class="headerlink" title="51offer-api 项目上手总结 - 曾铭"></a>51offer-api 项目上手总结 - 曾铭</h2><h3 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h3><ul>
<li>目录</li>
<li>filter</li>
<li>controller</li>
<li>service interface&amp;implement 注意区分接口与对应实现</li>
<li>dao interface&amp;implement  data access object</li>
</ul>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="code">-------------------------------------</span></div><div class="line">HTTP</div><div class="line">-------------------------------------</div><div class="line"><span class="section">Filter1</span></div><div class="line">-------------------------------------</div><div class="line"><span class="section">Filter2</span></div><div class="line">-------------------------------------</div><div class="line"><span class="section">Controller | UserController | PickController</span></div><div class="line">-------------------------------------</div><div class="line"></div><div class="line"><span class="code">-------------------------------------</span></div><div class="line">Service | UserService | XXService |</div><div class="line">-------------------------------------</div><div class="line"><span class="section">DAO</span></div><div class="line">-------------------------------------</div></pre></td></tr></table></figure>
<h3 id="maven"><a href="#maven" class="headerlink" title="maven"></a>maven</h3><ul>
<li>cocoapods + xctool</li>
<li>同 gradle</li>
</ul>
<h3 id="spring"><a href="#spring" class="headerlink" title="spring"></a>spring</h3><ul>
<li>IOC，DI</li>
<li>版本区分 service 现有方式及问题</li>
</ul>
<h3 id="svn"><a href="#svn" class="headerlink" title="svn"></a>svn</h3><ul>
<li>难用的 branch，基于 copy，新路径</li>
<li>merge，注意主从，merge from server</li>
</ul>
<h2 id="Better遭遇白帽子袭击-王胜"><a href="#Better遭遇白帽子袭击-王胜" class="headerlink" title="Better遭遇白帽子袭击 - 王胜"></a>Better遭遇白帽子袭击 - 王胜</h2><blockquote>
<p><a href="http://www.wooyun.org/bugs/wooyun-2010-0139504" target="_blank" rel="external">乌云链接</a></p>
</blockquote>
<h3 id="被狙击的点"><a href="#被狙击的点" class="headerlink" title="被狙击的点"></a>被狙击的点</h3><ul>
<li>短信验证码校验</li>
<li>敏感信息泄露</li>
<li>越权操作</li>
</ul>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ul>
<li>不能太依赖移动端进行拦截，API必需做后端拦截</li>
<li>API协议制定后，应该严格执行，无需的字段不要返回，敏感的字段处理后再返回</li>
<li>API对于入参要进行严格的协议校验和业务合法性校验</li>
<li>移动安全应该提上日程了</li>
</ul>
<h2 id="Dubbo与Zookeeper、SpringMVC整合和使用（负载均衡、容错）-陈奎"><a href="#Dubbo与Zookeeper、SpringMVC整合和使用（负载均衡、容错）-陈奎" class="headerlink" title="Dubbo与Zookeeper、SpringMVC整合和使用（负载均衡、容错） - 陈奎"></a>Dubbo与Zookeeper、SpringMVC整合和使用（负载均衡、容错） - 陈奎</h2><ul>
<li>第一：介绍Dubbo背景</li>
<li>第二：Dubbo的简介</li>
<li>第三：Dubbo与Zookeeper、SpringMVC整合使用</li>
</ul>
<h2 id="Sonar-的搭建小结-杨俊构"><a href="#Sonar-的搭建小结-杨俊构" class="headerlink" title="Sonar 的搭建小结 - 杨俊构"></a>Sonar 的搭建小结 - 杨俊构</h2><h3 id="Sonar-的搭建"><a href="#Sonar-的搭建" class="headerlink" title="Sonar 的搭建"></a>Sonar 的搭建</h3><ul>
<li>Ubuntu 虚拟机</li>
<li>Sonar 配置</li>
</ul>
<h3 id="sonar-runner-与Gradle配置"><a href="#sonar-runner-与Gradle配置" class="headerlink" title="sonar-runner 与Gradle配置"></a>sonar-runner 与Gradle配置</h3>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-周精益分享-自由主题" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/09/14/周精益分享-自由主题/" class="article-date">
      <time datetime="2015-09-14T12:00:00.000Z" itemprop="datePublished">2015-09-14</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/14/周精益分享-自由主题/">周精益分享-自由主题</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="浅拷贝与深拷贝-杨志平"><a href="#浅拷贝与深拷贝-杨志平" class="headerlink" title="浅拷贝与深拷贝 - 杨志平"></a>浅拷贝与深拷贝 - 杨志平</h2><blockquote>
<p> 程序中经常会遇到集合类的传值 <br><br> <strong> 坑：</strong> 数组操作时对于数组中的对象拷贝</p>
</blockquote>
<p>###目的：<br>观察array1、mArrayCopy、mArrayCopy2 三者区别</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSArray</span> *array1 = [<span class="built_in">NSArray</span> arrayWithObjects:[<span class="built_in">NSMutableString</span> stringWithString:<span class="string">@"a"</span>],<span class="string">@"b"</span>,<span class="string">@"c"</span>,<span class="literal">nil</span>];</div><div class="line"><span class="built_in">NSArray</span> *mArrayCopy = [[<span class="built_in">NSArray</span> alloc] initWithArray:array1 copyItems:<span class="literal">YES</span>];</div><div class="line"><span class="built_in">NSArray</span>* mArrayCopy2 = [<span class="built_in">NSKeyedUnarchiver</span> unarchiveObjectWithData:[<span class="built_in">NSKeyedArchiver</span> archivedDataWithRootObject: array1]];</div></pre></td></tr></table></figure>
<h3 id="首先了解copy与retain的区别"><a href="#首先了解copy与retain的区别" class="headerlink" title="首先了解copy与retain的区别"></a>首先了解copy与retain的区别</h3><p><strong> OC对象引用计数器：屋里开灯规则 </strong></p>
<blockquote>
<p>copy是创建一个新对象，retain是创建一个指针，引用对象计数加1。Copy属性表示两个对象内容相同，新的对象retain为1 ，与旧有对象的引用计数无关，旧有对象没有变化。</p>
<p>retain属性表示两个对象地址相同（建立一个指针，指针拷贝），内容当然相同，这个对象的retain值+1也就是说，retain 是指针拷贝，copy 是内容拷贝。</p>
</blockquote>
<h3 id="主角：copy、mutableCopy"><a href="#主角：copy、mutableCopy" class="headerlink" title="主角：copy、mutableCopy"></a>主角：copy、mutableCopy</h3><p><strong><em>注意：可变和不可变对象使用copy、mutableCopy的区别</em></strong></p>
<blockquote>
<p>遵守NSCopying 协议的类可以发送copy消息，<br>遵守NSMutableCopying 协议的类才可以发送mutableCopy消息。</p>
<p>默认的ios类并没有遵守这两个协议<br>自定义copy 必须遵守NSCopying,并且实现 copyWithZone: 方法<br>自定义mutableCopy 那么就必须遵守NSMutableCopying,并且实现 mutableCopyWithZone: 方法</p>
</blockquote>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><h5 id="系统的非容器类对象"><a href="#系统的非容器类对象" class="headerlink" title="系统的非容器类对象"></a>系统的非容器类对象</h5><blockquote>
<p>这里指的是NSString,NSNumber等等一类的对象。</p>
</blockquote>
<p>示例1：<br>不可变string</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSString</span> *string = <span class="string">@"origionStr"</span>;</div><div class="line"><span class="built_in">NSString</span> *string2 = string;</div><div class="line"><span class="built_in">NSString</span> *stringCopy = [string <span class="keyword">copy</span>];</div><div class="line"><span class="built_in">NSMutableString</span> *stringMCopy = [string mutableCopy];</div><div class="line">[stringMCopy appendString:<span class="string">@"!!!!"</span>];</div><div class="line"><span class="comment">// log</span></div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"string      = %p %p %@ "</span>,string,&amp;string,string);</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"string2     = %p %p %@ "</span>,string2,&amp;string2,string2);</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"stringCopy  = %p %p %@ "</span>,stringCopy,&amp;stringCopy,stringCopy);</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"stringMCopy = %p %p %@ "</span>,stringMCopy,&amp;stringMCopy,stringMCopy);</div></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="type">string</span>      = <span class="number">0x1064e7088</span>		<span class="number">0x7fff597190a0</span> origionStr </div><div class="line">string2     = <span class="number">0x1064e7088</span> 		<span class="number">0x7fff59719098</span> origionStr </div><div class="line">stringCopy  = <span class="number">0x1064e7088</span> 		<span class="number">0x7fff59719090</span> origionStr </div><div class="line">stringMCopy = <span class="number">0x7fafebdbb4b0</span>	<span class="number">0x7fff59719088</span> origionStr!!!!</div></pre></td></tr></table></figure>
<p>示例2：<br>可变string</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSMutableString</span> *string = [<span class="built_in">NSMutableString</span> stringWithString: <span class="string">@"origion"</span>];</div><div class="line"><span class="built_in">NSString</span> *stringCopy = [string <span class="keyword">copy</span>];</div><div class="line"><span class="built_in">NSMutableString</span> *mStringCopy = [string <span class="keyword">copy</span>];</div><div class="line"><span class="built_in">NSMutableString</span> *stringMCopy = [string mutableCopy];</div><div class="line">[string appendString:<span class="string">@" origion!"</span>];</div><div class="line">[stringMCopy appendString:<span class="string">@"!!"</span>];</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"string      = %p %@"</span>,string,string);</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"stringCopy  = %p %@"</span>,stringCopy,stringCopy);</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"stringMCopy = %p %@"</span>,mStringCopy,mStringCopy);</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"stringMCopy = %p %@"</span>,stringMCopy,stringMCopy);</div></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attr">string</span>      = <span class="number">0</span>x7fafebdec820 origion origion!</div><div class="line"><span class="attr">stringCopy</span>  = <span class="number">0</span>x7fafebdcb8c0 origion</div><div class="line"><span class="attr">stringMCopy</span> = <span class="number">0</span>x7fafebda4320 origion</div><div class="line"><span class="attr">stringMCopy</span> = <span class="number">0</span>x7fafebd32890 origion!!</div></pre></td></tr></table></figure>
<blockquote>
<p>对于系统的非容器类对象，我们可以认为，如果对一不可变对象复制，copy是指针复制（浅拷贝）和mutableCopy就是对象复制（深拷贝）。如果是对可变对象复制，都是深拷贝，但是copy返回的对象是不可变的。</p>
</blockquote>
<h5 id="系统的容器类对象"><a href="#系统的容器类对象" class="headerlink" title="系统的容器类对象"></a>系统的容器类对象</h5><blockquote>
<p>指NSArray,NSSet,NSDictionary等。对于容器类本身，上面讨论的结论也是适用的，需要探讨的是复制后容器内对象的变化。</p>
</blockquote>
<p>示例1：<br>不可变数组</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//copy返回不可变对象，mutablecopy返回可变对象</span></div><div class="line"><span class="built_in">NSArray</span> *array1 = [<span class="built_in">NSArray</span> arrayWithObjects:<span class="string">@"a"</span>,<span class="string">@"b"</span>,<span class="string">@"c"</span>,<span class="literal">nil</span>];</div><div class="line"><span class="built_in">NSArray</span> *arrayCopy1 = [array1 <span class="keyword">copy</span>];</div><div class="line"><span class="built_in">NSMutableArray</span> *mArrayCopy1 = [array1 mutableCopy];</div><div class="line">[mArrayCopy1 addObject:<span class="string">@"de"</span>];</div><div class="line">[mArrayCopy1 removeObjectAtIndex:<span class="number">0</span>];</div><div class="line"><span class="comment">// log</span></div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"array1      = %p %@ %p %@"</span>,array1,array1,array1[<span class="number">1</span>],array1[<span class="number">1</span>]);</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"arrayCopy1  = %p %@ %p %@"</span>,arrayCopy1,arrayCopy1,arrayCopy1[<span class="number">1</span>],arrayCopy1[<span class="number">1</span>]);</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"mArrayCopy1 = %p %@ %p %@"</span>,mArrayCopy1,mArrayCopy1,mArrayCopy1[<span class="number">0</span>],mArrayCopy1[<span class="number">0</span>]);</div></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">array1      = <span class="number">0</span>x7fafebdeaed0 (<span class="selector-tag">a</span>,<span class="selector-tag">b</span>,c) 	<span class="number">0</span>x1064e7228 <span class="selector-tag">b</span></div><div class="line">arrayCopy1  = <span class="number">0</span>x7fafebdeaed0 (<span class="selector-tag">a</span>,<span class="selector-tag">b</span>,c) 	<span class="number">0</span>x1064e7228 <span class="selector-tag">b</span></div><div class="line">mArrayCopy1 = <span class="number">0</span>x7fafebdfc010 (<span class="selector-tag">b</span>,c,de) 	<span class="number">0</span>x1064e7228 b</div></pre></td></tr></table></figure>
<p>示例：<br>可变数组</p>
<figure class="highlight prolog"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">NSArray</span> *array1 = [<span class="symbol">NSArray</span> arrayWithObjects:@<span class="string">"a"</span>,@<span class="string">"b"</span>,@<span class="string">"c"</span>,nil];</div><div class="line"><span class="symbol">NSMutableArray</span> *mArrayCopy = [[<span class="symbol">NSMutableArray</span> alloc] initWithArray:array1 copyItems:<span class="symbol">YES</span>];</div><div class="line"><span class="symbol">NSLog</span>(@<span class="string">"array1      = %p %@ %p %@ %p %@"</span>,array1,    array1,     array1[<span class="number">0</span>],      array1[<span class="number">0</span>],      array1[<span class="number">1</span>],      array1[<span class="number">1</span>]);</div><div class="line"><span class="symbol">NSLog</span>(@<span class="string">"arrayCopy1  = %p %@ %p %@ %p %@"</span>,mArrayCopy,mArrayCopy, mArrayCopy[<span class="number">0</span>],  mArrayCopy[<span class="number">0</span>],  mArrayCopy[<span class="number">1</span>],  mArrayCopy[<span class="number">1</span>]);</div></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">array1      = <span class="number">0</span>x7fafebcb5ae0 (<span class="selector-tag">a</span>,<span class="selector-tag">b</span>,c)	 <span class="number">0</span>x10afe1208 <span class="selector-tag">a</span> <span class="number">0</span>x10afe1228 <span class="selector-tag">b</span></div><div class="line">arrayCopy1  = <span class="number">0</span>x7fafebcb5b10 (<span class="selector-tag">a</span>,<span class="selector-tag">b</span>,c)	 <span class="number">0</span>x10afe1208 <span class="selector-tag">a</span> <span class="number">0</span>x10afe1228 b</div></pre></td></tr></table></figure>
<p>示例2：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSArray</span> *array1 = [<span class="built_in">NSArray</span> arrayWithObjects:[<span class="built_in">NSMutableString</span> stringWithString:<span class="string">@"a"</span>],<span class="string">@"b"</span>,<span class="string">@"c"</span>,<span class="literal">nil</span>];</div><div class="line"><span class="built_in">NSMutableArray</span> *mArrayCopy = [[<span class="built_in">NSMutableArray</span> alloc] initWithArray:array1 copyItems:<span class="literal">YES</span>];</div><div class="line"><span class="built_in">NSArray</span>* mArrayCopy2 = [<span class="built_in">NSKeyedUnarchiver</span> unarchiveObjectWithData:[<span class="built_in">NSKeyedArchiver</span> archivedDataWithRootObject: array1]];</div></pre></td></tr></table></figure>
<blockquote>
<p>mArrayCopy2是完全意义上的深拷贝，而mArrayCopy则不是</p>
<p>对于mArrayCopy内的不可变元素其还是指针复制。或者我们自己实现深拷贝的方法。因为如果容器的某一元素是不可变的，那你复制完后该对象仍旧是不能改变的，因此只需要指针复制即可。除非你对容器内的元素重新赋值，否则指针复制即已足够。</p>
</blockquote>
<h2 id="APP标注工具-王进"><a href="#APP标注工具-王进" class="headerlink" title="APP标注工具 - 王进"></a>APP标注工具 - 王进</h2><ul>
<li>第一个：马克鳗：<ul>
<li><a href="http://www.getmarkman.com/" target="_blank" rel="external">http://www.getmarkman.com/</a></li>
</ul>
</li>
<li>第二个：苦逼APPUI设计师的标注切图的利器—PxCook：<ul>
<li><a href="http://www.fancynode.com.cn/pxcook/home" target="_blank" rel="external">http://www.fancynode.com.cn/pxcook/home</a></li>
</ul>
</li>
</ul>
<h2 id="tracking-sdk之FMDB-amp-common字段简单分享-张超耀"><a href="#tracking-sdk之FMDB-amp-common字段简单分享-张超耀" class="headerlink" title="tracking-sdk之FMDB &amp; common字段简单分享 - 张超耀"></a>tracking-sdk之FMDB &amp; common字段简单分享 - 张超耀</h2><h3 id="FMDB"><a href="#FMDB" class="headerlink" title="FMDB"></a>FMDB</h3><ul>
<li>cocoapods管理（优先考虑）</li>
<li>libsqlite3.dylib函数库支持</li>
<li>怎删改 &amp; 查简单实用</li>
<li>object转string时有转义字符，需要客户端进一步处理</li>
</ul>
<h3 id="common字段"><a href="#common字段" class="headerlink" title="common字段"></a>common字段</h3><ul>
<li>IP &amp; 经纬度获取（不经意间的惊喜）<a href="http://ip-api.com" target="_blank" rel="external">IP查询</a></li>
<li>其他字段（略）</li>
</ul>
<h3 id="获取经纬度遇到的问题"><a href="#获取经纬度遇到的问题" class="headerlink" title="获取经纬度遇到的问题"></a>获取经纬度遇到的问题</h3><ul>
<li>经纬度获取是异步，可能在实时数据上传前还没有获取到，所以暂时取巧用IP解析的地址作为经纬度处理。</li>
</ul>
<h3 id="tracking-sdk-分享-潘君"><a href="#tracking-sdk-分享-潘君" class="headerlink" title="tracking-sdk 分享 - 潘君"></a>tracking-sdk 分享 - 潘君</h3><ul>
<li>略</li>
</ul>
<h2 id="正则表达式入门-曾铭"><a href="#正则表达式入门-曾铭" class="headerlink" title="正则表达式入门 - 曾铭"></a>正则表达式入门 - 曾铭</h2><h3 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h3><ul>
<li>原理我也不懂，但会用(知道能解决什么问题)能看懂(知道在解决什么问题)很重要</li>
<li>高效</li>
<li>碰到问题多”玩”, 玩玩就会了</li>
</ul>
<h3 id="罗列"><a href="#罗列" class="headerlink" title="罗列"></a>罗列</h3><figure class="highlight excel"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">\b 单词分割</div><div class="line">\d 数字</div><div class="line">\s 空白符</div><div class="line">\w 字母、数字、下划线、汉字</div><div class="line">\B \D \S \W</div><div class="line">[^xyz] 非 xyz</div><div class="line">[abc0-<span class="number">9</span>] 字符范围</div><div class="line">^ 起始</div><div class="line">$ 结束</div><div class="line">&#123;<span class="built_in">n</span>&#125; 重复 <span class="built_in">n</span> 次</div><div class="line">&#123;<span class="built_in">n</span>,&#125; 重复 <span class="built_in">n</span> 到无穷次</div><div class="line">&#123;<span class="built_in">n</span>,m&#125; 重复 <span class="built_in">n</span> 到 m 次</div><div class="line">* 重复 <span class="number">0</span> 到无穷次</div><div class="line">+ 重复 <span class="number">1</span> 到无穷次</div><div class="line">? 重复 <span class="number">0</span> 或 <span class="number">1</span> 次</div><div class="line">| 或</div><div class="line">\\ 字符转义</div><div class="line">(<span class="built_in">exp</span>) 捕获</div><div class="line">(?&lt;name&gt;<span class="built_in">exp</span>) 捕获并命名</div><div class="line">(?<span class="symbol">:ex</span>p) 不捕获</div><div class="line">(?=<span class="built_in">exp</span>) 匹配<span class="built_in">exp</span>前面的位置</div><div class="line">(?&lt;=<span class="built_in">exp</span>) 匹配<span class="built_in">exp</span>后面的位置</div><div class="line">(?!<span class="built_in">exp</span>) 匹配后面跟的不是<span class="built_in">exp</span>的位置</div><div class="line">(?&lt;!<span class="built_in">exp</span>) 匹配前面不是<span class="built_in">exp</span>的位置</div></pre></td></tr></table></figure>
<h3 id="推荐工具"><a href="#推荐工具" class="headerlink" title="推荐工具"></a>推荐工具</h3><ul>
<li><a href="http://www.regexbuddy.com/" target="_blank" rel="external">RegexBuddy for Win</a></li>
<li><a href="http://krillapps.com/patterns/" target="_blank" rel="external">Patterns for Mac</a></li>
<li><a href="http://www.regexlab.com/zh/regref.htm" target="_blank" rel="external">正则在线参考</a></li>
</ul>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="http://www.ruanyifeng.com/blog/2009/04/lorem_ipsum.html" target="_blank" rel="external">关于Lorem ipsum</a></li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2017 Wilson
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="A fast, simple &amp; powerful blog framework">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="Another simple and elegant theme for Hexo  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="Site Visitors"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="Page Hits"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#" title="Back to Top"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="Comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="Go to Bottom"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>