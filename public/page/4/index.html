<!DOCTYPE html>
<html lang="cn">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="Wilson" />


    
    


<meta name="description" content="每周分享博客">
<meta property="og:type" content="website">
<meta property="og:title" content="Wilson">
<meta property="og:url" content="mysiga.cn/page/4/index.html">
<meta property="og:site_name" content="Wilson">
<meta property="og:description" content="每周分享博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Wilson">
<meta name="twitter:description" content="每周分享博客">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="Wilson" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">


    <style> .article { opacity: 0;} </style>


<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>Wilson</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: undefined
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Wilson</a></h1>
        </hgroup>

        
        <p class="header-subtitle">爱折腾的技术男</p>
        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa GitHub" href="https://github.com/mysiga" title="GitHub"></a>
                            
                                <a class="fa 简书" href="http://www.jianshu.com/u/5fccc924116b" title="简书"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Chrome/">Chrome</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tablayout/">tablayout</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/博客/">博客</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/同步异步/">同步异步</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/坑/">坑</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/开发效率/">开发效率</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/效率/">效率</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/研发杂谈/">研发杂谈</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/移动组周分享/">移动组周分享</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/线程/">线程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网站/">网站</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://zhipingyang.github.io/">zhipingyang</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://www.tomatopeter.com/">阿潘</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://www.jianshu.com/u/d6f6c875ad03">zvving</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://www.jianshu.com/u/ac4f127d5150">xpleemoon</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://www.jianshu.com/users/iNXuJG/timeline">冰雪八哥</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://www.jinwong001.com/">Jinwong</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://wangsheng.github.io/">Victor</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://origheart.com/">Origheart</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://ckjava.com/">ck</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://prettychaoyao.github.io/">prettychaoyao</a>
                    
                    </div>
                </section>
                

                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Wilson</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Wilson</a></h1>
            </hgroup>
            
            <p class="header-subtitle">爱折腾的技术男</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/mysiga" title="GitHub"></a>
                            
                                <a class="fa 简书" target="_blank" href="http://www.jianshu.com/u/5fccc924116b" title="简书"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-装逼指南二期" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/04/装逼指南二期/" class="article-date">
      <time datetime="2015-11-04T10:30:00.000Z" itemprop="datePublished">2015-11-04</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/04/装逼指南二期/">周精益分享 - 程序员装逼指南二期</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="Android-单元测试-吴明"><a href="#Android-单元测试-吴明" class="headerlink" title="Android 单元测试  吴明"></a>Android 单元测试  吴明</h2><ul>
<li><a href="https://developer.android.com/intl/zh-cn/training/activity-testing/preparing-activity-testing.html" target="_blank" rel="external">Android单元测试支持</a><ul>
<li>Android studio 1.2 beta3版本，原生支持单元测试</li>
</ul>
</li>
<li>环境搭建 <ul>
<li>配置环境命令：./gradlew build connectedCheck  </li>
</ul>
</li>
<li>测试示例    <ul>
<li><img src="http://7xn0ue.com1.z0.glb.clouddn.com/420E036F-4D69-47F4-A639-5A5B294F7BDD.png" alt="MacDown Screenshot"></li>
</ul>
</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">MyFirstTestActivityTest</span> <span class="keyword">extends</span> <span class="title">ActivityInstrumentationTestCase2&lt;MyFirstTestActivity&gt;</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="type">MyFirstTestActivity</span> mFirstTestActivity;</div><div class="line">    <span class="keyword">private</span> <span class="type">TextView</span> mFirstTestText;</div><div class="line"></div><div class="line">    public <span class="type">MyFirstTestActivityTest</span>() &#123;</div><div class="line">        <span class="keyword">super</span>(<span class="type">MyFirstTestActivity</span>.<span class="keyword">class</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">protected</span> void setUp() <span class="keyword">throws</span> <span class="type">Exception</span> &#123;</div><div class="line">        <span class="keyword">super</span>.setUp();</div><div class="line">        mFirstTestActivity = getActivity();</div><div class="line">        mFirstTestText =</div><div class="line">                (<span class="type">TextView</span>) mFirstTestActivity</div><div class="line">                .findViewById(<span class="type">R</span>.id.my_first_test_text_view);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>ps:由于配置环境一直报:</li>
</ul>
<figure class="highlight subunit"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Test </span>running failed: Instrumentation run failed due to 'java.lang.RuntimeException'</div></pre></td></tr></table></figure>
<ul>
<li><a href="https://developer.android.com/intl/zh-cn/training/testing/ui-testing/index.html" target="_blank" rel="external">Automating UI Tests</a></li>
<li><a href="https://developer.android.com/intl/zh-cn/training/testing/unit-testing/index.html" target="_blank" rel="external">Building Effective Unit Tests</a></li>
<li><a href="https://developer.android.com/intl/zh-cn/training/testing/performance.html" target="_blank" rel="external">Testing Display  Performance</a></li>
<li>问题：<ul>
<li>运行在模拟器上，通过对模拟器的操作或者mock，来触发函数调用，进而对其结果进行验证</li>
<li>测试的编写和维护较为困难</li>
</ul>
</li>
</ul>
<h2 id="Linux-文件权限入门-曾铭"><a href="#Linux-文件权限入门-曾铭" class="headerlink" title="Linux 文件权限入门 - 曾铭"></a>Linux 文件权限入门 - 曾铭</h2><h3 id="一个线上-bug"><a href="#一个线上-bug" class="headerlink" title="一个线上 bug"></a>一个线上 bug</h3><p>图片上传 API 无法使用，定位到问题是 dev1 帐号移动的 tomcat 无法访问 /home/img_temp 目录，处理权限问题后搞定</p>
<h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><p>user, group, others</p>
<figure class="highlight tap"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[dev1@apps-51offer ~]$ ll</div><div class="line">total 16</div><div class="line">-rw-r--r--<span class="number"> 1 </span>dev1 dev  <span class="number"> 742 </span>Nov <span class="number"> 5 </span>11:22 ming.pub</div><div class="line">drwxrwx---<span class="number"> 4 </span>root root<span class="number"> 4096 </span>Nov <span class="number"> 6 </span>09:30 test1</div><div class="line">drwxr-xr--<span class="number"> 2 </span>dev1 dev <span class="number"> 4096 </span>Nov <span class="number"> 6 </span>10:44 test2</div><div class="line">drwxr-xr-x<span class="number"> 2 </span>dev1 dev <span class="number"> 4096 </span>Nov <span class="number"> 6 </span>09:30 test3</div></pre></td></tr></table></figure>
<ul>
<li>文件 <code>-</code></li>
<li>文件夹 <code>d</code></li>
<li>链接 <code>l</code></li>
</ul>
<p>rwx 读、写、执行权限 , 754 代表什么</p>
<ul>
<li>文件所有者变更：<code>chown ming:mobile file</code></li>
<li>文件权限变更： <code>chmod g+rx file</code></li>
</ul>
<h3 id="一个小坑"><a href="#一个小坑" class="headerlink" title="一个小坑"></a>一个小坑</h3><h4 id="问："><a href="#问：" class="headerlink" title="问："></a>问：</h4><blockquote>
<p><code>drwxr-xr-- 2 dev1 dev  4096 Nov  6 10:44 test2</code> 文件夹下有 <code>-rwxr-xr-- 2 root root  4096 Nov  6 10:44 file</code><br>dev1 用户可以删除 file 这个文件吗？</p>
</blockquote>
<h4 id="答："><a href="#答：" class="headerlink" title="答："></a>答：</h4><blockquote>
<p>可以，文件的 rwx 控制文件本身的读写运行权限，文件的增删文件名的修改要看文件夹的权限。</p>
</blockquote>
<p>##Android 压力测试工具 Monkey&amp;MonkeyRunner- 杨俊构</p>
<p>###Monkey</p>
<h4 id="一、Monkey-是什么？"><a href="#一、Monkey-是什么？" class="headerlink" title="一、Monkey 是什么？"></a>一、Monkey 是什么？</h4><ul>
<li>Monkey 就是SDK中附带的一个工具。</li>
</ul>
<h4 id="二、Monkey-测试的目的？"><a href="#二、Monkey-测试的目的？" class="headerlink" title="二、Monkey 测试的目的？"></a>二、Monkey 测试的目的？</h4><ul>
<li>该工具用于进行压力测试。 然后开发人员结合monkey 打印的日志 和系统打印的日志，结局测试中出现的问题。</li>
</ul>
<h4 id="三、Monkey-测试的特点？"><a href="#三、Monkey-测试的特点？" class="headerlink" title="三、Monkey 测试的特点？"></a>三、Monkey 测试的特点？</h4><ul>
<li>Monkey 测试,所有的事件都是随机产生的，不带任何人的主观性。</li>
</ul>
<h4 id="四、Monkey-命令详解"><a href="#四、Monkey-命令详解" class="headerlink" title="四、Monkey 命令详解"></a>四、Monkey 命令详解</h4><ul>
<li><p>标准的monkey 命令: [adb shell] monkey [options] <eventcount> ,</eventcount></p>
<blockquote>
<p> 例如：adb shell monkey -v 500 ——–产生500次随机事件，</p>
</blockquote>
</li>
</ul>
<ul>
<li><p>四大类—— 常用选项 、 事件选项 、 约束选项 、 调试选项</p>
<blockquote>
<p>-v：指定打印信息的详细级别，一个 -v增加一个级别 ， 默认级别为 0 。</p>
<p>-s：指定产生随机事件种子值，相同的种子值产生相同的事件序列。如： -s 200</p>
<p>-p：指定有效的package（如不指定，则对系统中所有package有效），一个-p 对应一个有效package， 如：-p com.ckt -p com.ckt.asura；</p>
</blockquote>
</li>
</ul>
<h4 id="五、一个简单的monkey命令："><a href="#五、一个简单的monkey命令：" class="headerlink" title="五、一个简单的monkey命令："></a>五、一个简单的monkey命令：</h4><ul>
<li><p>adb shell monkey -p com.xy.android.junit -s 500 -v 10000</p>
</li>
<li><p>但是，工作中为了保证测试数量的完整进行，我们一般不会在发生错误时立刻退出压力测试。</p>
</li>
<li><p>monkey 测试命令如下</p>
</li>
</ul>
<blockquote>
<p>adb shell monkey -p com.xy.android.junit -s 500 –ignore-crashes –ignore-timeouts –monitor-native-crashes -v -v 10000 &gt; E:\monkey_log\java_monkey_log.txt</p>
</blockquote>
<p>###MonkeyRunner</p>
<p>####一、什么是monkeyrunner</p>
<ul>
<li><p>monkeyrunner工具提供了一个API，使用此API写出的程序可以在Android代码之外控制Android设备和模拟器。通过monkeyrunner，您可以写出一个Python程序去安装一个Android应用程序或测试包，运行它，向它发送模拟击键，截取它的用户界面图片。</p>
</li>
<li><p>monkeyrunner工具的主要设计目的是用于测试功能/框架水平上的应用程序和设备，或用于运行单元测试套件，但您当然也可以将其用于其它目的。</p>
</li>
</ul>
<h4 id="二、monkeyrunner工具同Monkey工具的差别"><a href="#二、monkeyrunner工具同Monkey工具的差别" class="headerlink" title="二、monkeyrunner工具同Monkey工具的差别"></a>二、monkeyrunner工具同Monkey工具的差别</h4><ul>
<li><p>Monkey： Monkey工具直接运行在设备或模拟器的adb shell中，生成用户或系统的伪随机事件流，属于黑盒测试。</p>
</li>
<li><p>monkeyrunner：monkeyrunner工具则是类似于灰盒测试的样子，可以编写定制一些测试方法和用例针对具体情况测试。</p>
</li>
</ul>
<h4 id="三、实例-：双11抽取优惠券不停点击一个按钮脚本"><a href="#三、实例-：双11抽取优惠券不停点击一个按钮脚本" class="headerlink" title="三、实例 ：双11抽取优惠券不停点击一个按钮脚本"></a>三、实例 ：双11抽取优惠券不停点击一个按钮脚本</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#coding=utf-8 </span></div><div class="line"><span class="keyword">from</span> com.android.monkeyrunner <span class="keyword">import</span> MonkeyRunner, MonkeyDevice, MonkeyImage</div><div class="line"><span class="keyword">from</span> com.android.monkeyrunner <span class="keyword">import</span> MonkeyRunner <span class="keyword">as</span> mr</div><div class="line"><span class="keyword">from</span> com.android.monkeyrunner <span class="keyword">import</span> MonkeyDevice <span class="keyword">as</span> md</div><div class="line"><span class="keyword">from</span> com.android.monkeyrunner <span class="keyword">import</span> MonkeyImage <span class="keyword">as</span> mi</div><div class="line">device=mr.waitForConnection()</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1000</span>): </div><div class="line">	MonkeyRunner.sleep(<span class="number">1</span>)</div><div class="line">	<span class="keyword">print</span> i</div><div class="line">	device.touch(<span class="number">500</span>,<span class="number">950</span>,<span class="string">'DOWN_AND_UP'</span>)</div><div class="line"><span class="keyword">print</span> <span class="string">"end"</span></div></pre></td></tr></table></figure>
<p>##人脸识别技术简单介绍- 王进</p>
<h4 id="Android自带的API-FaceDetector"><a href="#Android自带的API-FaceDetector" class="headerlink" title="Android自带的API:FaceDetector"></a>Android自带的API:FaceDetector</h4><ul>
<li><p>Step 1: 读取bitmap图片（API 只接受Bitmap）</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Bitmap </span>sampleBmp=<span class="keyword">BitmapFactory.decodeResource(getResources(), </span>R.drawable.sample1)<span class="comment">;</span></div></pre></td></tr></table></figure>
<p>(拍照或者从相册中也可以)</p>
</li>
<li><p>Step 2: 通过FaceDetector API进行人脸识别</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">  <span class="comment">//FaceDetecor只能读取RGB 565格式的Bitmap</span></div><div class="line">  Bitmap tmpBmp = inputImage.copy(Bitmap.Config.RGB_565, <span class="literal">true</span>);</div><div class="line">  <span class="comment">//新建FaceDetector 实例，</span></div><div class="line">  FaceDetector faceDet = <span class="keyword">new</span> <span class="type">FaceDetector</span>(tmpBmp.getWidth(), tmpBmp.getHeight(), MAX_FACES);<span class="comment">//MAX_FACES 搜索人脸个数</span></div><div class="line">  <span class="comment">// 调用findFaces方法，将数据储存在facelist中</span></div><div class="line">  FaceDetector.Face[] faceList = <span class="keyword">new</span> <span class="type">FaceDetector</span>.Face[MAX_FACES];</div><div class="line">faceDet.findFaces(tmpBmp, faceList);</div></pre></td></tr></table></figure>
<blockquote>
<p>找人脸的原理是：找眼睛。<br>它返回的人脸数据face中，<br>通过调用public float eyesDistance ()，得到眼距<br>public void getMidPoint (PointF point)，得到两眼中心点位置。<br>public float confidence () 可以返回该人脸数据的可信度(0~1)，这个值越大，该人脸数据的准确度也就越高</p>
</blockquote>
</li>
<li><p>Step3:对原图进行缩放，并在图上显示人脸框</p>
<ul>
<li>吐槽：<br>A，只能接受Bitmap 格式的数据；<br>B，只能识别双眼距离大于20 像素的人脸像（当然，这个可在framework层中修改）；<br>C，只能检测出人脸的位置（双眼的中心点及距离），不能对人脸进行匹配（查找指定的脸谱）。</li>
</ul>
</li>
</ul>
<p>###第三方Face++</p>
<ul>
<li>在线API：基础版API供免费调用测试和小规模使用（会尽力维护API服务稳定性，但不保证每次调用均会成功），企业版API相对基础版API在算法和稳定性方面会有更好的表现</li>
<li>离线SDK包括人脸关键点定位等功能。</li>
<li>网址：<a href="http://www.faceplusplus.com.cn/" target="_blank" rel="external">http://www.faceplusplus.com.cn/</a></li>
</ul>
<h2 id="Android启动模式之singelTask扫盲－-李仙鹏"><a href="#Android启动模式之singelTask扫盲－-李仙鹏" class="headerlink" title="Android启动模式之singelTask扫盲－ 李仙鹏"></a>Android启动模式之singelTask扫盲－ 李仙鹏</h2>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/移动组周分享/">移动组周分享</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-程序员装逼指南" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/30/程序员装逼指南/" class="article-date">
      <time datetime="2015-10-30T10:30:00.000Z" itemprop="datePublished">2015-10-30</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/30/程序员装逼指南/">周精益分享 - 程序员装逼指南</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="『图像和滤镜』"><a href="#『图像和滤镜』" class="headerlink" title="『图像和滤镜』"></a>『图像和滤镜』</h2><p>@(Share)[UIImage]</p>
<p>[toc]</p>
<h3 id="图像"><a href="#图像" class="headerlink" title="图像"></a>图像</h3><h4 id="常见的图像格式"><a href="#常见的图像格式" class="headerlink" title="常见的图像格式"></a>常见的图像格式</h4><ul>
<li>png（Portable Network Graphic）便携式网络图形格式</li>
<li>tiff、tif（Tagged Image File Format）标记图像文件格式</li>
<li>jpg、jpeg（Joint Photographic Experts Group）联合摄影专家组</li>
<li>gif（Graphic Interchange Format）图形交换格式</li>
</ul>
<h4 id="图像实例化"><a href="#图像实例化" class="headerlink" title="图像实例化"></a>图像实例化</h4><ul>
<li><p>imageNamed:</p>
<blockquote>
<p>使用频率高，内存缓存优化</p>
</blockquote>
</li>
<li><p>imageWithContentsOfFile:</p>
<blockquote>
<p>单次使用，暂时不清楚如何支持ImageAssert下的图片路径</p>
</blockquote>
</li>
<li><p>imageWithData:</p>
<blockquote>
<p>本地或网络的文件数据加载</p>
</blockquote>
</li>
<li><p>imageWithCGImage:</p>
<blockquote>
<p>绘制生成图，代码如下</p>
</blockquote>
</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 旧图局部裁剪</span></div><div class="line">   <span class="built_in">CGImageRef</span> myImageRef = [oldImage <span class="built_in">CGImageRef</span>];</div><div class="line">   <span class="built_in">CGRect</span> subRect = <span class="built_in">CGRectMake</span>(<span class="number">20</span>, <span class="number">20</span>, <span class="number">100</span>, <span class="number">100</span>);</div><div class="line">   <span class="built_in">CGImageRef</span> cgCrop = <span class="built_in">CGImageCreateWithImageInRect</span>(myImageRef, subRect);</div><div class="line">   <span class="built_in">UIImage</span> *imageCrop = [<span class="built_in">UIImage</span> imageWithCGImage:cgCrop];</div></pre></td></tr></table></figure>
<h4 id="显示图像"><a href="#显示图像" class="headerlink" title="显示图像"></a>显示图像</h4><blockquote>
<p>屏幕的缩放因子，导致我们需要@2x及@3x图，对视图截图操作也同样需要针对Retina及plus优化<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">UIImage</span>*)screenShotBy:(<span class="built_in">UIImageView</span>*)imagView</div><div class="line">&#123;</div><div class="line"><span class="comment">//  UIGraphicsBeginImageContext(imagView.bounds.size);</span></div><div class="line"><span class="comment">// 2表示Retina，3表示plus分辨率，1正常，0则是当前设备的缩放因子</span></div><div class="line"><span class="comment">// YES 表示不包含图像的alpha通道</span></div><div class="line">	<span class="built_in">UIGraphicsBeginImageContextWithOptions</span>((imagView.bounds.size), <span class="literal">YES</span>, <span class="number">2</span>);</div><div class="line">	[imagView.layer renderInContext:<span class="built_in">UIGraphicsGetCurrentContext</span>()];</div><div class="line">	<span class="built_in">UIImage</span>*image = <span class="built_in">UIGraphicsGetImageFromCurrentImageContext</span>();</div><div class="line">	<span class="built_in">UIGraphicsEndImageContext</span>();</div><div class="line">	<span class="keyword">return</span> image;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<h5 id="contentModel"><a href="#contentModel" class="headerlink" title="contentModel"></a>contentModel</h5><p><em>图像内容展现方式</em></p>
<ul>
<li>UIViewContentModelScaleToFill（默认）</li>
<li>UIViewContentModelScaleAspectFill（下拉放大）</li>
<li>UIViewContentModelScaleAspectFit</li>
<li>UIViewContentModelCenter （一些停靠模式）</li>
<li>UIViewContentModelTop/Bottom</li>
<li>UIViewContentModelLeft/Right</li>
</ul>
<h5 id="拉伸属性"><a href="#拉伸属性" class="headerlink" title="拉伸属性"></a>拉伸属性</h5><p><code>代码</code><br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 方法一</span></div><div class="line">image=[oldIconImage <span class="string">stretchableImageWithLeftCapWidth:</span><span class="number">10</span> <span class="string">topCapHeight:</span><span class="number">12</span>];</div><div class="line"></div><div class="line"><span class="comment">// 方法二</span></div><div class="line">image = [oldIconImage <span class="string">resizableImageWithCapInsets:</span>UIEdgeInsetsMake(<span class="number">17</span>, <span class="number">17</span>, <span class="number">17</span>, <span class="number">25</span>)];</div></pre></td></tr></table></figure></p>
<p><code>ImageAssert</code></p>
<p><img src="./1446137205500.png" alt="Alt text"><br>使用slicing，小变大无视差<br><img src="./1446137161636.png" alt="Alt text"></p>
<hr>
<h3 id="图像选择器"><a href="#图像选择器" class="headerlink" title="图像选择器"></a>图像选择器</h3><h4 id="系统自带"><a href="#系统自带" class="headerlink" title="系统自带"></a>系统自带</h4><h4 id="自定义"><a href="#自定义" class="headerlink" title="自定义"></a>自定义</h4><hr>
<h3 id="滤镜"><a href="#滤镜" class="headerlink" title="滤镜"></a>滤镜</h3><h3 id="人脸识别"><a href="#人脸识别" class="headerlink" title="人脸识别"></a>人脸识别</h3><h2 id="聊聊-QCon2015-曾铭"><a href="#聊聊-QCon2015-曾铭" class="headerlink" title="聊聊 QCon2015 - 曾铭"></a>聊聊 QCon2015 - 曾铭</h2><h3 id="pure-native-移动跨平台架构设计与实战"><a href="#pure-native-移动跨平台架构设计与实战" class="headerlink" title="pure-native 移动跨平台架构设计与实战"></a>pure-native 移动跨平台架构设计与实战</h3><p>by 赵世婚</p>
<h4 id="好处"><a href="#好处" class="headerlink" title="好处"></a>好处</h4><ul>
<li>重复逻辑：网络层、账户逻辑</li>
<li>性能（网络压缩、打破内存限制）</li>
<li>多一层封装应对业务变动</li>
</ul>
<h4 id="坏处"><a href="#坏处" class="headerlink" title="坏处"></a>坏处</h4><ul>
<li>跨平台开发代码生成</li>
<li>调试：异常捕获</li>
</ul>
<h4 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h4><ul>
<li>学不来：人员构成决定技术选型，技术选型决定依赖人员 {:&amp;.rollIn}</li>
<li>分层来应对业务变动（横向分层和纵向分层）</li>
</ul>
<h3 id="JavaScript-The-World’s-Best-Programming-Language"><a href="#JavaScript-The-World’s-Best-Programming-Language" class="headerlink" title="JavaScript - The World’s Best Programming Language"></a>JavaScript - The World’s Best Programming Language</h3><p>by Hax</p>
<h4 id="JavaScript-最好-？"><a href="#JavaScript-最好-？" class="headerlink" title="JavaScript 最好 ？"></a>JavaScript 最好 ？</h4><ul>
<li>语言简陋：弱类型、标准库、面向对象、模块、异步 {:&amp;.rollIn}</li>
<li>编程时注意：好的范式、不好的范式</li>
</ul>
<h4 id="不过"><a href="#不过" class="headerlink" title="不过"></a>不过</h4><ul>
<li>npm 飞速发展的 packages 数量 {:&amp;.rollIn}</li>
<li>ECMAScript 6，语言特性问题完美解决 (c)</li>
<li>Babel 6to5 (python)<ul>
<li>most hard to upgrade -&gt; always use latest feature!</li>
</ul>
</li>
<li>最快的动态语言，还会更快 (ruby)</li>
<li>JS as a Platform：中间语言 (c#, java）</li>
<li>生态系统：浏览器、node.js、公司、社区</li>
</ul>
<h4 id="总结：-1"><a href="#总结：-1" class="headerlink" title="总结："></a>总结：</h4><ul>
<li>js 是现阶段发展最快的语言 {:&amp;.rollIn}</li>
<li>前端前途无量！</li>
</ul>
<h3 id="react"><a href="#react" class="headerlink" title="react"></a>react</h3><h4 id="jQuery"><a href="#jQuery" class="headerlink" title="jQuery"></a>jQuery</h4><ul>
<li>DOM 操作</li>
<li>组件散乱，社区力量难以聚合</li>
</ul>
<h4 id="AngularJS"><a href="#AngularJS" class="headerlink" title="AngularJS"></a>AngularJS</h4><ul>
<li>绑定 数据与数据、数据与视图之间的关系</li>
<li>npm</li>
</ul>
<h4 id="React"><a href="#React" class="headerlink" title="React"></a>React</h4><ul>
<li>用 js 写界面……（似乎是一种倒退）</li>
<li>还整个 JSX 让界面好写一点</li>
<li>React Native</li>
</ul>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><ul>
<li>前端风起云涌 {:&amp;.rollIn}</li>
<li>小扎灭我客户端之心不死</li>
</ul>
<h3 id="总的总结"><a href="#总的总结" class="headerlink" title="总的总结"></a>总的总结</h3><ul>
<li>拥抱变化</li>
<li>最差也可以变最好，关键要敢于拥抱变化</li>
<li>技术紧迫感：勇于尝试新东西</li>
<li>业务紧迫感：技术改变留学</li>
</ul>
<h3 id="推荐："><a href="#推荐：" class="headerlink" title="推荐："></a>推荐：</h3><ul>
<li>JavaScript - The World’s Best Programming Language</li>
<li>pure-native移动跨平台架构设计与实战</li>
<li>注重实效的性能</li>
<li>ReactJS 实战</li>
<li>ELE.ME是如何运行的</li>
</ul>
<h2 id="Android-6-0运行权限-王胜"><a href="#Android-6-0运行权限-王胜" class="headerlink" title="Android 6.0运行权限 - 王胜"></a>Android 6.0运行权限 - 王胜</h2><h3 id="一般权限和危险权限"><a href="#一般权限和危险权限" class="headerlink" title="一般权限和危险权限"></a>一般权限和危险权限</h3><p>Android 6.0以前，所有的权限在应用安装或者更新时自动完成授权。如果用户想安装这个App，必需接受所有的权限申请。为了保护用户的隐私，Android M特意调整了Android的授权架构。将应用权限分为一般(Normal)和危险(Dangerous)两种级别的权限:</p>
<ul>
<li><p>一般权限不会直接危害用户的隐私。如果你的App在manifest列出一般权限，那么系统会自动授予这些权限。</p>
</li>
<li><p>危险权限可以访问用户的隐私数据。 如果你的App在manifest列出一般权限，那么系统会自动授予这些权限。如果列出危险权限，需要通过用户显示交互通过你的应用权限申请。</p>
</li>
</ul>
<h3 id="权限组"><a href="#权限组" class="headerlink" title="权限组"></a>权限组</h3><p>Anroid系统里所有的危险权限都拥有所归属的权限组。如果设备运行在Android6.0(API level 23)，并且App的targetSdkVersion是23或者更高，当App请求危险权限时将会有以下表现：</p>
<ul>
<li><p>如果App请求manifest里声明的危险权限，并且App当前还没有获取任何权限组里的权限，系统将弹出一个描述App想要访问权限的对话框。但是对话框不会描述该权限属于哪个权限组。例如：App请求权限 <strong>READ_CONTACTS</strong>  ，系统对话框只显示App需要访问设备的联系人。如果用户授权通过，系统仅仅给App需要的权限。</p>
</li>
<li><p>如果App请求manifest里声明的危险权限，并且App已经用户该危险权限所在的权限组的权限，系统则直接授予此次请求的权限，而不需要用户手动交互。例如：如果App已经有先前的 <strong>READ_CONTACTS</strong> 权限，那么再请求 <strong>WRITE_CONTACTS</strong> 权限，系统则直接授予。</p>
</li>
</ul>
<blockquote>
<p>任何权限都有所归属的权限组，包括一般权限和App自定义的权限。然而，权限组只影响那些危险权限相关的用户体验。你可以忽略一般权限的权限组。</p>
</blockquote>
<p><strong>危险权限和权限组</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">权限组</th>
<th style="text-align:center">权限</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">CALENDAR</td>
<td style="text-align:center"><ul><li>READ_CALENDAR</li><li>WRITE_CALENDAR</li></ul></td>
</tr>
<tr>
<td style="text-align:center">CAMERA</td>
<td style="text-align:center"><ul><li>CAMERA</li></ul></td>
</tr>
<tr>
<td style="text-align:center">CONTACTS</td>
<td style="text-align:center"><ul><li>READ_CONTACTS</li><li> WRITE_CONTACTS</li><li>GET_ACCOUNTS</li></ul></td>
</tr>
<tr>
<td style="text-align:center">LOCATION</td>
<td style="text-align:center"><ul><li>ACCESS_FINE_LOCATION</li><li> ACCESS_COARSE_LOCATION</li></ul></td>
</tr>
<tr>
<td style="text-align:center">MICROPHONE</td>
<td style="text-align:center"><ul><li>RECORD_AUDIO</li></ul></td>
</tr>
<tr>
<td style="text-align:center">PHONE</td>
<td style="text-align:center"><ul><li>READ_PHONE_STATE</li><li>CALL_PHONE</li><li>READ_CALL_LOG</li><li>WRITE_CALL_LOG</li><li> ADD_VOICEMAIL</li><li>USE_SIP</li><li> PROCESS_OUTGOING_CALLS</li></ul></td>
</tr>
<tr>
<td style="text-align:center">SENSORS</td>
<td style="text-align:center"><ul><li>BODY_SENSORS</li></ul></td>
</tr>
<tr>
<td style="text-align:center">SMS</td>
<td style="text-align:center"><ul><li>SEND_SMS</li><li>RECEIVE_SMS</li><li> READ_SMS</li><li>RECEIVE_WAP_PUSH</li><li>RECEIVE_MMS</li></ul></td>
</tr>
<tr>
<td style="text-align:center">STORAGE</td>
<td style="text-align:center"><ul><li>READ_EXTERNAL_STORAGE</li><li> WRITE_EXTERNAL_STORAGE</li></ul></td>
</tr>
</tbody>
</table>
<h3 id="权限检测"><a href="#权限检测" class="headerlink" title="权限检测"></a>权限检测</h3><p>Android的所有版本里，都需要将所需的一般权限和危险权限都声明在App的manifest里。然而这些声明在不同的系统版本和App的target SDK Level会有不同的影响:</p>
<ul>
<li><p>如果设备运行在Android 5.1或者更低，或者你的App target SDK是22或者更低：如果你在manifest里声明了危险权限，用户则不得不在安装App时给予授权；如果他们不授权，系统将不会安装此App。</p>
</li>
<li><p>如果设备运行在Android 6.0或者更高，或者你的App target SDK是23或者更高：App不仅需要在manifest里声明危险权限，而且App在运行时还需要在每次需要危险权限时发起请求。用户可以接受也可以拒绝权限申请，App也需要在用户拒绝危险权限申请时能长长运行。</p>
</li>
</ul>
<blockquote>
<p>注意：此处的权限处理只有App的target API level 23或者更高，而且运行在Android 6.0 (API level 23)或者更高的设备上才会如此。如果设备的中App的targetSdkVersion 是 22或者更低，系统则在安装或者更新App时自动授予危险权限。</p>
</blockquote>
<p><a href="http://developer.android.com/tools/support-library/index.html" target="_blank" rel="external">The Android Support Library</a>能很好地处理检测、请求和权限。Android 6.0 (API level 23) framework也提供了类似的方法。然而，使用support库能更简单一些，因为你不需要在调用方法之前检测android系统的版本。 </p>
<h3 id="发起权限申请请求"><a href="#发起权限申请请求" class="headerlink" title="发起权限申请请求"></a>发起权限申请请求</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Here, this Activity is the current activity</span></div><div class="line"><span class="keyword">if</span> (ContextCompat.checkSelfPermission(thisActivity,</div><div class="line">                Manifest.permission.READ_CONTACTS)</div><div class="line">        != PackageManager.PERMISSION_GRANTED) &#123;</div><div class="line"></div><div class="line">    <span class="comment">// Should we show an explanation?</span></div><div class="line">    <span class="keyword">if</span> (ActivityCompat.shouldShowRequestPermissionRationale(thisActivity,</div><div class="line">            Manifest.permission.READ_CONTACTS)) &#123;</div><div class="line"></div><div class="line">        <span class="comment">// Show an expanation to the user *asynchronously* -- don't block</span></div><div class="line">        <span class="comment">// this thread waiting for the user's response! After the user</span></div><div class="line">        <span class="comment">// sees the explanation, try again to request the permission.</span></div><div class="line"></div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line"></div><div class="line">        <span class="comment">// No explanation needed, we can request the permission.</span></div><div class="line"></div><div class="line">        ActivityCompat.requestPermissions(thisActivity,</div><div class="line">                <span class="keyword">new</span> String[]&#123;Manifest.permission.READ_CONTACTS&#125;,</div><div class="line">                MY_PERMISSIONS_REQUEST_READ_CONTACTS);</div><div class="line"></div><div class="line">        <span class="comment">// MY_PERMISSIONS_REQUEST_READ_CONTACTS is an</span></div><div class="line">        <span class="comment">// app-defined int constant. The callback method gets the</span></div><div class="line">        <span class="comment">// result of the request.</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="处理权限请求结果"><a href="#处理权限请求结果" class="headerlink" title="处理权限请求结果"></a>处理权限请求结果</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRequestPermissionsResult</span><span class="params">(<span class="keyword">int</span> requestCode,</span></span></div><div class="line">        String permissions[], <span class="keyword">int</span>[] grantResults) &#123;</div><div class="line">    <span class="keyword">switch</span> (requestCode) &#123;</div><div class="line">        <span class="keyword">case</span> MY_PERMISSIONS_REQUEST_READ_CONTACTS: &#123;</div><div class="line">            <span class="comment">// If request is cancelled, the result arrays are empty.</span></div><div class="line">            <span class="keyword">if</span> (grantResults.length &gt; <span class="number">0</span></div><div class="line">                &amp;&amp; grantResults[<span class="number">0</span>] == PackageManager.PERMISSION_GRANTED) &#123;</div><div class="line"></div><div class="line">                <span class="comment">// permission was granted, yay! Do the</span></div><div class="line">                <span class="comment">// contacts-related task you need to do.</span></div><div class="line"></div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line"></div><div class="line">                <span class="comment">// permission denied, boo! Disable the</span></div><div class="line">                <span class="comment">// functionality that depends on this permission.</span></div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// other 'case' lines to check for other</span></div><div class="line">        <span class="comment">// permissions this app might request</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>注意：每次需要权限时，都需要显示请求调用，即使你已经获得的同权限组的其他权限。另外，权限分组处理的机制在将来的Android发型版本中有可能更改。因此你的App不应该依赖所需的权限在或者不在同一个权限组里。</p>
</blockquote>
<p>参考：</p>
<ul>
<li><a href="http://developer.android.com/training/permissions/requesting.html" target="_blank" rel="external">Requesting Permissions at Run Time</a></li>
<li><a href="http://developer.android.com/training/permissions/best-practices.html" target="_blank" rel="external">Permissions Best Practices</a></li>
</ul>
<p>##Swift Access Control - 潘君<br>(未完待续)</p>
<ul>
<li><p>三个级别</p>
<ul>
<li>Public</li>
<li>Internal</li>
<li><p>Private</p>
<p>大部分默认是internal</p>
</li>
</ul>
</li>
<li><p>可应用于</p>
<ul>
<li>Module<ul>
<li>application</li>
<li>framework</li>
</ul>
</li>
<li>source file<ul>
<li>properties</li>
<li>types</li>
<li>functions</li>
<li>and so on（苹果文档这个太二了）</li>
</ul>
</li>
</ul>
</li>
<li><p>准则</p>
<ul>
<li>public变量不能定义为internal或者private的类型</li>
<li>函数的访问权限不能高于参数和返回值</li>
</ul>
</li>
<li><p>应用场景</p>
<ul>
<li>Single-Target Apps    Internal</li>
<li>Frameworks  Public</li>
<li>Unit Test Targets      @testable<img src="./1446175520419.png" alt="Alt text"></li>
</ul>
</li>
</ul>
<ul>
<li><p>会级联影响 例如修饰了type 同时也会影响type的members</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SomePublicClass</span> </span>&#123;          <span class="comment">// explicitly public class</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">var</span> somePublicProperty = <span class="number">0</span>    <span class="comment">// explicitly public class member</span></div><div class="line">    <span class="keyword">var</span> someInternalProperty = <span class="number">0</span>         <span class="comment">// implicitly internal class member</span></div><div class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">somePrivateMethod</span><span class="params">()</span></span> &#123;&#125;  <span class="comment">// explicitly private class member</span></div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeInternalClass</span> </span>&#123;               <span class="comment">// implicitly internal class</span></div><div class="line">    <span class="keyword">var</span> someInternalProperty = <span class="number">0</span>         <span class="comment">// implicitly internal class member</span></div><div class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">somePrivateMethod</span><span class="params">()</span></span> &#123;&#125;  <span class="comment">// explicitly private class member</span></div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">SomePrivateClass</span> </span>&#123;        <span class="comment">// explicitly private class</span></div><div class="line">    <span class="keyword">var</span> somePrivateProperty = <span class="number">0</span>          <span class="comment">// implicitly private class member</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">somePrivateMethod</span><span class="params">()</span></span> &#123;&#125;          <span class="comment">// implicitly private class member</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>Function</p>
</li>
<li><p>Tuple</p>
<ul>
<li>取元素中访问level最小的为准</li>
<li>例如 （PrivateClass, InternalClass） 则取private</li>
</ul>
</li>
<li><p>Enumeration </p>
<ul>
<li>一样</li>
</ul>
</li>
<li><p>class</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">someMethod</span><span class="params">()</span></span> &#123;&#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">internal</span> <span class="class"><span class="keyword">class</span> <span class="title">B</span>: <span class="title">A</span> </span>&#123;</div><div class="line">    <span class="keyword">override</span> <span class="keyword">internal</span> <span class="function"><span class="keyword">func</span> <span class="title">someMethod</span><span class="params">()</span></span> &#123;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/移动组周分享/">移动组周分享</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-英语" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/23/英语/" class="article-date">
      <time datetime="2015-10-23T10:30:00.000Z" itemprop="datePublished">2015-10-23</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/23/英语/">英语</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="参与开源提高英语读写-王胜"><a href="#参与开源提高英语读写-王胜" class="headerlink" title="参与开源提高英语读写 - 王胜"></a>参与开源提高英语读写 - 王胜</h2><h3 id="阅读能力"><a href="#阅读能力" class="headerlink" title="阅读能力"></a>阅读能力</h3><ul>
<li>泡开源论坛，查看讨论</li>
<li>阅读源代码包括注解、代码提交说明</li>
</ul>
<blockquote>
<p>前期泡论坛，看注解、提交说明时需耐下性子，借助翻译工具。时间长了，久而久之，词汇量就上升了。</p>
</blockquote>
<h3 id="书写能力"><a href="#书写能力" class="headerlink" title="书写能力"></a>书写能力</h3><ul>
<li>试图修复bug或者提交建议</li>
<li>尝试翻译开源软件的使用手册</li>
</ul>
<blockquote>
<p>经历了阅读阶段的词汇量的积累，可以再通过书写来巩固词汇量的运用。此阶段要拥有儿童学语言的勇气，不要担心自己写错，被其他参与开源的人看到笑话。</p>
</blockquote>
<h2 id="MOOC-上手-曾铭"><a href="#MOOC-上手-曾铭" class="headerlink" title="MOOC 上手 - 曾铭"></a>MOOC 上手 - 曾铭</h2><h3 id="Massive-Open-Online-Courses-大型开放式网络课程"><a href="#Massive-Open-Online-Courses-大型开放式网络课程" class="headerlink" title="Massive Open Online Courses 大型开放式网络课程"></a>Massive Open Online Courses 大型开放式网络课程</h3><ul>
<li>Coursera</li>
<li>Udacity</li>
<li>edX</li>
<li>中国大学MOOC</li>
</ul>
<h3 id="上手感受"><a href="#上手感受" class="headerlink" title="上手感受"></a>上手感受</h3><ul>
<li>视频教程 vs 正规课程</li>
<li>视频教程：目标不清晰、散漫不专注、孤单、没有回顾总结，易放弃（遗忘、注意力转移）</li>
<li>正规课程：目标清晰（结课证）、专注（每周测验）、作业互评、论坛讨论，易放弃（压力）</li>
<li>专业教育的未来（非基本教育）</li>
</ul>
<h3 id="建议"><a href="#建议" class="headerlink" title="建议"></a>建议</h3><ul>
<li>根据兴趣上手，不必贪多，先坚持完成 1 门课(4-6h/w 并不容易)</li>
<li>只对视频教程感兴趣？为网易公开课点个赞</li>
</ul>
<p>##dispatch_sync的坑 - 潘君</p>
<ul>
<li><p>官方文档</p>
<figure class="highlight vhdl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">dispatch_sync</div><div class="line">Submits a <span class="keyword">block</span> object <span class="keyword">for</span> execution <span class="keyword">on</span> a dispatch queue <span class="keyword">and</span> waits <span class="keyword">until</span> that <span class="keyword">block</span> completes.</div><div class="line"></div><div class="line">。。。。。</div><div class="line"></div><div class="line">As an optimization, this <span class="keyword">function</span> invokes the <span class="keyword">block</span> <span class="keyword">on</span> the current thread <span class="keyword">when</span> possible.</div></pre></td></tr></table></figure>
</li>
<li><p>dispatch_sync 卡页面, 原因见官方说明最后一句，优化搞的鬼</p>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">写 <span class="comment">(删除操作)</span> dispatch_sy<span class="symbol">nc</span></div></pre></td></tr></table></figure>
</li>
<li><p>队列分为两种，一种是Serial Dispatch Queue，还有一种是Concurrent Dispatch Queue。</p>
</li>
<li><p>xun核心模块决定线程数</p>
</li>
</ul>
<p>参考资料：</p>
<ul>
<li><a href="http://zhangbuhuai.com/2015/04/11/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3dispatch_sync/" target="_blank" rel="external">深入理解dispatch_sync</a></li>
<li><a href="http://stackoverflow.com/questions/13972048/dispatch-sync-always-scheduling-a-block-on-main-thread" target="_blank" rel="external">dispatch_sync always scheduling a block on Main Thread</a></li>
</ul>
<h1 id="英语，程序员"><a href="#英语，程序员" class="headerlink" title="英语，程序员"></a>英语，程序员</h1><h3 id="网站"><a href="#网站" class="headerlink" title="网站"></a>网站</h3><ul>
<li><p><a href="http://www.italki.com" target="_blank" rel="external">iTalki</a></p>
<blockquote>
<p>语言交换及专业老师订课辅导的网站</p>
</blockquote>
</li>
<li><p><a href="https://www.youtube.com/channel/UCwA7Aepp7nRUJNa8roQ-6Bw" target="_blank" rel="external">YouTube一个订阅号</a></p>
<blockquote>
<p>比较有吸引力的老师，他的同事频道也很不错</p>
</blockquote>
</li>
<li><p><a href="http://www.raywenderlich.com/" target="_blank" rel="external">rayWenderlich</a></p>
<blockquote>
<p>主要是iOS方面的，安卓覆盖一些。涵盖文字、视频、播客三方面</p>
</blockquote>
</li>
</ul>
<h3 id="APP"><a href="#APP" class="headerlink" title="APP"></a>APP</h3><ul>
<li><p>飞鱼口语</p>
<blockquote>
<p>国内开发的一个及时练习口语的APP，主要是方便</p>
</blockquote>
</li>
<li><p>每日英语听力（欧陆词典推出的）</p>
<blockquote>
<p>radio 模块很不错，资源不算多但比较有质量。</p>
</blockquote>
</li>
<li><p>Podcast</p>
<ul>
<li>圆桌会议（RoundTable）</li>
<li>rayWenderlich （程序员职业发展及新技术点探讨，英式口语）</li>
</ul>
</li>
</ul>
<h3 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h3><ul>
<li>Skype 和志同道合的人交流，练习口语 </li>
</ul>
<h3 id="EF-Education"><a href="#EF-Education" class="headerlink" title="EF Education"></a>EF Education</h3><ul>
<li><a href="http://ec.ef.com" target="_blank" rel="external">网站地址</a><blockquote>
<p>想小试牛刀的记得想我拿一下账号密码</p>
</blockquote>
</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/移动组周分享/">移动组周分享</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-谈谈未来，职业规划，梦想" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/16/谈谈未来，职业规划，梦想/" class="article-date">
      <time datetime="2015-10-16T10:30:00.000Z" itemprop="datePublished">2015-10-16</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/16/谈谈未来，职业规划，梦想/">谈谈未来、梦想、职业规划</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="实现时间自由-王胜"><a href="#实现时间自由-王胜" class="headerlink" title="实现时间自由 - 王胜"></a>实现时间自由 - 王胜</h2><ul>
<li>近期技术打工、为公司技术出一份力</li>
<li>伺机合伙创业<ul>
<li>自己作为技术的Partner</li>
<li>需求靠谱的产品经理合伙创业</li>
<li>如果有靠谱的市场/资方人事的合伙人就更完美了</li>
</ul>
</li>
<li>财富自由和时间自由后<ul>
<li>周游开拓视野</li>
<li>做一些自己感兴趣的东西，不求有市场，只求自己感觉有价值，好玩就行</li>
</ul>
</li>
</ul>
<h2 id="品质生活-吴明"><a href="#品质生活-吴明" class="headerlink" title="品质生活 - 吴明"></a>品质生活 - 吴明</h2><ul>
<li>短期目标<ul>
<li>学习和开发使用Material Design</li>
</ul>
</li>
<li>长期目标：以下目标之一<ul>
<li>技术专家</li>
<li>管理和技术</li>
<li>换行业</li>
</ul>
</li>
<li>第二职业<ul>
<li>除工作之外培养第二职业</li>
<li>第二职业主要兴趣爱好方向</li>
<li>不求工资和市场价值高低，只追求兴趣快乐</li>
</ul>
</li>
</ul>
<h2 id="兴趣主导，快乐很重要-杨志平"><a href="#兴趣主导，快乐很重要-杨志平" class="headerlink" title="兴趣主导，快乐很重要 - 杨志平"></a>兴趣主导，快乐很重要 - 杨志平</h2><ul>
<li><p>兴趣</p>
<ul>
<li>在失去当前工作兴趣之前，不会转行</li>
<li>职业规划随兴趣走</li>
</ul>
</li>
<li><p>肉身翻墙</p>
<ul>
<li>出去走一遭，趁年轻（工作或打工旅行）</li>
<li>去牛逼公司镀金</li>
</ul>
</li>
<li><p>终极目标</p>
<ul>
<li>年轻时，向往自由工作者的工作方式，能够养活自己的游行工作方式</li>
<li>适当年纪收心回归平常心（保持感兴趣的工作即可）</li>
</ul>
</li>
</ul>
<h2 id="一步一个脚印，顺其自然-王进"><a href="#一步一个脚印，顺其自然-王进" class="headerlink" title="一步一个脚印，顺其自然-王进"></a>一步一个脚印，顺其自然-王进</h2><ul>
<li><p>近期目标，一步一个脚印，不断提高自己</p>
<ul>
<li>做好现在工作，打下坚实的基础</li>
<li>专注于技术，近期不考虑创业，转行等</li>
<li>顺其自然，当未来出现创业等机会，自己也准备好了，也不错过</li>
</ul>
</li>
<li><p>未来愿景：</p>
<ul>
<li>看好移动端的未来发展，以会后向智能家居，物联网方向发展</li>
<li>最终希望能在未来能有时间与机会出去走走</li>
</ul>
</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/移动组周分享/">移动组周分享</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-单位和度量" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/09/25/单位和度量/" class="article-date">
      <time datetime="2015-09-25T10:30:00.000Z" itemprop="datePublished">2015-09-25</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/25/单位和度量/">单位和度量</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>####Android基本单位规范  </p>
<p>#####单位和度量</p>
<ul>
<li>像素密度<ul>
<li>每英寸的像素数被称为“像素密度”。</li>
<li>DPI =屏幕宽度（或高度）像素/屏幕宽度（或高度）英寸</li>
<li>mdpi-160dpi,<br>hdpi-480x800-240dpi,<br>xhdpi-720x1280-320dpi,<br>xxhdpi-1080x1920-480dpi</li>
<li>mipmap-hdpi,<br>  drawable-hdpi区别:用mipmap会缩放图片并优化性能。</li>
<li><img src="http://www.2cto.com/uploadfile/Collfiles/20150718/2015071808335256.png" alt="MacDown Screenshot"></li>
</ul>
</li>
<li>密度独立像素<ul>
<li>“密度独立”是指在屏幕上用不同的密度来统一的显示用户界面元素</li>
<li><img src="http://wiki.jikexueyuan.com/project/material-design/images/4_5.png" alt="MacDown Screenshot"></li>
<li>1dp 和 160 dpi 屏幕的一个物理像素相等。计算 dp 的方法：<br><code><em>dp =(宽度像素</em>160)/ dpi**</code></li>
</ul>
</li>
<li><p>可扩展像素（sp）</p>
<ul>
<li>在为安卓系统开发程序时，可扩展的像素（SP）提供和DP一样的功能，但只是在字体上。一个 SP 的默认值和 DP 上的默认值一样。</li>
<li>density==scaledDensity,即1sp=1dp，</li>
<li><p>还是采用dp替代sp,<a href="http://www.oschina.net/question/272860_70761" target="_blank" rel="external">为什么</a></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">float</span> <span class="title">applyDimension</span>(<span class="params"><span class="keyword">int</span> unit, <span class="keyword">float</span> <span class="keyword">value</span>,DisplayMetrics metrics</span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">switch</span> (unit) &#123;</div><div class="line">    <span class="keyword">case</span> COMPLEX_UNIT_PX:</div><div class="line">        <span class="keyword">return</span> <span class="keyword">value</span>;</div><div class="line">    <span class="keyword">case</span> COMPLEX_UNIT_DIP:</div><div class="line">        <span class="keyword">return</span> <span class="keyword">value</span> * metrics.density;</div><div class="line">    <span class="keyword">case</span> COMPLEX_UNIT_SP:</div><div class="line">        <span class="keyword">return</span> <span class="keyword">value</span> * metrics.scaledDensity;</div><div class="line">    <span class="keyword">case</span> COMPLEX_UNIT_PT:</div><div class="line">        <span class="keyword">return</span> <span class="keyword">value</span> * metrics.xdpi * (<span class="number">1.0</span>f/<span class="number">72</span>);</div><div class="line">    <span class="keyword">case</span> COMPLEX_UNIT_IN:</div><div class="line">        <span class="keyword">return</span> <span class="keyword">value</span> * metrics.xdpi;</div><div class="line">    <span class="keyword">case</span> COMPLEX_UNIT_MM:</div><div class="line">        <span class="keyword">return</span> <span class="keyword">value</span> * metrics.xdpi * (<span class="number">1.0</span>f/<span class="number">25.4</span>f);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>pt(磅)，标准的长度单位，1pt＝1/72英寸，用于印刷业,买蛋糕的时候挺说最多</p>
</li>
<li>em,em指字体高,1em=16px,任意浏览器的默认字体高都是16px.</li>
</ul>
<h5 id="字体排版"><a href="#字体排版" class="headerlink" title="字体排版"></a>字体排版</h5><ul>
<li>字体排版的缩放和基本样式<ul>
<li>同时使用过多的字体尺寸和样式可以很轻易的毁掉布局,最基本的样式集合就是基于 12、14、16、20 和 34 号的字体排版缩放,以下Google建议字体尺寸:<br><img src="http://7xn0ue.com1.z0.glb.clouddn.com/style_typography_style1.png" alt="MacDown Screenshot"></li>
</ul>
</li>
<li>基本色/色彩对比度<ul>
<li>最基本的常识是，相同颜色的背景和文字是很难阅读的。但有些人不知道的是，带有过强对比度的文本会有些炫目，同样难以阅读。</li>
<li>文本应当满足对比度7:1的是最适合阅读,最低的对比度4.5:1(依据明度计算),</li>
<li>Google对比度建议:<img src="http://wiki.jikexueyuan.com/project/material-design/images/style-typography-16_large_mdpi.png" alt="MacDown Screenshot"></li>
</ul>
</li>
<li>行高<ul>
<li>只有“主体”、“次要标题”、“大纲”等类似的样式中才允许使用自动换行。其它所有样式应当以单行形式出现。</li>
<li><img src="http://7xn0ue.com1.z0.glb.clouddn.com/style_typography_lineheight_tall1.png" alt="MacDown Screenshot"></li>
<li>For all styles, line height is 0.1em larger than the English-like languages. English and English-like languages mostly use a portion of the em box, often the lower portion below the x-height. Chinese, Japanese, and Korean (CJK) ideographic characters use the entire em box. Characters in tall languages often have long descenders and/or ascenders. To achieve the same design intention as English for CJK and to avoid potential text clipping between two lines next to each other for tall languages, the line height needs to be larger than in English for tall and dense languages.</li>
</ul>
</li>
<li>换行规则/连字符<ul>
<li>正确：<br><img src="http://wiki.jikexueyuan.com/project/material-design/images/style-typography-32_large_mdpi.png" alt="MacDown Screenshot"></li>
<li>错误<br><img src="http://wiki.jikexueyuan.com/project/material-design/images/style-typography-33_large_mdpi.png" alt="MacDown Screenshot"></li>
</ul>
</li>
<li><p>每行字符</p>
<ul>
<li><a href="http://baymard.com/blog/line-length-readability" target="_blank" rel="external">每行应当保持在50-60个字符左右</a></li>
<li>太长,用户的眼睛将难以找到在文本上对焦。这是因为过长的文字导致用户难以判断一行的起始点，甚至在大段文字中出现读错行的现象</li>
<li>太短，会导致眼睛来回扫视过于频繁，破坏阅读的节奏。过短的内容还会给人压力，导致用户完成本行阅读前过早跳转到下一行阅读(因此会错过潜在的重要信息)</li>
<li><p><img src="http://7xn0ue.com1.z0.glb.clouddn.com/style_typography_styles_linelengths1.png" alt="MacDown Screenshot"></p>
<ul>
<li><img src="http://7xn0ue.com1.z0.glb.clouddn.com/style_typography_styles_linelengths2.png" alt="MacDown Screenshot"></li>
</ul>
</li>
</ul>
</li>
<li>字间距<ul>
<li><img src="http://7xn0ue.com1.z0.glb.clouddn.com/style_typography_styles_tracking.png" alt="MacDown Screenshot"></li>
<li></li>
</ul>
</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-那些年我们用过的第三方库" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/08/21/那些年我们用过的第三方库/" class="article-date">
      <time datetime="2015-08-21T12:00:00.000Z" itemprop="datePublished">2015-08-21</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/21/那些年我们用过的第三方库/">那些年我们用过的第三方库</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="SnapKit（Masonry）-的使用-杨志平"><a href="#SnapKit（Masonry）-的使用-杨志平" class="headerlink" title="SnapKit（Masonry） 的使用 - 杨志平"></a>SnapKit（Masonry） 的使用 - 杨志平</h2><blockquote>
<p>这两个库的用法都是差不多的，只是由两个不同的人来主导开源  <br><br><strong><a href="https://github.com/SnapKit/SnapKit" target="_blank" rel="external">SnapKit</a></strong>是Swift版 <br><br><strong><a href="https://github.com/SnapKit/Masonry" target="_blank" rel="external">Masonry</a></strong>是OC版    </p>
<p>自动布局及交互式编程是iOS开发的趋势，同时Swift也会在不久将来替换OC语言。所以现在的iOS开发者可以开始学习Swift2.0 以及应用 Autolayout 来编程</p>
</blockquote>
<h3 id="代码对比（概况了解）"><a href="#代码对比（概况了解）" class="headerlink" title="代码对比（概况了解）"></a>代码对比（概况了解）</h3><h5 id="开始前OC原生布局代码"><a href="#开始前OC原生布局代码" class="headerlink" title="开始前OC原生布局代码"></a>开始前OC原生布局代码</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="string">UIView</span> <span class="meta">*superview</span> <span class="string">=</span> <span class="string">self;</span></div><div class="line"></div><div class="line"><span class="string">UIView</span> <span class="meta">*view1</span> <span class="string">=</span> <span class="string">[[UIView</span> <span class="string">alloc]</span> <span class="string">init];</span></div><div class="line"><span class="string">view1.translatesAutoresizingMaskIntoConstraints</span> <span class="string">=</span> <span class="literal">NO</span><span class="string">;</span></div><div class="line"><span class="string">view1.backgroundColor</span> <span class="string">=</span> <span class="string">[UIColor</span> <span class="string">greenColor];</span></div><div class="line"><span class="string">[superview</span> <span class="attr">addSubview:view1];</span></div><div class="line"></div><div class="line"><span class="string">UIEdgeInsets</span> <span class="string">padding</span> <span class="string">=</span> <span class="string">UIEdgeInsetsMake(10,</span> <span class="number">10</span><span class="string">,</span> <span class="number">10</span><span class="string">,</span> <span class="number">10</span><span class="string">);</span></div><div class="line"></div><div class="line"><span class="string">[superview</span> <span class="attr">addConstraints:@[</span></div><div class="line"></div><div class="line">   <span class="string">//view1</span> <span class="string">constraints</span></div><div class="line">   <span class="string">[NSLayoutConstraint</span> <span class="attr">constraintWithItem:view1</span></div><div class="line"><span class="attr">                                attribute:</span><span class="string">NSLayoutAttributeTop</span></div><div class="line"><span class="attr">                                relatedBy:</span><span class="string">NSLayoutRelationEqual</span></div><div class="line"><span class="attr">                                   toItem:</span><span class="string">superview</span></div><div class="line"><span class="attr">                                attribute:</span><span class="string">NSLayoutAttributeTop</span></div><div class="line"><span class="attr">                               multiplier:</span><span class="number">1.0</span></div><div class="line"><span class="attr">                                 constant:</span><span class="string">padding.top],</span></div><div class="line"></div><div class="line">   <span class="string">[NSLayoutConstraint</span> <span class="attr">constraintWithItem:view1</span></div><div class="line"><span class="attr">                                attribute:</span><span class="string">NSLayoutAttributeLeft</span></div><div class="line"><span class="attr">                                relatedBy:</span><span class="string">NSLayoutRelationEqual</span></div><div class="line"><span class="attr">                                   toItem:</span><span class="string">superview</span></div><div class="line"><span class="attr">                                attribute:</span><span class="string">NSLayoutAttributeLeft</span></div><div class="line"><span class="attr">                               multiplier:</span><span class="number">1.0</span></div><div class="line"><span class="attr">                                 constant:</span><span class="string">padding.left],</span></div><div class="line"></div><div class="line">   <span class="string">[NSLayoutConstraint</span> <span class="attr">constraintWithItem:view1</span></div><div class="line"><span class="attr">                                attribute:</span><span class="string">NSLayoutAttributeBottom</span></div><div class="line"><span class="attr">                                relatedBy:</span><span class="string">NSLayoutRelationEqual</span></div><div class="line"><span class="attr">                                   toItem:</span><span class="string">superview</span></div><div class="line"><span class="attr">                                attribute:</span><span class="string">NSLayoutAttributeBottom</span></div><div class="line"><span class="attr">                               multiplier:</span><span class="number">1.0</span></div><div class="line"><span class="attr">                                 constant:</span><span class="bullet">-padding.bottom],</span></div><div class="line"></div><div class="line">   <span class="string">[NSLayoutConstraint</span> <span class="attr">constraintWithItem:view1</span></div><div class="line"><span class="attr">                                attribute:</span><span class="string">NSLayoutAttributeRight</span></div><div class="line"><span class="attr">                                relatedBy:</span><span class="string">NSLayoutRelationEqual</span></div><div class="line"><span class="attr">                                   toItem:</span><span class="string">superview</span></div><div class="line"><span class="attr">                                attribute:</span><span class="string">NSLayoutAttributeRight</span></div><div class="line"><span class="attr">                               multiplier:</span><span class="number">1</span></div><div class="line"><span class="attr">                                 constant:</span><span class="bullet">-padding.right],</span></div><div class="line">	<span class="string">]];</span></div></pre></td></tr></table></figure>
<h5 id="使用Masonry"><a href="#使用Masonry" class="headerlink" title="使用Masonry"></a>使用Masonry</h5><p>精简</p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">UIEdgeInsets padding = UIEdgeInsetsMake(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line"></div><div class="line">[view1 mas_makeConstraints:^(MASConstraintMaker *make) &#123;</div><div class="line">   make.<span class="built_in">top</span>.equalTo(superview.mas_top).<span class="built_in">with</span>.offset(padding.<span class="built_in">top</span>); //<span class="built_in">with</span> 	is an optional semantic filler</div><div class="line">	make.<span class="built_in">left</span>.equalTo(superview.mas_left).<span class="built_in">with</span>.offset(padding.<span class="built_in">left</span>);</div><div class="line">	make.<span class="built_in">bottom</span>.equalTo(superview.mas_bottom).<span class="built_in">with</span>.offset(-	padding.<span class="built_in">bottom</span>);</div><div class="line">	make.<span class="built_in">right</span>.equalTo(superview.mas_right).<span class="built_in">with</span>.offset(-padding.<span class="built_in">right</span>);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p>更加精简</p>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[view1 mas_makeConstraints:^(<span class="name">MASConstraintMaker</span> *make) &#123;</div><div class="line"> 	 	 make.edges.equalTo(<span class="name">superview</span>).with.insets(<span class="name">padding</span>)<span class="comment">;</span></div><div class="line">&#125;]<span class="comment">;</span></div></pre></td></tr></table></figure>
<h5 id="同理使用SnapKit"><a href="#同理使用SnapKit" class="headerlink" title="同理使用SnapKit"></a>同理使用SnapKit</h5><p>精简</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">let box = UIView()</div><div class="line">superview.addSubview(box)</div><div class="line"></div><div class="line">box<span class="selector-class">.snp_makeConstraints</span> &#123; (make) -&gt; Void <span class="keyword">in</span></div><div class="line">	make<span class="selector-class">.top</span><span class="selector-class">.equalTo</span>(superview).offset(<span class="number">20</span>)</div><div class="line">	make<span class="selector-class">.left</span><span class="selector-class">.equalTo</span>(superview).offset(<span class="number">20</span>)</div><div class="line">	make<span class="selector-class">.bottom</span><span class="selector-class">.equalTo</span>(superview).offset(-<span class="number">20</span>)</div><div class="line">   	make<span class="selector-class">.right</span><span class="selector-class">.equalTo</span>(superview).offset(-<span class="number">20</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>更加精简</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">box<span class="selector-class">.snp_makeConstraints</span> &#123; (make) -&gt; Void <span class="keyword">in</span></div><div class="line">   	make<span class="selector-class">.edges</span><span class="selector-class">.equalTo</span>(superview).inset(UIEdgeInsetsMake(<span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>))</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="如何使用-amp-amp-原理"><a href="#如何使用-amp-amp-原理" class="headerlink" title="如何使用 &amp;&amp; 原理"></a>如何使用 &amp;&amp; 原理</h3><h4 id="常见的约束类型对比"><a href="#常见的约束类型对比" class="headerlink" title="常见的约束类型对比"></a>常见的约束类型对比</h4><table>
<thead>
<tr>
<th>ViewAttribute</th>
<th>NSLayoutAttribute</th>
</tr>
</thead>
<tbody>
<tr>
<td>view.snp_left</td>
<td>NSLayoutAttribute.Left</td>
</tr>
<tr>
<td>view.snp_right</td>
<td>NSLayoutAttribute.Right</td>
</tr>
<tr>
<td>view.snp_top</td>
<td>NSLayoutAttribute.Top</td>
</tr>
<tr>
<td>view.snp_bottom</td>
<td>NSLayoutAttribute.Bottom</td>
</tr>
<tr>
<td>view.snp_leading</td>
<td>NSLayoutAttribute.Leading</td>
</tr>
<tr>
<td>view.snp_trailing</td>
<td>NSLayoutAttribute.Trailing</td>
</tr>
<tr>
<td>view.snp_width</td>
<td>NSLayoutAttribute.Width</td>
</tr>
<tr>
<td>view.snp_height</td>
<td>NSLayoutAttribute.Height</td>
</tr>
<tr>
<td>view.snp_centerX</td>
<td>NSLayoutAttribute.CenterX</td>
</tr>
<tr>
<td>view.snp_centerY</td>
<td>NSLayoutAttribute.CenterY</td>
</tr>
<tr>
<td>view.snp_baseline</td>
<td>NSLayoutAttribute.Baseline</td>
</tr>
</tbody>
</table>
<h4 id="常见的用法"><a href="#常见的用法" class="headerlink" title="常见的用法"></a>常见的用法</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">make<span class="selector-class">.top</span><span class="selector-class">.equalTo</span>(<span class="number">42</span>)</div><div class="line">make<span class="selector-class">.lessThanOrEqualTo</span><span class="selector-class">.equalTo</span>(SuperView)</div><div class="line">make<span class="selector-class">.top</span><span class="selector-class">.equalTo</span>(SuperView)</div><div class="line">make<span class="selector-class">.size</span><span class="selector-class">.equalTo</span>(CGSizeMake(<span class="number">50</span>, <span class="number">100</span>))</div><div class="line">make<span class="selector-class">.edges</span><span class="selector-class">.equalTo</span>(UIEdgeInsetsMake(<span class="number">10</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">0</span>))</div><div class="line">make<span class="selector-class">.left</span><span class="selector-class">.equalTo</span>(view).offset(UIEdgeInsetsMake(<span class="number">10</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">0</span>))</div><div class="line"></div><div class="line">make<span class="selector-class">.height</span><span class="selector-class">.equalTo</span>(OtherView).offset(<span class="number">10</span>)</div><div class="line">make<span class="selector-class">.trailing</span><span class="selector-class">.equalTo</span>(OtherView.snp_trailing).offset(<span class="number">10</span>)</div><div class="line">make<span class="selector-class">.bottom</span><span class="selector-class">.equalTo</span>(-<span class="number">20</span>).priority(<span class="number">250</span>)</div></pre></td></tr></table></figure>
<h4 id="对比交互式编程的约束布局"><a href="#对比交互式编程的约束布局" class="headerlink" title="对比交互式编程的约束布局"></a>对比交互式编程的约束布局</h4><p><img src="https://cloud.githubusercontent.com/assets/9360037/9401926/1e572316-4809-11e5-9a96-430e688cda85.png" alt="image"></p>
<hr>
<h2 id="JSONModel-for-swift-的探索-曾铭"><a href="#JSONModel-for-swift-的探索-曾铭" class="headerlink" title="JSONModel for swift 的探索 - 曾铭"></a>JSONModel for swift 的探索 - 曾铭</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 可在 Playground 中尝试</span></div><div class="line"><span class="keyword">import</span> Foundation</div><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// 基本的类型转换</span></div><div class="line"><span class="keyword">let</span> a:<span class="type">String</span> = <span class="string">""</span></div><div class="line"><span class="keyword">let</span> b = <span class="string">""</span></div><div class="line"><span class="keyword">var</span> <span class="built_in">c</span>:<span class="type">String</span>? = <span class="literal">nil</span></div><div class="line"><span class="built_in">c</span> = <span class="string">"test"</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> d:<span class="type">String</span> = <span class="built_in">c</span> <span class="keyword">as</span> <span class="type">String</span>!</div><div class="line"><span class="keyword">var</span> e = <span class="type">Int</span>(<span class="built_in">c</span>!)</div><div class="line">e = <span class="type">Int</span>(<span class="string">"123"</span>)</div><div class="line"></div><div class="line"><span class="keyword">var</span> f = <span class="type">Int</span>(<span class="string">"123"</span>)!</div><div class="line"></div><div class="line"><span class="built_in">print</span>(<span class="string">"a type:<span class="subst">\(a.<span class="keyword">dynamicType</span>)</span>"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"b type:<span class="subst">\(b.<span class="keyword">dynamicType</span>)</span>"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"c type:<span class="subst">\(<span class="built_in">c</span>.<span class="keyword">dynamicType</span>)</span>"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"d type:<span class="subst">\(d.<span class="keyword">dynamicType</span>)</span>"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"e type:<span class="subst">\(e.<span class="keyword">dynamicType</span>)</span>"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"f type:<span class="subst">\(f.<span class="keyword">dynamicType</span>)</span>\n"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// KVC for NSObject</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">FooKVC</span> : <span class="title">NSObject</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> p1 : <span class="type">String</span> = <span class="string">"s"</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> fk1 = <span class="type">FooKVC</span>()</div><div class="line"></div><div class="line">fk1.p1</div><div class="line"></div><div class="line">fk1.setValue(<span class="string">"y"</span>, forKey: <span class="string">"p1"</span>)</div><div class="line"></div><div class="line">fk1.p1</div><div class="line"></div><div class="line"><span class="comment">// reflect for swift2.0</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">var</span> name = <span class="string">"namevalue"</span></div><div class="line">    <span class="keyword">var</span> age = <span class="number">123</span></div><div class="line">    <span class="keyword">var</span> some:(<span class="type">String</span>, <span class="type">Int</span>) = (<span class="string">"ming"</span>, <span class="number">2</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> a1 = <span class="type">A</span>()</div><div class="line"></div><div class="line">a1.age = <span class="number">456</span></div><div class="line"></div><div class="line">a1.age</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">let</span> r = <span class="type">Mirror</span>(reflecting: a1)</div><div class="line"><span class="keyword">for</span> <span class="built_in">c</span> <span class="keyword">in</span> r.children &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="built_in">c</span>.label.<span class="keyword">dynamicType</span>)</div><div class="line">    <span class="built_in">print</span>(<span class="built_in">c</span>.label)</div><div class="line">    <span class="built_in">print</span>(<span class="built_in">c</span>.value.<span class="keyword">dynamicType</span>)</div><div class="line">    <span class="built_in">print</span>(<span class="built_in">c</span>.value)</div><div class="line">    <span class="built_in">print</span>(<span class="string">"==="</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>KVO for NSObject 略, 注意监听者与被监听者都要是 NSObject 子类</li>
</ul>
<h3 id="JSONModel-for-swift"><a href="#JSONModel-for-swift" class="headerlink" title="JSONModel for swift?"></a>JSONModel for swift?</h3><p>&gt;<br>NB: Swift works in a different way under the hood than Objective-C. Therefore I can’t find a way to re-create JSONModel in Swift. JSONModel in Objective-C works in Swift apps through CocoaPods or as an imported Objective-C library.</p>
<h3 id="JSONModel-做的事情"><a href="#JSONModel-做的事情" class="headerlink" title="JSONModel 做的事情"></a>JSONModel 做的事情</h3><ul>
<li>String(NSData) -&gt; Dictionary(Array)</li>
<li>Dictionary(Array) -&gt; Model-Object</li>
</ul>
<h3 id="对应实现"><a href="#对应实现" class="headerlink" title="对应实现"></a>对应实现</h3><ul>
<li>容易:<ul>
<li>swift 容器取值的坑 <a href="https://github.com/SwiftyJSON/SwiftyJSON" target="_blank" rel="external">https://github.com/SwiftyJSON/SwiftyJSON</a></li>
</ul>
</li>
<li>swift 反射不支持赋值，没办法<ul>
<li>通过 NSObject KVC 解决 <a href="https://github.com/PonyCui/PPJSONSerialization" target="_blank" rel="external">https://github.com/PonyCui/PPJSONSerialization</a></li>
<li>临时方案？</li>
</ul>
</li>
</ul>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li><a href="https://github.com/leemorgan/Swift-KVC/blob/master/KVC%20Playground.playground/Contents.swift" target="_blank" rel="external">Swift-KVC (just <code>valueForKey:</code>)</a></li>
<li><a href="http://www.jianshu.com/p/e036e53d240e" target="_blank" rel="external">Swift: KVO 注意事项和属性观察器</a></li>
<li><a href="http://stackoverflow.com/questions/24844681/list-of-classs-properties-in-swift" target="_blank" rel="external">List of class’s properties in swift</a></li>
</ul>
<hr>
<h2 id="RATreeView的简单使用-张超耀"><a href="#RATreeView的简单使用-张超耀" class="headerlink" title="RATreeView的简单使用 - 张超耀"></a>RATreeView的简单使用 - 张超耀</h2><h3 id="RATreeView-实现树形结构的TableView；点击每个cell，都可以展开出现新的cell；可以自定义树的层数"><a href="#RATreeView-实现树形结构的TableView；点击每个cell，都可以展开出现新的cell；可以自定义树的层数" class="headerlink" title="RATreeView:实现树形结构的TableView；点击每个cell，都可以展开出现新的cell；可以自定义树的层数"></a>RATreeView:实现树形结构的TableView；点击每个cell，都可以展开出现新的cell；可以自定义树的层数</h3><p><img src="https://camo.githubusercontent.com/87d3db881cf57dba674a89a6e1460c00277245b3/68747470733a2f2f7261772e6769746875622e636f6d2f417567757374796e69616b2f524154726565566965772f6d61737465722f53637265656e732f616e696d6174696f6e2e676966" alt=""></p>
<h3 id="主要方法介绍"><a href="#主要方法介绍" class="headerlink" title="主要方法介绍"></a>主要方法介绍</h3><ul>
<li>cell的高度<br><code>-(CGFloat)treeView:(RATreeView *)treeView heightForRowForItem:(id)item treeNodeInfo:(RATreeNodeInfo *)treeNodeInfo</code></li>
<li>这个函数决定是否可以展开，通过设定我们可以设置哪些单元格可以展开到下一层，哪些不可以展开<br><code>- (BOOL)treeView:(RATreeView *)treeView shouldExpandItem:(id)item treeNodeInfo:(RATreeNodeInfo *)treeNodeInfo</code> </li>
<li><p>这个看字面意识就理解了，在单元格显示之前（或者说将要显示时）我们可以做些设置，这里是设置相应深度的颜色背景<br><code>- (void)treeView:(RATreeView *)treeView willDisplayCell:(UITableViewCell *)cell forItem:(id)item treeNodeInfo:(RATreeNodeInfo *)treeNodeInfo</code></p>
</li>
<li><p>这里就是我们最熟悉的点击cell处理函数，看代码慢慢体会treeNodeInfo的使用，不想多说了<br><code>-(void)treeView:(RATreeView *)treeView didSelectRowForItem:(id)item treeNodeInfo:(RATreeNodeInfo *)treeNodeInfo</code></p>
</li>
<li>数据源处理，相当于UITableViewCell处理，关键还是理解treeNodeInfo概念<br><code>- (UITableViewCell *)treeView:(RATreeView *)treeView cellForItem:(id)item treeNodeInfo:(RATreeNodeInfo *)treeNodeInfo</code></li>
<li>返回每一层包含成员的个数，来制表<br><code>- (NSInteger)treeView:(RATreeView *)treeView numberOfChildrenOfItem:(id)item</code></li>
<li>返回cell对象<br><code>- (id)treeView:(RATreeView *)treeView child:(NSInteger)index ofItem:(id)item</code><h3 id="RATreeView-github"><a href="#RATreeView-github" class="headerlink" title="RATreeView - github"></a><a href="https://github.com/Augustyniak/RATreeView" target="_blank" rel="external">RATreeView - github</a></h3></li>
</ul>
<hr>
<h2 id="Facebook-开源的图片加载库Fresco-王胜"><a href="#Facebook-开源的图片加载库Fresco-王胜" class="headerlink" title="Facebook 开源的图片加载库Fresco - 王胜"></a>Facebook 开源的图片加载库Fresco - 王胜</h2><h3 id="Fresco诞生背景"><a href="#Fresco诞生背景" class="headerlink" title="Fresco诞生背景"></a>Fresco诞生背景</h3><p>为提高Android中图片的加载速度，一般的图片库都采用了三级缓存：Memory Cache、Disk Cache和Network。但是，Android的系统层是将物理内存平均分配给每一个App。这样每个App所分配的空间都是有限的，早起的android设备，每个App只被分配16MB空间，这样，如果App中使用大量的图片，那么很容易因OOM而Crashes掉。Facebook App正是大量使用图片的App，面临这个问题刻不容缓，所以他们历尽艰难，开发了Fresco图片加载库。 </p>
<h3 id="Fresco诞生过程"><a href="#Fresco诞生过程" class="headerlink" title="Fresco诞生过程"></a>Fresco诞生过程</h3><h4 id="内存区域分析："><a href="#内存区域分析：" class="headerlink" title="内存区域分析："></a>内存区域分析：</h4><ul>
<li><p>Java heap</p>
<p>每个厂商会为App分配一个固定尺寸的运行空间。所有的申请通过Java的new操作申请，操作相对安全，通过GC内存自动回收保证内存不被泄露。但不幸的时，GC不够精确化，回收得不够及时。因此还是会存在OOM。</p>
</li>
<li><p>Native heap</p>
<p>通过C或者C++可绕过Java虚拟机直接操作物理内存，但Java程序员习惯了GC的自动回收，很难操作C++的手动操作内存。</p>
</li>
<li><p>Ashmen</p>
<p>Android还有一块内存区域，叫Ashmen。这里的操作很像Nativew heap，但是这里是系统调用的。Java 应用程序是不能直接访问Ashmen的，但是一些例外的情况可以操作，图片就是一种例外。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">BitmapFactory.Options = <span class="keyword">new</span> BitmapFactory.Options();</div><div class="line">options.inPurgeable = <span class="keyword">true</span>;</div><div class="line">Bitmap bitmap = BitmapFactory.decodeByteArray(jpeg, <span class="number">0</span>, jpeg.length, options);</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="难点突破："><a href="#难点突破：" class="headerlink" title="难点突破："></a>难点突破：</h4><p>尽管发现了Purgeable bitmaps，但是这个解码的过程是在UI线程操作的，因此他们又采用了异步实现，并保证了UI线程不引用时，unpin的区域不会被释放。</p>
<h4 id="上层构建"><a href="#上层构建" class="headerlink" title="上层构建"></a>上层构建</h4><p>提供给上层调用时，采用了MVC的架构：</p>
<ul>
<li>Model：DraweeHierarchy</li>
<li>Control：DraweeControllers</li>
<li>View：DraweeViews</li>
</ul>
<h3 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h3><ol>
<li><p>gradle配置中添加库引用</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">compile</span> <span class="string">'com.facebook.fresco:fresco:0.6.1+'</span></div></pre></td></tr></table></figure>
</li>
<li><p>xml中添加组件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">com.facebook.drawee.view.SimpleDraweeView</span></span></div><div class="line">      <span class="attr">android:id</span>=<span class="string">"@+id/sdv"</span></div><div class="line">      <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">      <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">      <span class="attr">fresco:roundAsCircle</span>=<span class="string">"true"</span></div><div class="line">      <span class="attr">fresco:roundingBorderWidth</span>=<span class="string">"1dp"</span></div><div class="line">      <span class="attr">fresco:roundingBorderColor</span>=<span class="string">"#00ff00"</span></div></pre></td></tr></table></figure>
</li>
<li><p>代码中指定图片地址</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">SimpleDraweeView sdv = (SimpleDraweeView) findViewById(R.id.sdv);</div><div class="line">sdv.setImageURI(Uri.parse(<span class="string">"http://g.hiphotos.baidu.com/image/pic/item/2e2eb9389b504fc2b351980be7dde71190ef6db5.jpg"</span>));</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="参考资料："><a href="#参考资料：" class="headerlink" title="参考资料："></a>参考资料：</h3><ul>
<li><a href="https://code.facebook.com/posts/366199913563917/introducing-fresco-a-new-image-library-for-android/" target="_blank" rel="external">Fresco的由来</a></li>
<li><a href="http://github.com/facebook/fresco" target="_blank" rel="external">Fresco的源码托管</a></li>
<li><a href="http://fresco-cn.org/docs/index.html" target="_blank" rel="external">中文使用手册</a></li>
</ul>
<hr>
<p>#SIAlertView 阅读 - 潘君</p>
<ul>
<li>创建自定义alert view的流程</li>
</ul>
<p>自定义window-&gt;添加自定义view controller-&gt;定制view-&gt;view引用window</p>
<ul>
<li>@class<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@<span class="class"><span class="keyword">class</span> <span class="title">SIAlertView</span>;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>能不使用import的就不使用<br>用@class代替</p>
<ul>
<li><p>通知 和 Block</p>
</li>
<li><p>层级</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> <span class="built_in">UIWindowLevel</span> <span class="built_in">UIWindowLevelSIAlert</span> = <span class="number">1996.0</span>;  <span class="comment">// don't overlap system's alert</span></div><div class="line"><span class="keyword">const</span> <span class="built_in">UIWindowLevel</span> <span class="built_in">UIWindowLevelSIAlertBackground</span> = <span class="number">1985.0</span>; <span class="comment">// below the alert window</span></div></pre></td></tr></table></figure>
</li>
<li><p>UIViewTintAdjustmentMode<br>通过获取keyWindow的<code>UIViewTintAdjustmentMode</code>来设置alertWindow的<br>该属性能够设置tint的调整模式</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">typedef <span class="class"><span class="keyword">enum</span> &#123;</span></div><div class="line">     /<span class="regexp">/ 和父视图的一样</span></div><div class="line">     UIViewTintAdjustmentModeAutomatic,              </div><div class="line">     /<span class="regexp">/ 不对tintColor做任何修改</span></div><div class="line">     UIViewTintAdjustmentModeNormal,</div><div class="line">     /<span class="regexp">/ 在原有tintColor基础上变暗</span></div><div class="line">     UIViewTintAdjustmentModeDimmed,&#125;UIViewTintAdjustmentMode;</div></pre></td></tr></table></figure>
</li>
<li><p>iOS特有版本代码</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> __IPHONE_7_0</span></div><div class="line"><span class="comment">//some code </span></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line">此处填写iOS7才能运行的代码</div></pre></td></tr></table></figure>
</li>
<li><p>initialize</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">+ (<span class="keyword">void</span>)initialize</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">self</span> != [SIAlertView <span class="keyword">class</span>])</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">   </div><div class="line">    <span class="comment">// 默认值赋值</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">一些值放在+(<span class="keyword">void</span>)initialize；中赋值为默认值，这样不管通过何种方式初始化</div></pre></td></tr></table></figure>
</li>
<li><p>UIAppearance<br>SIAlertView *appearance = [self appearance];<br>UIView符合UIAppearence协议，能够全局修改所有实例的UI</p>
</li>
<li><p>调用Bundle中资源<br>[UIImage imageNamed:@”SIAlertView.bundle/button-default”]<br>bundle中资源的调用方法</p>
</li>
</ul>
<ul>
<li><p>_cmd<br>oc特有的方法，无法通过c语言获取</p>
</li>
<li><p>[self invalidateLayout]</p>
</li>
<li><p>合理利用循环引用</p>
</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (!<span class="keyword">self</span>.alertWindow) &#123;</div><div class="line">    <span class="built_in">UIWindow</span> *window = [[<span class="built_in">UIWindow</span> alloc] initWithFrame:[<span class="built_in">UIScreen</span> mainScreen].bounds];</div><div class="line">    window.autoresizingMask = <span class="built_in">UIViewAutoresizingFlexibleWidth</span> | <span class="built_in">UIViewAutoresizingFlexibleHeight</span>;</div><div class="line">    window.opaque = <span class="literal">NO</span>;</div><div class="line">    window.windowLevel = <span class="built_in">UIWindowLevelSIAlert</span>;</div><div class="line">    window.rootViewController = viewController;</div><div class="line">    <span class="keyword">self</span>.alertWindow = window;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>oldKeyWindow<br>通知alert后面的视图转变方向<br>取用一些oldKeyWindow的值</li>
</ul>
<hr>
<h2 id="android饼图库-吴明"><a href="#android饼图库-吴明" class="headerlink" title="android饼图库 -吴明"></a>android饼图库 -吴明</h2><ul>
<li>饼图选择<ul>
<li><a href="https://github.com/jondwillis/AChartEngine/tree/master/achartengine" target="_blank" rel="external">AChartEngine</a>:(太丑了)</li>
<li><a href="https://github.com/xcltapestry/XCL-Charts" target="_blank" rel="external">xcl-charts</a>:(接口文档没有)</li>
<li><a href="https://github.com/lecho/hellocharts-android" target="_blank" rel="external">HelloCharts</a>:(接口文档没有)</li>
<li><a href="https://github.com/PhilJay/MPAndroidChart" target="_blank" rel="external">MPAndroidChart</a>:(接口文档多)</li>
</ul>
</li>
<li><a href="https://github.com/PhilJay/MPAndroidChart" target="_blank" rel="external">MPAndroidChart</a><ul>
<li><img src="https://camo.githubusercontent.com/7e8a4a3c938c21d032d44d999edd781b6e146f2a/68747470733a2f2f7261772e6769746875622e636f6d2f5068696c4a61792f4d50416e64726f696443686172742f6d61737465722f73637265656e73686f74732f73696d706c6564657369676e5f7069656368617274312e706e67" alt="Alt Image Text"></li>
<li>饼图对象:PieChat</li>
<li><a href="https://github.com/PhilJay/MPAndroidChart/wiki" target="_blank" rel="external">详见接口文档</a></li>
</ul>
</li>
</ul>
<hr>
<h2 id="HeaderFooterRecyclerViewAdapter——李仙鹏"><a href="#HeaderFooterRecyclerViewAdapter——李仙鹏" class="headerlink" title="HeaderFooterRecyclerViewAdapter——李仙鹏"></a>HeaderFooterRecyclerViewAdapter——李仙鹏</h2><p><a href="https://gist.github.com/mheras/0908873267def75dc746" target="_blank" rel="external">HeaderFooterRecyclerViewAdapter</a>，用于RecyclerView。可方便的添加header或者footer。使用非常简单，只需要按照实际需求，在对应的header、content、footer相关方法进行重写即可。</p>
<p>附上源码</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">HeaderFooterRecyclerViewAdapter</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">Adapter</span>&lt;<span class="title">RecyclerView</span>.<span class="title">ViewHolder</span>&gt; </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> VIEW_TYPE_MAX_COUNT = <span class="number">1000</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> HEADER_VIEW_TYPE_OFFSET = <span class="number">0</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> FOOTER_VIEW_TYPE_OFFSET = HEADER_VIEW_TYPE_OFFSET + VIEW_TYPE_MAX_COUNT;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> CONTENT_VIEW_TYPE_OFFSET = FOOTER_VIEW_TYPE_OFFSET + VIEW_TYPE_MAX_COUNT;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> headerItemCount;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> contentItemCount;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> footerItemCount;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * &#123;<span class="doctag">@inheritDoc</span>&#125;</div><div class="line">     */</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> RecyclerView.<span class="function">ViewHolder <span class="title">onCreateViewHolder</span><span class="params">(ViewGroup parent, <span class="keyword">int</span> viewType)</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="comment">// Delegate to proper methods based on the viewType ranges.</span></div><div class="line">        <span class="keyword">if</span> (viewType &gt;= HEADER_VIEW_TYPE_OFFSET &amp;&amp; viewType &lt; HEADER_VIEW_TYPE_OFFSET + VIEW_TYPE_MAX_COUNT) &#123;</div><div class="line">            <span class="function"><span class="keyword">return</span> <span class="title">onCreateHeaderItemViewHolder</span><span class="params">(parent, viewType - HEADER_VIEW_TYPE_OFFSET)</span></span>;</div><div class="line">        &#125; <span class="function"><span class="keyword">else</span> <span class="title">if</span> <span class="params">(viewType &gt;= FOOTER_VIEW_TYPE_OFFSET &amp;&amp; viewType &lt; FOOTER_VIEW_TYPE_OFFSET + VIEW_TYPE_MAX_COUNT)</span> </span>&#123;</div><div class="line">            <span class="function"><span class="keyword">return</span> <span class="title">onCreateFooterItemViewHolder</span><span class="params">(parent, viewType - FOOTER_VIEW_TYPE_OFFSET)</span></span>;</div><div class="line">        &#125; <span class="function"><span class="keyword">else</span> <span class="title">if</span> <span class="params">(viewType &gt;= CONTENT_VIEW_TYPE_OFFSET &amp;&amp; viewType &lt; CONTENT_VIEW_TYPE_OFFSET + VIEW_TYPE_MAX_COUNT)</span> </span>&#123;</div><div class="line">            <span class="function"><span class="keyword">return</span> <span class="title">onCreateContentItemViewHolder</span><span class="params">(parent, viewType - CONTENT_VIEW_TYPE_OFFSET)</span></span>;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="comment">// This shouldn't happen as we check that the viewType provided by the client is valid.</span></div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * &#123;<span class="doctag">@inheritDoc</span>&#125;</div><div class="line">     */</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">onBindViewHolder</span><span class="params">(RecyclerView.ViewHolder viewHolder, <span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="comment">// Delegate to proper methods based on the viewType ranges.</span></div><div class="line">        <span class="keyword">if</span> (headerItemCount &gt; <span class="number">0</span> &amp;&amp; position &lt; headerItemCount) &#123;</div><div class="line">            onBindHeaderItemViewHolder(viewHolder, position);</div><div class="line">        &#125; <span class="function"><span class="keyword">else</span> <span class="title">if</span> <span class="params">(contentItemCount &gt; <span class="number">0</span> &amp;&amp; position - headerItemCount &lt; contentItemCount)</span> </span>&#123;</div><div class="line">            onBindContentItemViewHolder(viewHolder, position - headerItemCount);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            onBindFooterItemViewHolder(viewHolder, position - headerItemCount - contentItemCount);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * &#123;<span class="doctag">@inheritDoc</span>&#125;</div><div class="line">     */</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">int</span> <span class="title">getItemCount</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">// Cache the counts and return the sum of them.</span></div><div class="line">        headerItemCount = getHeaderItemCount();</div><div class="line">        contentItemCount = getContentItemCount();</div><div class="line">        footerItemCount = getFooterItemCount();</div><div class="line">        <span class="keyword">return</span> headerItemCount + contentItemCount + footerItemCount;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * &#123;<span class="doctag">@inheritDoc</span>&#125;</div><div class="line">     */</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">int</span> <span class="title">getItemViewType</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="comment">// Delegate to proper methods based on the position, but validate first.</span></div><div class="line">        <span class="keyword">if</span> (headerItemCount &gt; <span class="number">0</span> &amp;&amp; position &lt; headerItemCount) &#123;</div><div class="line">            <span class="keyword">return</span> validateViewType(getHeaderItemViewType(position)) + HEADER_VIEW_TYPE_OFFSET;</div><div class="line">        &#125; <span class="function"><span class="keyword">else</span> <span class="title">if</span> <span class="params">(contentItemCount &gt; <span class="number">0</span> &amp;&amp; position - headerItemCount &lt; contentItemCount)</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> validateViewType(getContentItemViewType(position - headerItemCount)) + CONTENT_VIEW_TYPE_OFFSET;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> validateViewType(getFooterItemViewType(position - headerItemCount - contentItemCount)) + FOOTER_VIEW_TYPE_OFFSET;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Validates that the view type is within the valid range.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> viewType the view type.</div><div class="line">     * <span class="doctag">@return</span> the given view type.</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">int</span> <span class="title">validateViewType</span><span class="params">(<span class="keyword">int</span> viewType)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (viewType &lt; <span class="number">0</span> || viewType &gt;= VIEW_TYPE_MAX_COUNT) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"viewType must be between 0 and "</span> + VIEW_TYPE_MAX_COUNT);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> viewType;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Notifies that a header item is inserted.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> position the position of the header item.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyHeaderItemInserted</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> newHeaderItemCount = getHeaderItemCount();</div><div class="line">        <span class="keyword">if</span> (position &lt; <span class="number">0</span> || position &gt;= newHeaderItemCount) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given position "</span> + position + <span class="string">" is not within the position bounds for header items [0 - "</span> + (newHeaderItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</div><div class="line">        &#125;</div><div class="line">        notifyItemInserted(position);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Notifies that multiple header items are inserted.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> positionStart the position.</div><div class="line">     * <span class="doctag">@param</span> itemCount     the item count.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyHeaderItemRangeInserted</span><span class="params">(<span class="keyword">int</span> positionStart, <span class="keyword">int</span> itemCount)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> newHeaderItemCount = getHeaderItemCount();</div><div class="line">        <span class="keyword">if</span> (positionStart &lt; <span class="number">0</span> || itemCount &lt; <span class="number">0</span> || positionStart + itemCount &gt; newHeaderItemCount) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given range ["</span> + positionStart + <span class="string">" - "</span> + (positionStart + itemCount - <span class="number">1</span>) + <span class="string">"] is not within the position bounds for header items [0 - "</span> + (newHeaderItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</div><div class="line">        &#125;</div><div class="line">        notifyItemRangeInserted(positionStart, itemCount);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Notifies that a header item is changed.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> position the position.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyHeaderItemChanged</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (position &lt; <span class="number">0</span> || position &gt;= headerItemCount) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given position "</span> + position + <span class="string">" is not within the position bounds for header items [0 - "</span> + (headerItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</div><div class="line">        &#125;</div><div class="line">        notifyItemChanged(position);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Notifies that multiple header items are changed.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> positionStart the position.</div><div class="line">     * <span class="doctag">@param</span> itemCount     the item count.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyHeaderItemRangeChanged</span><span class="params">(<span class="keyword">int</span> positionStart, <span class="keyword">int</span> itemCount)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (positionStart &lt; <span class="number">0</span> || itemCount &lt; <span class="number">0</span> || positionStart + itemCount &gt;= headerItemCount) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given range ["</span> + positionStart + <span class="string">" - "</span> + (positionStart + itemCount - <span class="number">1</span>) + <span class="string">"] is not within the position bounds for header items [0 - "</span> + (headerItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</div><div class="line">        &#125;</div><div class="line">        notifyItemRangeChanged(positionStart, itemCount);</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Notifies that an existing header item is moved to another position.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> fromPosition the original position.</div><div class="line">     * <span class="doctag">@param</span> toPosition   the new position.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyHeaderItemMoved</span><span class="params">(<span class="keyword">int</span> fromPosition, <span class="keyword">int</span> toPosition)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (fromPosition &lt; <span class="number">0</span> || toPosition &lt; <span class="number">0</span> || fromPosition &gt;= headerItemCount || toPosition &gt;= headerItemCount) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given fromPosition "</span> + fromPosition + <span class="string">" or toPosition "</span> + toPosition + <span class="string">" is not within the position bounds for header items [0 - "</span> + (headerItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</div><div class="line">        &#125;</div><div class="line">        notifyItemMoved(fromPosition, toPosition);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Notifies that a header item is removed.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> position the position.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyHeaderItemRemoved</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (position &lt; <span class="number">0</span> || position &gt;= headerItemCount) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given position "</span> + position + <span class="string">" is not within the position bounds for header items [0 - "</span> + (headerItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</div><div class="line">        &#125;</div><div class="line">        notifyItemRemoved(position);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Notifies that multiple header items are removed.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> positionStart the position.</div><div class="line">     * <span class="doctag">@param</span> itemCount     the item count.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyHeaderItemRangeRemoved</span><span class="params">(<span class="keyword">int</span> positionStart, <span class="keyword">int</span> itemCount)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (positionStart &lt; <span class="number">0</span> || itemCount &lt; <span class="number">0</span> || positionStart + itemCount &gt; headerItemCount) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given range ["</span> + positionStart + <span class="string">" - "</span> + (positionStart + itemCount - <span class="number">1</span>) + <span class="string">"] is not within the position bounds for header items [0 - "</span> + (headerItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</div><div class="line">        &#125;</div><div class="line">        notifyItemRangeRemoved(positionStart, itemCount);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Notifies that a content item is inserted.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> position the position of the content item.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyContentItemInserted</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> newHeaderItemCount = getHeaderItemCount();</div><div class="line">        <span class="keyword">int</span> newContentItemCount = getContentItemCount();</div><div class="line">        <span class="keyword">if</span> (position &lt; <span class="number">0</span> || position &gt;= newContentItemCount) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given position "</span> + position + <span class="string">" is not within the position bounds for content items [0 - "</span> + (newContentItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</div><div class="line">        &#125;</div><div class="line">        notifyItemInserted(position + newHeaderItemCount);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Notifies that multiple content items are inserted.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> positionStart the position.</div><div class="line">     * <span class="doctag">@param</span> itemCount     the item count.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyContentItemRangeInserted</span><span class="params">(<span class="keyword">int</span> positionStart, <span class="keyword">int</span> itemCount)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> newHeaderItemCount = getHeaderItemCount();</div><div class="line">        <span class="keyword">int</span> newContentItemCount = getContentItemCount();</div><div class="line">        <span class="keyword">if</span> (positionStart &lt; <span class="number">0</span> || itemCount &lt; <span class="number">0</span> || positionStart + itemCount &gt; newContentItemCount) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given range ["</span> + positionStart + <span class="string">" - "</span> + (positionStart + itemCount - <span class="number">1</span>) + <span class="string">"] is not within the position bounds for content items [0 - "</span> + (newContentItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</div><div class="line">        &#125;</div><div class="line">        notifyItemRangeInserted(positionStart + newHeaderItemCount, itemCount);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Notifies that a content item is changed.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> position the position.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyContentItemChanged</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (position &lt; <span class="number">0</span> || position &gt;= contentItemCount) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given position "</span> + position + <span class="string">" is not within the position bounds for content items [0 - "</span> + (contentItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</div><div class="line">        &#125;</div><div class="line">        notifyItemChanged(position + headerItemCount);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Notifies that multiple content items are changed.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> positionStart the position.</div><div class="line">     * <span class="doctag">@param</span> itemCount     the item count.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyContentItemRangeChanged</span><span class="params">(<span class="keyword">int</span> positionStart, <span class="keyword">int</span> itemCount)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (positionStart &lt; <span class="number">0</span> || itemCount &lt; <span class="number">0</span> || positionStart + itemCount &gt; contentItemCount) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given range ["</span> + positionStart + <span class="string">" - "</span> + (positionStart + itemCount - <span class="number">1</span>) + <span class="string">"] is not within the position bounds for content items [0 - "</span> + (contentItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</div><div class="line">        &#125;</div><div class="line">        notifyItemRangeChanged(positionStart + headerItemCount, itemCount);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Notifies that an existing content item is moved to another position.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> fromPosition the original position.</div><div class="line">     * <span class="doctag">@param</span> toPosition   the new position.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyContentItemMoved</span><span class="params">(<span class="keyword">int</span> fromPosition, <span class="keyword">int</span> toPosition)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (fromPosition &lt; <span class="number">0</span> || toPosition &lt; <span class="number">0</span> || fromPosition &gt;= contentItemCount || toPosition &gt;= contentItemCount) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given fromPosition "</span> + fromPosition + <span class="string">" or toPosition "</span> + toPosition + <span class="string">" is not within the position bounds for content items [0 - "</span> + (contentItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</div><div class="line">        &#125;</div><div class="line">        notifyItemMoved(fromPosition + headerItemCount, toPosition + headerItemCount);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Notifies that a content item is removed.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> position the position.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyContentItemRemoved</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (position &lt; <span class="number">0</span> || position &gt;= contentItemCount) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given position "</span> + position + <span class="string">" is not within the position bounds for content items [0 - "</span> + (contentItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</div><div class="line">        &#125;</div><div class="line">        notifyItemRemoved(position + headerItemCount);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Notifies that multiple content items are removed.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> positionStart the position.</div><div class="line">     * <span class="doctag">@param</span> itemCount     the item count.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyContentItemRangeRemoved</span><span class="params">(<span class="keyword">int</span> positionStart, <span class="keyword">int</span> itemCount)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (positionStart &lt; <span class="number">0</span> || itemCount &lt; <span class="number">0</span> || positionStart + itemCount &gt; contentItemCount) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given range ["</span> + positionStart + <span class="string">" - "</span> + (positionStart + itemCount - <span class="number">1</span>) + <span class="string">"] is not within the position bounds for content items [0 - "</span> + (contentItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</div><div class="line">        &#125;</div><div class="line">        notifyItemRangeRemoved(positionStart + headerItemCount, itemCount);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Notifies that a footer item is inserted.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> position the position of the content item.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyFooterItemInserted</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> newHeaderItemCount = getHeaderItemCount();</div><div class="line">        <span class="keyword">int</span> newContentItemCount = getContentItemCount();</div><div class="line">        <span class="keyword">int</span> newFooterItemCount = getFooterItemCount();</div><div class="line">        <span class="keyword">if</span> (position &lt; <span class="number">0</span> || position &gt;= newFooterItemCount) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given position "</span> + position + <span class="string">" is not within the position bounds for footer items [0 - "</span> + (newFooterItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</div><div class="line">        &#125;</div><div class="line">        notifyItemInserted(position + newHeaderItemCount + newContentItemCount);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Notifies that multiple footer items are inserted.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> positionStart the position.</div><div class="line">     * <span class="doctag">@param</span> itemCount     the item count.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyFooterItemRangeInserted</span><span class="params">(<span class="keyword">int</span> positionStart, <span class="keyword">int</span> itemCount)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> newHeaderItemCount = getHeaderItemCount();</div><div class="line">        <span class="keyword">int</span> newContentItemCount = getContentItemCount();</div><div class="line">        <span class="keyword">int</span> newFooterItemCount = getFooterItemCount();</div><div class="line">        <span class="keyword">if</span> (positionStart &lt; <span class="number">0</span> || itemCount &lt; <span class="number">0</span> || positionStart + itemCount &gt; newFooterItemCount) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given range ["</span> + positionStart + <span class="string">" - "</span> + (positionStart + itemCount - <span class="number">1</span>) + <span class="string">"] is not within the position bounds for footer items [0 - "</span> + (newFooterItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</div><div class="line">        &#125;</div><div class="line">        notifyItemRangeInserted(positionStart + newHeaderItemCount + newContentItemCount, itemCount);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Notifies that a footer item is changed.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> position the position.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyFooterItemChanged</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (position &lt; <span class="number">0</span> || position &gt;= footerItemCount) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given position "</span> + position + <span class="string">" is not within the position bounds for footer items [0 - "</span> + (footerItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</div><div class="line">        &#125;</div><div class="line">        notifyItemChanged(position + headerItemCount + contentItemCount);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Notifies that multiple footer items are changed.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> positionStart the position.</div><div class="line">     * <span class="doctag">@param</span> itemCount     the item count.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyFooterItemRangeChanged</span><span class="params">(<span class="keyword">int</span> positionStart, <span class="keyword">int</span> itemCount)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (positionStart &lt; <span class="number">0</span> || itemCount &lt; <span class="number">0</span> || positionStart + itemCount &gt; footerItemCount) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given range ["</span> + positionStart + <span class="string">" - "</span> + (positionStart + itemCount - <span class="number">1</span>) + <span class="string">"] is not within the position bounds for footer items [0 - "</span> + (footerItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</div><div class="line">        &#125;</div><div class="line">        notifyItemRangeChanged(positionStart + headerItemCount + contentItemCount, itemCount);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Notifies that an existing footer item is moved to another position.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> fromPosition the original position.</div><div class="line">     * <span class="doctag">@param</span> toPosition   the new position.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyFooterItemMoved</span><span class="params">(<span class="keyword">int</span> fromPosition, <span class="keyword">int</span> toPosition)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (fromPosition &lt; <span class="number">0</span> || toPosition &lt; <span class="number">0</span> || fromPosition &gt;= footerItemCount || toPosition &gt;= footerItemCount) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given fromPosition "</span> + fromPosition + <span class="string">" or toPosition "</span> + toPosition + <span class="string">" is not within the position bounds for footer items [0 - "</span> + (footerItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</div><div class="line">        &#125;</div><div class="line">        notifyItemMoved(fromPosition + headerItemCount + contentItemCount, toPosition + headerItemCount + contentItemCount);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Notifies that a footer item is removed.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> position the position.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyFooterItemRemoved</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (position &lt; <span class="number">0</span> || position &gt;= footerItemCount) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given position "</span> + position + <span class="string">" is not within the position bounds for footer items [0 - "</span> + (footerItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</div><div class="line">        &#125;</div><div class="line">        notifyItemRemoved(position + headerItemCount + contentItemCount);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Notifies that multiple footer items are removed.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> positionStart the position.</div><div class="line">     * <span class="doctag">@param</span> itemCount     the item count.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">notifyFooterItemRangeRemoved</span><span class="params">(<span class="keyword">int</span> positionStart, <span class="keyword">int</span> itemCount)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (positionStart &lt; <span class="number">0</span> || itemCount &lt; <span class="number">0</span> || positionStart + itemCount &gt; footerItemCount) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"The given range ["</span> + positionStart + <span class="string">" - "</span> + (positionStart + itemCount - <span class="number">1</span>) + <span class="string">"] is not within the position bounds for footer items [0 - "</span> + (footerItemCount - <span class="number">1</span>) + <span class="string">"]."</span>);</div><div class="line">        &#125;</div><div class="line">        notifyItemRangeRemoved(positionStart + headerItemCount + contentItemCount, itemCount);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Gets the header item view type. By default, this method returns 0.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> position the position.</div><div class="line">     * <span class="doctag">@return</span> the header item view type (within the range [0 - VIEW_TYPE_MAX_COUNT-1]).</div><div class="line">     */</div><div class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">int</span> <span class="title">getHeaderItemViewType</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Gets the footer item view type. By default, this method returns 0.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> position the position.</div><div class="line">     * <span class="doctag">@return</span> the footer item view type (within the range [0 - VIEW_TYPE_MAX_COUNT-1]).</div><div class="line">     */</div><div class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">int</span> <span class="title">getFooterItemViewType</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Gets the content item view type. By default, this method returns 0.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> position the position.</div><div class="line">     * <span class="doctag">@return</span> the content item view type (within the range [0 - VIEW_TYPE_MAX_COUNT-1]).</div><div class="line">     */</div><div class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">int</span> <span class="title">getContentItemViewType</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Gets the header item count. This method can be called several times, so it should not calculate the count every time.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> the header item count.</div><div class="line">     */</div><div class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">int</span> <span class="title">getHeaderItemCount</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Gets the footer item count. This method can be called several times, so it should not calculate the count every time.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> the footer item count.</div><div class="line">     */</div><div class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">int</span> <span class="title">getFooterItemCount</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Gets the content item count. This method can be called several times, so it should not calculate the count every time.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> the content item count.</div><div class="line">     */</div><div class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">int</span> <span class="title">getContentItemCount</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * This method works exactly the same as &#123;<span class="doctag">@link</span> #onCreateViewHolder(android.view.ViewGroup, int)&#125;, but for header items.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> parent         the parent view.</div><div class="line">     * <span class="doctag">@param</span> headerViewType the view type for the header.</div><div class="line">     * <span class="doctag">@return</span> the view holder.</div><div class="line">     */</div><div class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> RecyclerView.<span class="function">ViewHolder <span class="title">onCreateHeaderItemViewHolder</span><span class="params">(ViewGroup parent, <span class="keyword">int</span> headerViewType)</span></span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * This method works exactly the same as &#123;<span class="doctag">@link</span> #onCreateViewHolder(android.view.ViewGroup, int)&#125;, but for footer items.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> parent         the parent view.</div><div class="line">     * <span class="doctag">@param</span> footerViewType the view type for the footer.</div><div class="line">     * <span class="doctag">@return</span> the view holder.</div><div class="line">     */</div><div class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> RecyclerView.<span class="function">ViewHolder <span class="title">onCreateFooterItemViewHolder</span><span class="params">(ViewGroup parent, <span class="keyword">int</span> footerViewType)</span></span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * This method works exactly the same as &#123;<span class="doctag">@link</span> #onCreateViewHolder(android.view.ViewGroup, int)&#125;, but for content items.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> parent          the parent view.</div><div class="line">     * <span class="doctag">@param</span> contentViewType the view type for the content.</div><div class="line">     * <span class="doctag">@return</span> the view holder.</div><div class="line">     */</div><div class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> RecyclerView.<span class="function">ViewHolder <span class="title">onCreateContentItemViewHolder</span><span class="params">(ViewGroup parent, <span class="keyword">int</span> contentViewType)</span></span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * This method works exactly the same as &#123;<span class="doctag">@link</span> #onBindViewHolder(android.support.v7.widget.RecyclerView.ViewHolder, int)&#125;, but for header items.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> headerViewHolder the view holder for the header item.</div><div class="line">     * <span class="doctag">@param</span> position         the position.</div><div class="line">     */</div><div class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">void</span> <span class="title">onBindHeaderItemViewHolder</span><span class="params">(RecyclerView.ViewHolder headerViewHolder, <span class="keyword">int</span> position)</span></span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * This method works exactly the same as &#123;<span class="doctag">@link</span> #onBindViewHolder(android.support.v7.widget.RecyclerView.ViewHolder, int)&#125;, but for footer items.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> footerViewHolder the view holder for the footer item.</div><div class="line">     * <span class="doctag">@param</span> position         the position.</div><div class="line">     */</div><div class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">void</span> <span class="title">onBindFooterItemViewHolder</span><span class="params">(RecyclerView.ViewHolder footerViewHolder, <span class="keyword">int</span> position)</span></span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * This method works exactly the same as &#123;<span class="doctag">@link</span> #onBindViewHolder(android.support.v7.widget.RecyclerView.ViewHolder, int)&#125;, but for content items.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> contentViewHolder the view holder for the content item.</div><div class="line">     * <span class="doctag">@param</span> position          the position.</div><div class="line">     */</div><div class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">void</span> <span class="title">onBindContentItemViewHolder</span><span class="params">(RecyclerView.ViewHolder contentViewHolder, <span class="keyword">int</span> position)</span></span>;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/移动组周分享/">移动组周分享</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-聊聊提高代码质量" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/08/14/聊聊提高代码质量/" class="article-date">
      <time datetime="2015-08-14T13:08:35.000Z" itemprop="datePublished">2015-08-14</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/14/聊聊提高代码质量/">聊聊提高代码质量</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="什么样的代码才是好的——李仙鹏"><a href="#什么样的代码才是好的——李仙鹏" class="headerlink" title="什么样的代码才是好的——李仙鹏"></a>什么样的代码才是好的——李仙鹏</h2><h3 id="我所理解的好代码"><a href="#我所理解的好代码" class="headerlink" title="我所理解的好代码"></a>我所理解的好代码</h3><ul>
<li><p>代码规范——可读性</p>
<ul>
<li>统一命名方式（<a href="http://www.hawstein.com/posts/google-java-style.html" target="_blank" rel="external">Google Java代码风格</a>）</li>
<li>尽量不要出现magic number</li>
<li>清晰的代码注释文档（<a href="http://www.importnew.com/16459.html#rd?sukey=fc78a68049a14bb28cbb47b788e9ade0d111f3c2348d187194837eb45a0be9421f2e0aad0fec6b2290f2a561779caea1" target="_blank" rel="external">改善Java文档的理由、建议和技巧</a>）</li>
<li>控制方法或者函数的细粒度</li>
<li>减少代码冗余</li>
</ul>
</li>
<li><p>代码耦合低——可扩展性、可移植性</p>
<ul>
<li>尽量采用接口实现，减少继承</li>
<li>通用功能尽量抽取作为一个独立的方法，避免重复造轮子</li>
<li>设计模式并不能提高代码执行效率，但容易对代码进行模块切分，从而进行代码的解耦合。设计模式也可以算是程序员的一种通用“语言“，方便程序员之间的沟通.<ul>
<li>根据不同OS或者语言特性，从大的架构上遵循MVC或者MVP或者其它类似的层次分明的设计模式。</li>
</ul>
</li>
</ul>
</li>
<li><p>严格的code review</p>
<ul>
<li>能够发现潜在的bug、不合理的实现和是否遵从代码规范</li>
<li>有助于代码提交人员对自身代码质量的要求——面子问题</li>
</ul>
</li>
<li><p>性能</p>
</li>
</ul>
<blockquote>
<p>以上这些点都是为了程序的健壮性、可扩展性、可移植性。最终目标，在核心开发人员变动或者产品需求变动后，都不会对代码维护、版本迭代和程序稳定性造成重大影响。</p>
</blockquote>
<h3 id="51offer-v2-5-0重写中，我们是如何做的"><a href="#51offer-v2-5-0重写中，我们是如何做的" class="headerlink" title="51offer-v2.5.0重写中，我们是如何做的"></a>51offer-v2.5.0重写中，我们是如何做的</h3><ul>
<li><p>整体架构上采用<a href="http://baike.baidu.com/view/3456444.htm" target="_blank" rel="external">MVP模式</a></p>
<ul>
<li>V和P通过接口实现交互，M只被P处理，P处理完后通过接口反馈给V<br><img src="http://magenic.com/Portals/0/xBlog/uploads/2015/4/10/presenter-view-model-1-mvp-pattern-for-android-jeff-angellini.png" alt="MVP"></li>
</ul>
</li>
<li><p>代码可移植性和可扩展性</p>
<ul>
<li>按照是否通用原则，命名包名——非通用包名，放在offer包下；通用功能模块，放在非offer包下。这样有利于快速移植，或者打成JAR包</li>
<li>接口实现，减少继承——在类的继承中，减少继承体系中每层父类的职责范围</li>
</ul>
</li>
<li><p>HTTP请求</p>
<ul>
<li>底层请求采用<a href="http://square.github.io/okhttp/" target="_blank" rel="external">OkHttp</a>，<a href="http://square.github.io/okhttp/" target="_blank" rel="external">OkHttp</a>默认实现的功能为：<ul>
<li>支持协议——<a href="http://baike.baidu.com/view/11521153.htm" target="_blank" rel="external">HTTP/2</a>和<a href="http://baike.baidu.com/view/2984528.htm" target="_blank" rel="external">SPDY</a>, 可以合并多个到同一个主机的请求<ul>
<li>使用连接池技术减少请求的延迟</li>
<li>使用GZIP压缩减少传输的数据量</li>
<li>报文缓存响应，避免重复的网络请求</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>json解析</p>
<ul>
<li><a href="https://sites.google.com/site/gson/gson-user-guide" target="_blank" rel="external">Gson</a>，这是<a href="http://www.open-open.com/lib/view/open1434377191317.html" target="_blank" rel="external">综合考虑Json使用场景后的选择结果</a>——方便json字符串到对象之间的转换、<a href="https://sites.google.com/site/gson/gson-user-guide" target="_blank" rel="external">Gson</a>在处理短的json时速度比较快、<a href="https://sites.google.com/site/gson/gson-user-guide" target="_blank" rel="external">Gson</a>不需要太多的注解</li>
</ul>
</li>
<li><p>图片加载</p>
<ul>
<li><p>采用<a href="https://github.com/nostra13/Android-Universal-Image-Loader" target="_blank" rel="external">Android-Universal-Image-Loader</a></p>
<ul>
<li>多线程图片加载</li>
<li>可自定义的加载器</li>
<li>可自定义的图片显示回调</li>
<li>图片三级缓存——内存和硬盘缓存的图片通过多种数据结构管理</li>
<li>监听加载过程</li>
</ul>
</li>
<li><p>bitmap显示质量设置为RGB_565——一个像素需要16位表示，Android中默认为ARGB_8888——一个像素需要32位表示。这种方式在<strong><em>基本保障图片质量要求</em></strong>的同时，还能够大大减少手机的内存占用</p>
</li>
</ul>
</li>
<li><p>数据存储</p>
<ul>
<li>由于目前客户端还未涉及到大量数据和离线加载模式，所以我们暂不使用数据库（以后在做IM或者离线加载时，会考虑使用ORM来访问数据库），综合速度考虑使用Android的SharedPreference</li>
</ul>
</li>
</ul>
<h2 id="组件通信库EventBus-吴强"><a href="#组件通信库EventBus-吴强" class="headerlink" title="组件通信库EventBus - 吴强"></a>组件通信库EventBus - 吴强</h2><p>  EventBus是一个Android端优化的publish/subscribe消息总线，简化了应用程序内各组件间、组件与后台线程间的通信。</p>
<h3 id="三个主要元素："><a href="#三个主要元素：" class="headerlink" title="三个主要元素："></a>三个主要元素：</h3><ul>
<li>Event：事件<blockquote>
<p>Event可以是任意类型的对象</p>
</blockquote>
</li>
<li>Subscriber：事件订阅者，接收特定的事件<blockquote>
<p>在EventBus中，使用约定来指定事件订阅者以简化使用。即所有事件订阅都都是以onEvent开头的函数，具体来说，函数的名字是onEvent，onEventMainThread，onEventBackgroundThread，onEventAsync这四个</p>
</blockquote>
</li>
<li>Publisher:事件发布者，用于通知Subscriber有事件发生<blockquote>
<p>可以在任意线程任意位置发送事件，直接调用EventBus的post(Object)方法，可以自己实例化EventBus对象，但一般使用默认的单例就好了：EventBus.getDefault()，根据post函数参数的类型，会自动调用订阅相应类型事件的函数。</p>
</blockquote>
</li>
</ul>
<h3 id="ThreadMode"><a href="#ThreadMode" class="headerlink" title="ThreadMode"></a>ThreadMode</h3><p>  Subscriber函数的名字只能是那4个，因为每个事件订阅函数都是和一个ThreadMode相关联的，ThreadMode指定了会调用的函数。有以下四个ThreadMode：</p>
<ul>
<li>PostThread:<br>事件的处理在和事件的发送在相同的进程，所以事件处理时间不应太长，不然影响事件的发送线程，而这个线程可能是UI线程。对应的函数名是onEvent。</li>
<li>MainThread:<br>事件的处理会在UI线程中执行。事件处理时间不能太长，这个不用说的，长了会ANR的，对应的函数名是onEventMainThread。</li>
<li>BackgroundThread:<br>事件的处理会在一个后台线程中执行，对应的函数名是onEventBackgroundThread，虽然名字是BackgroundThread，事件处理是在后台线程，但事件处理时间还是不应该太长，因为如果发送事件的线程是后台线程，会直接执行事件，如果当前线程是UI线程，事件会被加到一个队列中，由一个线程依次处理这些事件，如果某个事件处理时间太长，会阻塞后面的事件的派发或处理。</li>
<li>Async:<br>事件处理会在单独的线程中执行，主要用于在后台线程中执行耗时操作，每个事件会开启一个线程（有线程池），但最好限制线程的数目。</li>
</ul>
<h3 id="注册事件与解除注册"><a href="#注册事件与解除注册" class="headerlink" title="注册事件与解除注册"></a>注册事件与解除注册</h3><ul>
<li>通过EventBus.getDefault().register方法可以向EventBus注册来订阅事件</li>
<li>通过registerSticky可以注册Stick事件处理函数</li>
<li>通过EventBus.getDefault().unregister方法解除EventBus事件订阅</li>
</ul>
<h3 id="Post事件"><a href="#Post事件" class="headerlink" title="Post事件"></a>Post事件</h3><ul>
<li>直接调用EventBus.getDefault().post(Event)就可以发送事件，根据Event的类型就可以发送到相应事件的订阅者。</li>
<li>当通过postSticky发送一个事件时，这个类型的事件的最后一次事件会被缓存起来，当有订阅者通过registerSticky注册时，会把之前缓存起来的这个事件直接发送给它</li>
</ul>
<h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3><p>  无法进程间通信，如果一个应用内有多个进程的话就没办法了</p>
<h3 id="注意事项及要点"><a href="#注意事项及要点" class="headerlink" title="注意事项及要点"></a>注意事项及要点</h3><ul>
<li>同一个onEvent函数不能被注册两次，所以不能在一个类中注册同时还在父类中注册</li>
<li>当Post一个事件时，这个事件类的父类的事件也会被Post。</li>
<li>Post的事件无Subscriber处理时会Post <code>NoSubscriberEvent</code>事件，当调用Subscriber失败时会Post <code>SubscriberExceptionEvent</code>事件。</li>
</ul>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>  EventBus中还有个Util包，主要作用是可以通过AsyncExecutor执行一个Runnable，通过内部的RunnableEx(可以搜索异常的Runnable)当Runnable抛出异常时通过EventBus发消息显示错误对话框。</p>
<p>参考资料：<a href="http://www.cnblogs.com/angeldevil/p/3715934.html" target="_blank" rel="external">快速Android开发系列通信篇之EventBus</a></p>
<h2 id="如何提高代码质量——吴明"><a href="#如何提高代码质量——吴明" class="headerlink" title="如何提高代码质量——吴明"></a>如何提高代码质量——吴明</h2><p><img src="http://ww4.sinaimg.cn/large/7cc829d3jw1dpx6ahcgfuj.jpg" alt="Alt text"></p>
<ul>
<li>code review</li>
<li><a href="http://www.hawstein.com/posts/google-java-style.html" target="_blank" rel="external">命名规范</a><ul>
<li>java命名规范:<ul>
<li>java类：m+模块+功能(如:mLoginRegester)</li>
<li>控件类：m+模块+功能+控件缩写(如:mLoginRegesterBtn)</li>
<li>常量:模块+功能(如:SCHOOL_COUNT_MAX)</li>
</ul>
</li>
<li>xml命名规范<ul>
<li>id:模块+功能+控件缩写</li>
</ul>
</li>
<li>color，string，dimen，drawable</li>
<li>图片：模块<em>功能</em>备注_状态</li>
<li>注释</li>
</ul>
</li>
<li>好的框架<ul>
<li>okhttp</li>
<li>Gson</li>
</ul>
</li>
<li>设计模式:<ul>
<li><a href="http://cantellow.iteye.com/blog/838473" target="_blank" rel="external">单例模式</a></li>
<li>工厂模式</li>
<li>策略模式</li>
<li>代理模式</li>
<li><a href="http://blog.csdn.net/cym492224103/article/details/38776873" target="_blank" rel="external">mvp模式</a></li>
</ul>
</li>
<li>处理异常</li>
<li><p>优化性能</p>
</li>
<li><p>代码测试工具:静态代码分析</p>
</li>
</ul>
<h2 id="如何写一份好的代码-张超耀"><a href="#如何写一份好的代码-张超耀" class="headerlink" title="如何写一份好的代码 - 张超耀"></a>如何写一份好的代码 - 张超耀</h2><h3 id="数据结构和核心算法"><a href="#数据结构和核心算法" class="headerlink" title="数据结构和核心算法"></a>数据结构和核心算法</h3><ul>
<li><p>数据结构的重要性：低水平程序员总在考虑代码，高水平程序员总在考虑数据结构及其之间的关系</p>
</li>
<li><p>数据结构决定算法,数据结构考虑清楚了，核心的算法自然就出来了，这就是关于每个类的每个方法如何实现的问题</p>
</li>
</ul>
<h3 id="功能实现"><a href="#功能实现" class="headerlink" title="功能实现"></a>功能实现</h3><ul>
<li><p>思路确定后，实现过程也需要大量的构思活动。碰到比较熟悉有经验的领域，自然可以轻车熟路，但难免会有一些你不太熟悉的技术需要尝试。作为一个程序员，最大的挑战也是最大的乐趣所在，就是不断学习新的技术，没有这样的心态，很快就会落后。</p>
</li>
<li><p>那么遇到不熟悉的技术怎么办？Demo先行，这样做的好处是把单个技术问题和其他潜在的bug隔离开来，便于快速学习新技术。否则，直接在项目里写代码出错以后，要判断问题的源头都要多费好几倍的精力。</p>
</li>
</ul>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><ul>
<li>测试很重要，设计测试用例就像开发时设计数据结构一样，也是很关键的。</li>
</ul>
<h3 id="代码可读性"><a href="#代码可读性" class="headerlink" title="代码可读性"></a>代码可读性</h3><ul>
<li><p>要想自己满意，代码的可读性一定要好。要做到一年后甚至几年后你拿到自己写的代码，还能很容易看明白当时的思路和实现。这就涉及到命名和注释的问题</p>
</li>
<li><p>命名就像超市里的商品标签一样，要让看得人一目了然就知道这是个什么东西</p>
</li>
<li><p>注释也是很重要的，它可以用来说明一段代码的作用，算法的设计思想，或者是方法调用的参数格式要求等</p>
</li>
</ul>
<h3 id="最后总结一下："><a href="#最后总结一下：" class="headerlink" title="最后总结一下："></a>最后总结一下：</h3><ul>
<li>技术水平是可以慢慢提高的，但是好的编程习惯需要从一开始就养成，它会让你在前进的道路上事半功倍，受益终生。</li>
</ul>
<h2 id="怎样写好的代码-曾铭"><a href="#怎样写好的代码-曾铭" class="headerlink" title="怎样写好的代码 - 曾铭"></a>怎样写好的代码 - 曾铭</h2><blockquote>
<p>有两种方式构建软件设计：一种是把软件做得很简单以至于明显找不到缺陷；另一种是把它做得很复杂以至于找不到明显的缺陷<br>——C.A.R. Hoare</p>
</blockquote>
<h3 id="谁来写？角色的定义"><a href="#谁来写？角色的定义" class="headerlink" title="谁来写？角色的定义"></a>谁来写？角色的定义</h3><ul>
<li>程序员 vs 工程师</li>
<li>实现功能 vs 解决问题</li>
<li>搭个帐篷 vs 照顾孩子</li>
</ul>
<h3 id="好的代码？"><a href="#好的代码？" class="headerlink" title="好的代码？"></a>好的代码？</h3><blockquote>
<p>一个程序员更希望接手一个有bug但是看的懂的工程，还是一个没bug但是看不懂的工程？</p>
</blockquote>
<ul>
<li>代码跟人聊天，解释做什么，注释解释为什么这么做，要注意什么</li>
<li>面向接口而不仅仅面向对象</li>
</ul>
<p>举例：在 APP 开发和 API 开发之间，面向 API 文档做开发</p>
<h3 id="写的过程？（推荐开发过程）"><a href="#写的过程？（推荐开发过程）" class="headerlink" title="写的过程？（推荐开发过程）"></a>写的过程？（推荐开发过程）</h3><ul>
<li>需求明确（理解来源及演进）</li>
<li>整体设计（外在联系，临界条件，错误处理）</li>
<li>实现（验证思路，解决问题及优化）<strong>切记不要拿到需求直接跳到这一步</strong></li>
</ul>
<h3 id="好？目标"><a href="#好？目标" class="headerlink" title="好？目标"></a>好？目标</h3><ul>
<li>可运行，可读，可维护，可测试</li>
<li>参见 TDD，BDD</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/移动组周分享/">移动组周分享</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-网络信息安全" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/07/31/网络信息安全/" class="article-date">
      <time datetime="2015-07-31T11:08:35.000Z" itemprop="datePublished">2015-07-31</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/31/网络信息安全/">网络信息安全</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="微信支付的网络安全-王胜"><a href="#微信支付的网络安全-王胜" class="headerlink" title="微信支付的网络安全 - 王胜"></a>微信支付的网络安全 - 王胜</h2><h3 id="协议规则"><a href="#协议规则" class="headerlink" title="协议规则"></a>协议规则</h3><ul>
<li>采用HTTPS传输</li>
<li>POST提交</li>
<li>MD5签名，请求和接收数据均需要校验签名，<a href="#安全规范">详见</a></li>
<li>调用申请退款、撤销订单接口需要商户证书</li>
</ul>
<h3 id="安全规范"><a href="#安全规范" class="headerlink" title="安全规范"></a>安全规范</h3><ul>
<li>签名算法<ol>
<li>设所有发送或者接收到的数据为集合M，将集合M内非空参数值的参数按照参数名ASCII码从小到大排序（字典序），使用URL键值对的格式（即key1=value1&amp;key2=value2…）拼接成字符串stringA。</li>
<li>在stringA最后拼接上key得到stringSignTemp字符串，并对stringSignTemp进行MD5运算，再将得到的字符串所有字符转换为大写，得到sign值signValue</li>
</ol>
</li>
<li><p>生成随机数算法</p>
<p>微信支付API接口协议中包含字段nonce_str，主要保证签名不可预测。我们推荐生成随机数算法如下：调用随机数函数生成，将得到的值转换为字符串</p>
</li>
<li><p>商户证书</p>
<ul>
<li><p>获取商户证书</p>
<blockquote>
<p>微信支付接口中，涉及资金回滚的接口会使用到商户证书，包括退款、撤销接口。</p>
</blockquote>
</li>
<li><p>使用商户证书</p>
</li>
<li>商户证书安全</li>
</ul>
</li>
<li><p>商户回调API安全</p>
<p>在普通的网络环境下，HTTP请求存在DNS劫持、运营商插入广告、数据被窃取，正常数据被修改等安全风险。商户回调接口使用HTTPS协议可以保证数据传输的安全性。所以微信支付建议商户提供给微信支付的各种回调采用HTTPS协议。请参考：<a href="https://pay.weixin.qq.com/wiki/doc/api/native.php?chapter=10_4" target="_blank" rel="external">HTTPS搭建指南</a>。</p>
</li>
</ul>
<p>参考资料：<a href="https://pay.weixin.qq.com/wiki/doc/api/native.php?chapter=4_1" target="_blank" rel="external">微信支付</a></p>
<h2 id="安全『相对论』-曾铭"><a href="#安全『相对论』-曾铭" class="headerlink" title="安全『相对论』 - 曾铭"></a>安全『相对论』 - 曾铭</h2><h3 id="角色"><a href="#角色" class="headerlink" title="角色"></a>角色</h3><h4 id="介质"><a href="#介质" class="headerlink" title="介质"></a>介质</h4><ul>
<li>服务器</li>
<li>API</li>
<li>网络传输过程</li>
<li>客户端</li>
</ul>
<h4 id="人"><a href="#人" class="headerlink" title="人"></a>人</h4><ul>
<li>owner： 开发者 内部人员</li>
<li>用户：消费者、商家</li>
<li>『坏人们』：黑客（白帽）、『友商』、路过……</li>
</ul>
<p>分清角色才能明白设定一个安全逻辑是针对谁，解决什么问题。</p>
<h3 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h3><ul>
<li>『一有适当的利润，资本就会非常胆壮起来。只要有10％的利润，它就会到处被人使用；有20％，就会活泼起来；有50％，就会引起积极的冒险；有100％，就会使人不顾一切法律；有300％，就会使人不怕犯罪，甚至不怕绞首的危险。』</li>
<li>没有绝对的安全，只有相对的安全</li>
<li>为了安全是否影响了普通用户？能否变通？</li>
<li>影响的是一个用户还是全部用户？</li>
<li>能否补救？主动？被动？</li>
<li>你不需要完美，你只需要比友商好一些</li>
</ul>
<h3 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h3><p>聊聊发短信接口的案例</p>
<ul>
<li>get -&gt; post</li>
<li>限制单日单个手机号，（避免单个手机号过多骚扰，产品不完整，建议加提示）</li>
<li>限制单个 IP 请求次数 （有必要，但要适量放宽，要跟踪结果）</li>
<li>图形验证码 (把问题转化为计算机不擅长的问题来保障安全，有必要，用户体验有影响，可优化）</li>
<li>一种 API 加密方式（根本问题是：API 如何判断这个请求是可信的客户端发来的）</li>
</ul>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">客户端 - 网络传输 - API</div><div class="line"><span class="built_in">key</span>, 加密（签名）算法 <span class="built_in">sign</span>=md5(<span class="built_in">key</span>+url_path+<span class="built_in">time</span>)</div></pre></td></tr></table></figure>
<p>##RSA -李仙鹏<br>在公钥系统中，我们采用公钥加密，私钥解密的方式，使得报文能够比较安全的传输。</p>
<p>假设A和B通信，但他们之间不通过对称密钥，B有一个公钥$K_B^+$和一个私钥$K_B^-$。为了与B实现通信，A首先需要获得B的公钥$K_B^+$对报文m进行加密，即$K_B^+(m)$；B收到A的加密报文后用私钥$K_B^-$进行解密，即$K_B^-(K_B^+(m))=m$。其中的加解密算法通常使用RSA（RSA取创始人Ron Rivest, Adi Shamir, Leonard Adleman的姓氏首字母）。</p>
<p>###RSA工作方式</p>
<p>加密时，首先把报文m做e次的幂运算，然后做模n的算数运算，即$m^e\%n$；解密则先把上述密文值做d次幂，再做模n运算，即$(m^e)^d\%n=m^\left(ed\right)\%n$。</p>
<p>###RSA工作原理推导</p>
<p>为了解开RSA工作原理的神秘面纱，需要使用数论中的一个神奇结论：如果<strong><em>p和q是素数</em></strong>，且有$n=pq$，则$x^y\%n$与$x^\left(y\%\left(p-1\right)\left(q-1\right)\right)\%n$相等。应用这个结论，那我们的私钥解密为：$$(m^e)^d\%n=m^\left(ed\%\left(p-1\right)\left(q-1\right)\right)\%n$$</p>
<p>注意，$m&lt;n$，并且我们是这样选择e和d的：$ed-1$能被$\left(p-1\right)\left(q-1\right)$整除，等价地说$ed\%\left(p-1\right)\left(q-1\right)=1$，由此可得：$$(m^e)^d\%n=m^1\%n=m\qquad m&lt;n，n=pq,ed\%\left(p-1\right)\left(q-1\right)=1,p和q是素数$$</p>
<p>于是乎，就得到了我们希望的结果：先对m做e次幂（加密）再做d次幂（解密），然后做模n的算数运算，就可得到原始报文m。另外通过颠倒上述公式的加解密次序，一样能得到原来的m。<br>$$(m^e)^d\%n=m=(m^d)^e\%n\Rightarrow K_B^-(K_B^+(m))=m=K_B^+(K_B^-(m))$$</p>
<p>因此B对外公开的公钥$K_B^+$为二元组$(n,e)$，私钥$K_B^-$为二元组$(n,d)$</p>
<p>####举例验证</p>
<p>条件：$$m&lt;n，\quad n=pq,\quad ed\%\left(p-1\right)\left(q-1\right)=1,\quad p和q是素数$$</p>
<p>取简单的值：$$p=5,\quad q=7$$</p>
<p>那么可以推导出：$$n=pq=5*7=35,\quad (ed-1)\%(p-1)(q-1)=0\Rightarrow (ed-1)\%(5-1)(7-1)=0\Rightarrow (ed-1)\%24=0$$</p>
<p>于是，我们可以简单起见，为了减少计算量，设$ed-1$为$24$的1倍，那么我们可取值$$e=5,\quad d=5$$</p>
<p>假设传输明文为：$$m=3$$</p>
<p>那么综上所述，我们可以得出：</p>
<ul>
<li><p>加密，$m^e\%n=3^5\%35=33$</p>
</li>
<li><p>解密，$(m^e\%n)^d\%n=33^5\%35=3=m$，因此对RSA加密后的密文解密得到的就是原始的明文</p>
</li>
</ul>
<p>##iOS 越狱应用安全-潘君</p>
<ul>
<li>对ipa砸壳</li>
<li>class-dump 导出头文件</li>
<li>头文件导入project方便查看</li>
<li>善用Xcode的搜索找需要hook的函数</li>
<li>hook函数完成不可告人的目的<ul>
<li><a href="http://blog.sina.com.cn/s/blog_45e2b66c01016jn5.html" target="_blank" rel="external">Message Hook</a></li>
</ul>
</li>
</ul>
<p>###参考资料</p>
<ul>
<li><a href="http://security.ios-wiki.com/" target="_blank" rel="external">iOS Security</a></li>
<li><a href="http://iosre.com/c/development-discussion" target="_blank" rel="external">iOSRE</a></li>
</ul>
<h1 id="网络安全-张超耀"><a href="#网络安全-张超耀" class="headerlink" title="网络安全 - 张超耀"></a>网络安全 - 张超耀</h1><h2 id="主要特性"><a href="#主要特性" class="headerlink" title="主要特性"></a>主要特性</h2><ul>
<li><p>保密性</p>
<ul>
<li>信息不泄露给非授权用户、实体或过程，或供其利用的特性。</li>
</ul>
</li>
<li><p>完整性</p>
<ul>
<li>数据未经授权不能进行改变的特性。即信息在存储或传输过程中保持不被修改、不被破坏和丢失的特性。</li>
</ul>
</li>
<li><p>可用性</p>
<ul>
<li>可被授权实体访问并按需求使用的特性。即当需要时能否存取所需的信息。例如网络环境下拒绝服务、破坏网络和有关系统的正常运行等都属于对可用性的攻击；</li>
</ul>
</li>
<li><p>可控性</p>
<ul>
<li>对信息的传播及内容具有控制能力。</li>
</ul>
</li>
<li><p>可审查性</p>
<ul>
<li>出现安全问题时提供依据与手段</li>
</ul>
</li>
</ul>
<h2 id="主要类型"><a href="#主要类型" class="headerlink" title="主要类型"></a>主要类型</h2><h3 id="网络安全由于不同的环境和应用而产生了不同的类型。主要有以下几种"><a href="#网络安全由于不同的环境和应用而产生了不同的类型。主要有以下几种" class="headerlink" title="网络安全由于不同的环境和应用而产生了不同的类型。主要有以下几种:"></a>网络安全由于不同的环境和应用而产生了不同的类型。主要有以下几种:</h3><ul>
<li><p>系统安全</p>
<ul>
<li>运行系统安全即保证信息处理和传输系统的安全。它侧重于保证系统正常运行。避免因为系统的崩演和损坏而对系统存储、处理和传输的消息造成破坏和损失。避免由于电磁泄翻，产生信息泄露，干扰他人或受他人干扰。</li>
</ul>
</li>
<li><p>网络的安全</p>
<ul>
<li>网络上系统信息的安全。包括用户口令鉴别，用户存取权限控制，数据存取权限、方式控制，安全审计。安全问题跟踩。计算机病毒防治，数据加密等。</li>
</ul>
</li>
<li><p>信息传播安全</p>
<ul>
<li>网络上信息传播安全，即信息传播后果的安全，包括信息过滤等。它侧重于防止和控制由非法、有害的信息进行传播所产生的后果，避免公用网络上大云自由传翰的信息失控。</li>
</ul>
</li>
<li><p>信息内容安全</p>
<ul>
<li>网络上信息内容的安全。它侧重于保护信息的保密性、真实性和完整性。避免攻击者利用系统的安全漏润进行窃听、冒充、诈编等有损于合法用户的行为。其本质是保护用户的利益和隐私。</li>
</ul>
</li>
</ul>
<h2 id="HTTP加密-吴明"><a href="#HTTP加密-吴明" class="headerlink" title="HTTP加密 -吴明"></a>HTTP加密 -吴明</h2><ul>
<li>对称性加密<ul>
<li>加密双方使用同一个密钥进行加密和解密。密钥是控制加密及解密过程的指令。算法是一组规则，规定如何进行加密和解密</li>
<li>常用算法:<ul>
<li>DES、3DES、TDEA、Blowfish、RC2、RC4、RC5、IDEA、SKIPJACK、AES</li>
</ul>
</li>
</ul>
</li>
<li>非对称性加密<ul>
<li>非对称加密算法需要两个密钥：公开密钥（publickey）和私有密钥（privatekey）。公开密钥与私有密钥是一对，如果用公开密钥对数据进行加密，只有用对应的私有密钥才能解密；如果用私有密钥对数据进行加密，那么只有用对应的公开密钥才能解密。因为加密和解密使用的是两个不同的密钥，所以这种算法叫作非对称加密算法。</li>
<li>RSA、Elgamal、背包算法、Rabin、D-H、ECC（椭圆曲线加密算法）</li>
</ul>
</li>
<li>对称性加密示例<ul>
<li>sig计算<br>sig主要用来做校验，由BaseString和SecretKey通过HMAC-SHA1算法计算得到的。</li>
<li>BaseString 组成<br>BaseString由以下三部分组成：http方法名、请求url和参数，其中参数需要按照统一的规则进行编码和排序，具体规则如下：<br>根据参数名称将所有请求参数按照参数名字母的先后顺序逐个比较，进行升序排序（参数名注意区分大小写），然后使用=号连接参数名和编码后的参数值，最后使用_下划线连接经过上述处理后的参数，例如：<br><code><br>param1=encode(value1)_param2=encode(value2)_parma3=encode(value3)<br></code><br>注：a、比如参数名：abcdef和abcDef，abc都是一样的，大写D的asi码在小写d的asi码前面，所以：abcDef排在abcdef前面<br>b、BaseString中的参数是指所有GET/POST的请求参数，但不包括sig参数，也不包括cookie或HTTP header字段<br>将http方法名、请求url和参数这三部分用”&amp;”连接起来，然后再进行<br>encode编码即得到BaseString，使用伪代码描述以上过程如下：<br><code><br>BaseString=encode(httpMethod+”&amp;”+httpUrl+”&amp;”+sorted_query<em>params.each{|p,v|p+”=”+encode(v)}.join(“</em>“))<br></code><br>然后使用BaseString和SecretKey通过HMAC-SHA1算法计算sig，最后将计算<br>出的sig进行编码，使用伪代码描述签名过程如下：<br>encode (getHmacSHA1Sig(BaseString, SecretKey)）<ul>
<li>sig计算示例<br>例如某个请求的url为<a href="http://192.168.6.218:8080/test/jobplan/login，假设使用的ConsumerKey为eqsrje1tlarvvm54fwsjhcb4,使用的SecretKey为ks5t9fpiwmo3oanccu4f6eas,请求中用到的参数如下：" target="_blank" rel="external">http://192.168.6.218:8080/test/jobplan/login，假设使用的ConsumerKey为eqsrje1tlarvvm54fwsjhcb4,使用的SecretKey为ks5t9fpiwmo3oanccu4f6eas,请求中用到的参数如下：</a><br><code><br>consumer_key – eqsrje1tlarvvm54fwsjhcb4<br>hrid - 00016145<br>password - 7215ee9c7d9dc229d2921a40e899ec5f<br>fields - dspName<br>format – xml<br>timestamp - 2013-11-20 09:21:17<br></code><br>首先依据上面的算法得出BaseString为:<br><code><br>POST%26http%3A%2F%2F192.168.6.218%3A8080%2FfuannaEP%2Fjobplan%2Flogin%26consumer_key%3Deqsrje1tlarvvm54fwsjhcb4_fields%3DdspName_format%3Djson_hrid%3D00016145_password%3D7215ee9c7d9dc229d2921a40e899ec5f_timestamp%3D2013-11-20%2B09%253A21%253A17<br></code><br>通过BaseString和SecretKey通过HMAC-SHA1算法计算所得的签名如下：<br>dqgTQkET7MxSShy1M4WXbWEKodA%3D<br>然后就可以发送请求，生成的http 请求链接如下：<br><code><br><a href="http://192.168.6.218:8080/test/jobplan/login?password=7215ee9c7d9dc229d2921a40e899ec5f&amp;consumer_key=eqsrje1tlarvvm54fwsjhcb4&amp;hrid=10057&amp;format=xml&amp;fields=dspName×tamp" target="_blank" rel="external">http://192.168.6.218:8080/test/jobplan/login?password=7215ee9c7d9dc229d2921a40e899ec5f&amp;consumer_key=eqsrje1tlarvvm54fwsjhcb4&amp;hrid=10057&amp;format=xml&amp;fields=dspName×tamp</a> =2013-11-20 09:21:17&amp;signature=dqgTQkET7MxSShy1M4WXbWEKodA%3D<br></code></li>
</ul>
</li>
</ul>
</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/移动组周分享/">移动组周分享</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-简单谈谈计算机网络" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/07/24/简单谈谈计算机网络/" class="article-date">
      <time datetime="2015-07-24T09:46:13.000Z" itemprop="datePublished">2015-07-24</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/24/简单谈谈计算机网络/">简单谈谈计算机网络</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="RESTful-API-设计介绍-曾铭"><a href="#RESTful-API-设计介绍-曾铭" class="headerlink" title="RESTful API 设计介绍 - 曾铭"></a>RESTful API 设计介绍 - 曾铭</h2><h3 id="WHAT"><a href="#WHAT" class="headerlink" title="WHAT"></a>WHAT</h3><ul>
<li>API 概念</li>
<li>其它方案 SOAP 等</li>
<li>HTTP 无状态</li>
<li>RESTful 概念 REpresentational State Transfer 表征性状态传输</li>
<li>复用 HTTP 本身的协议定义</li>
<li>带来的好处：通用，动词，code，缓存，安全</li>
</ul>
<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">BAD</div><div class="line"><span class="string">/getProduct</span></div><div class="line"><span class="string">/addProduct</span></div><div class="line"><span class="string">/deleteProduct</span></div><div class="line"><span class="string">/listProducts</span></div><div class="line"><span class="string">/productShop</span>?productId=1</div></pre></td></tr></table></figure>
<ul>
<li>对单一实体的重复</li>
<li>多个实体对操作的重复</li>
<li>实体之间逻辑接口的重复定义</li>
</ul>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">GOOD</div><div class="line">GET <span class="string">/products</span> : will return the list of all products</div><div class="line">GET <span class="string">/products/4</span> : will retrieve product <span class="comment">#4</span></div><div class="line">POST <span class="string">/products</span> : will add a product to the collection</div><div class="line">PUT <span class="string">/products/4</span> : will update product <span class="comment">#4</span></div><div class="line">DELETE <span class="string">/products/4</span> : will delete product <span class="comment">#4</span></div><div class="line"></div><div class="line">GET <span class="string">/products/4/shop</span></div><div class="line">GET <span class="string">/users/3/favorite_schools</span></div><div class="line">POST <span class="string">/users/3/favorite_schools</span></div><div class="line">PUT <span class="string">/users/3/favorite_schools/5</span></div></pre></td></tr></table></figure>
<ul>
<li>好的 API 定义清晰，可预期。</li>
</ul>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ul>
<li>重复的实现或设计，嗅嗅不好的味道</li>
<li>重复制造轮子，而不是重复发明轮子 （如用户授权，加密，缓存等）</li>
<li>RESTful 不仅仅适用于 APP，重点是 C/S</li>
<li>各端实现：<a href="http://www.zhihu.com/question/28557115/answer/48094438" target="_blank" rel="external">参考覃超的知乎回答</a></li>
</ul>
<hr>
<h2 id="IP网段划分-王胜"><a href="#IP网段划分-王胜" class="headerlink" title="IP网段划分 - 王胜"></a>IP网段划分 - 王胜</h2><h3 id="三大类IP段"><a href="#三大类IP段" class="headerlink" title="三大类IP段"></a>三大类IP段</h3><ul>
<li><p>A类地址</p>
<ul>
<li>第1字节为<a href="http://baike.baidu.com/view/547479.htm" target="_blank" rel="external">网络地址</a>，其他3个字节为主机地址。另外，第1个字节的最高位固定为0。</li>
<li>地址范围：1.0.0.0到126.255.255.255。</li>
<li>默认子网掩码：255.0.0.0，一个子网最多可以容纳1677万多台电脑。</li>
<li>保留地址：127.0.0.0到127.255.255.255是保留地址，用做循环测试用。</li>
<li>私有地址：10.0.0.0到10.255.255.255。【0000 1010】</li>
</ul>
</li>
<li><p>B类地址</p>
<ul>
<li>第1字节和第2字节为网络地址，其他2个字节为主机地址。另外1个字节的前2位固定为10。</li>
<li>地址范围：128.0.0.0到191.255.255.255。</li>
<li>默认子网掩码：255.255.0.0　一个子网最多可以容纳6万台电脑。</li>
<li>保留地址：169.254.0.0到169.254.255.255是保留地址。如果你的IP地址是自动获取IP地址，而你在网络上又没有找到可用的DHCP服务器，这时你将会从169.254.0.1到169.254.255.254中临时获得一个IP地址。</li>
<li>私有地址：在B类地址中，172.16.0.0到172.31.255.255是私有地址。</li>
</ul>
</li>
<li><p>C类地址</p>
<ul>
<li>第1字节、第2字节和第3个字节为网络地址，第4个字节为主机地址。另外第1个字节的前三位固定为110。</li>
<li>地址范围：192.0.0.0到223.255.255.255。</li>
<li>默认子网掩码　255.255.255.0　一个子网最多可以容纳254台电脑。</li>
<li>私有地址：192.168.0.0到192.168.255.255是私有地址。</li>
</ul>
</li>
</ul>
<h3 id="两个特殊地址"><a href="#两个特殊地址" class="headerlink" title="两个特殊地址"></a>两个特殊地址</h3><ul>
<li>0.0.0.0 <a href="http://www.cnblogs.com/hnrainll/archive/2011/10/13/2210101.html" target="_blank" rel="external">全网地址</a>，三界之外的收容器</li>
<li>255.255.255.255 广播地址</li>
</ul>
<hr>
<h2 id="OSI七层模型详解-吴明"><a href="#OSI七层模型详解-吴明" class="headerlink" title="OSI七层模型详解 - 吴明"></a>OSI七层模型详解 - 吴明</h2><p><a href="http://blog.csdn.net/yaopeng_2005/article/details/7064869" target="_blank" rel="external">OSI七层模型详解</a></p>
<ul>
<li>物理层：<ul>
<li>相关协议：IEEE802.2,Ethernet v.2,Internetwork</li>
</ul>
</li>
<li>数据链路层<ul>
<li>相关协议：MPLS，XTP,DCAP</li>
</ul>
</li>
<li>网络层</li>
<li>传输层<ul>
<li>相关协议：EGP,NHRP</li>
</ul>
</li>
<li>会话层：</li>
<li>表示层：</li>
<li>应用层:</li>
</ul>
<hr>
<h2 id="网络分层协议模型-张超耀"><a href="#网络分层协议模型-张超耀" class="headerlink" title="网络分层协议模型 - 张超耀"></a>网络分层协议模型 - 张超耀</h2><p>###网络分层协议模型</p>
<ul>
<li><p>根据 TCP/IP协议簇的协议来命名</p>
<ul>
<li>应用层　　数据         　 泛指应用层使用的</li>
<li>传输层　　数据段　　　　　传输层</li>
<li>网络层　　数据包　　　　　网络层</li>
<li>链路层　　帧　　　　　　　网络接入层</li>
<li>物理层　　比特(位)　　　 通过介质实际传输数据时使用的</li>
</ul>
</li>
<li><p>OSI七成协议模型</p>
<ul>
<li>应用层:例如HTTP、SMTP、SNMP、FTP、Telnet、SIP、SSH、NFS、RTSP、XMPP、Whois、ENRP</li>
<li>表示层:例如XDR、ASN.1、SMB、AFP、NCP</li>
<li>会话层:例如ASAP、TLS、SSH、ISO 8327 / CCITT X.225、RPC、NetBIOS、ASP、Winsock、BSD sockets</li>
<li>传输层:例如TCP、UDP、RTP、SCTP、SPX、ATP、IL</li>
<li>网络层:例如IP、ICMP、IGMP、IPX、BGP、OSPF、RIP、IGRP、EIGRP、ARP、RARP、X.25</li>
<li>数据链路层:例如以太网、令牌环、HDLC、帧中继、ISDN、ATM、IEEE 802.11、FDDI、PPP</li>
<li>物理层:例如线路、无线电、光纤</li>
</ul>
</li>
<li><p>分层的好处:</p>
<ul>
<li>各层之间是独立的</li>
<li>灵活性好</li>
<li>结构上可分割开</li>
<li>易于实现和维护</li>
<li>能促进标准化工作</li>
</ul>
</li>
</ul>
<p>###协议模型:<br><img src="http://pic002.cnblogs.com/images/2012/387401/2012070810010373.jpg" alt=""></p>
<p>###包装数据包的过程 </p>
<ul>
<li>TCP传给IP的数据单元称作TCP报文段或简称为TCP段(TCP segment)，传给网络接口层的数据单元称作IP数据报(IPdatagram).通过以太网传输的比特流称作帧(Frame)<br><img src="http://hiphotos.baidu.com/exp/pic/item/90cebeec08fa513dd74179353f6d55fbb3fbd937.jpg" alt=""></li>
</ul>
<p>###分用即解包的过程<br><img src="http://pic002.cnblogs.com/images/2012/387401/2012072116365656.png" alt=""></p>
<p>###不同层直接协议关系<br><img src="http://pic002.cnblogs.com/images/2012/387401/2012072116311034.png" alt=""></p>
<hr>
<h2 id="TCP-IP三次握手与四次挥手-李仙鹏"><a href="#TCP-IP三次握手与四次挥手-李仙鹏" class="headerlink" title="TCP/IP三次握手与四次挥手 - 李仙鹏"></a>TCP/IP三次握手与四次挥手 - 李仙鹏</h2><p><img src="http://mmbiz.qpic.cn/mmbiz/NVvB3l3e9aESeCKMfdLmzic5mS9DReZ3ecGqraIDhDam4NmtRiceSzXCpICsu2keyhg1pMwxZVJBWTIvnwpkL6CA/640?wxfrom=5" alt="TCP/IP三次握手与四次挥手"></p>
<blockquote>
<p>引用自<a href="http://mp.weixin.qq.com/s?__biz=MzA3MDMyMjkzNg==&amp;mid=210133499&amp;idx=1&amp;sn=d56455712de557b74ce17997fe29c06f&amp;scene=1&amp;key=0acd51d81cb052bc42a5850a900340ace87cb6cc26440e97233d7fab5311d8b5021ca25b901ab1d0434b3a23ead87ef2&amp;ascene=0&amp;uin=MTg4NDcxOTMyMQ%3D%3D&amp;devicetype=iMac+MacBookPro12%2C1+OSX+OSX+10.10.4+build(14E46" target="_blank" rel="external">图解 TCP/IP 协议</a>&amp;version=11020012&amp;pass_ticket=Mh3kdFcxrCoIa0yIg1d7eLqJGuQkBQLzt2YIYx5poC%2BLzaWWMRZ5D1Vl6Pobd8ui)</p>
</blockquote>
<hr>
<p>##计算机网络安全 - 杨志平</p>
<h3 id="2015网络安全事件"><a href="#2015网络安全事件" class="headerlink" title="2015网络安全事件"></a>2015网络安全事件</h3><ul>
<li>携程网内部员工误删除代码 网站整体宕机12小时</li>
<li>支付宝机房电缆被挖断 部分区域服务中断</li>
<li>网易骨干网遭攻击 百万用户无法打游戏</li>
<li>海康威视被黑客植入代码 导致被远程监控</li>
</ul>
<h3 id="敏感数据（账号、密码等）"><a href="#敏感数据（账号、密码等）" class="headerlink" title="敏感数据（账号、密码等）"></a>敏感数据（账号、密码等）</h3><ul>
<li>账号密码（post明文显示）</li>
<li>重要资源数据（防爬虫）</li>
<li>多重账号威胁（网络账号通用）</li>
<li>通讯协议破解（iMessage）</li>
</ul>
<h3 id="网络传输加密"><a href="#网络传输加密" class="headerlink" title="网络传输加密"></a>网络传输加密</h3><ul>
<li><p>数据加密算法</p>
<ul>
<li>对称式加密技术    (加密-解密)<ul>
<li>DES（Data Encryption Standard）<blockquote>
<p>数据加密标准，速度较快，适用于加密大量数据的场合。</p>
</blockquote>
</li>
<li>3DES（Triple DES）<blockquote>
<p>是基于DES，对一块数据用三个不同的密钥进行三次加密，强度更高。</p>
</blockquote>
</li>
<li>AES（Advanced Encryption Standard）<blockquote>
<p>高级加密标准，是下一代的加密算法标准，速度快，安全级别高；</p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code>- 非对称式加密技术（公钥-私钥）
    - RSA
    &gt;是一个支持变长密钥的公共密钥算法，需要加密的文件块的长度也是可变的；
    - DSA（Digital Signature Algorithm）
    &gt;数字签名算法，是一种标准的 DSS（数字签名标准）；
    - ECC（Elliptic Curves Cryptography）
    &gt;椭圆曲线密码编码学。

- 散列算法 （不可逆）
    - MD5（Message Digest Algorithm 5）
    &gt;是RSA数据安全公司开发的一种单向散列算法，非可逆，相同的明文产生相同的密文。
    - SHA（Secure Hash Algorithm）
    &gt;可以对任意长度的数据运算生成一个160位的数值；
</code></pre><p><a href="http://www.iplaysoft.com/encrypt-arithmetic.html" target="_blank" rel="external">3个著名加密算法(MD5、RSA、DES)的解析</a></p>
<h3 id="简单加密演示"><a href="#简单加密演示" class="headerlink" title="简单加密演示"></a>简单加密演示</h3><ul>
<li>简单位移式加密（经典：凯撒加密）</li>
</ul>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">“恺撒密码”据传是古罗马恺撒大帝用来保护重要军情的加密系统。它是一种替代密码，通过将字母按顺序推后起<span class="number">3</span>位起到加密作用，</div><div class="line">如将字母A换作字母D，将字母B换作字母E。据说恺撒是率先使用加密函的古代将领之一，因此这种加密方法被称为恺撒密码。</div><div class="line">假如有这样一条指令：</div><div class="line"><span class="keyword">RETURN</span> <span class="keyword">TO</span> ROME</div><div class="line">用恺撒密码加密后就成为：</div><div class="line">UHWXUA WR URPH</div></pre></td></tr></table></figure>
<ul>
<li>置换加密</li>
</ul>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">令明文m=m1,m2,...mL。令置换矩阵所决定的置换为pi，则加密置换c=Ek(m)=(c1,c2,...cL)=mpi(<span class="number">1</span>),mpi(<span class="number">2</span>),...,mpi(L)</div><div class="line">解密置换</div><div class="line">d=Dk(c)=(cn^<span class="number">-1</span>(<span class="number">1</span>),cn^<span class="number">-1</span>(<span class="number">2</span>),...cn^<span class="number">-1</span>(L))</div><div class="line">例，置换密码。给定明文为the simplest possible transposition ciphers,</div><div class="line">将明文分成长为L=<span class="number">5</span>的段，</div><div class="line">m1=thesi, m2=mples m3=tposs m4=iblet,</div><div class="line">m5=ransp, m6=ositi m7=oncip m8=hersx</div><div class="line">最后一段长不足<span class="number">5</span>，加添一个字母x。将隔断的字母序号按下述置换矩阵进行换位：</div><div class="line">Ek= <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span></div><div class="line"><span class="number">3</span> <span class="number">0</span> <span class="number">4</span> <span class="number">2</span> <span class="number">1</span></div><div class="line">得到密文如下</div><div class="line">STIEH EMSLP STSOP EITLB SRPNA TOIIS IOPCN SHXRE</div></pre></td></tr></table></figure>
<hr>
<p>##Alamofire文档阅读 - 潘君</p>
<p><code>AFNetworking的继承者</code></p>
<p>摘录自<a href="https://github.com/Alamofire/Alamofire" target="_blank" rel="external">Alamofire 官方文档</a></p>
<p>###Feature</p>
<ul>
<li>Chainable Request / Response methods<br>  链式 request / response<br>   Complete Documentation</li>
</ul>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// Response handlers can <span class="built_in">even</span> be chained:</div><div class="line">Alamofire.request(.GET, <span class="string">"http://httpbin.org/get"</span>)</div><div class="line">         .responseString &#123; <span class="symbol">_</span>, <span class="symbol">_</span>, <span class="built_in">string</span>, <span class="symbol">_</span> <span class="keyword">in</span></div><div class="line">             println(<span class="built_in">string</span>)</div><div class="line">         &#125;</div><div class="line">         .responseJSON &#123; <span class="symbol">_</span>, <span class="symbol">_</span>, JSON, <span class="symbol">_</span> <span class="keyword">in</span></div><div class="line">             println(JSON)</div><div class="line">         &#125;</div></pre></td></tr></table></figure>
<ul>
<li><p>URL / JSON / plist Parameter Encoding<br> 除了以上几种 还可以自定义<br> Alamofire provides built-in response serialization for strings, JSON, and property lists, but others can be added in extensions on Alamofire.Request.</p>
<ul>
<li>Upload File / Data / Stream / MultipartFormData<br>多种文件上传方式</li>
</ul>
</li>
<li><p>Download using Request or Resume data</p>
</li>
<li><p>Authentication with NSURLCredential</p>
</li>
<li><p>HTTP Response Validation</p>
</li>
<li><p>Progress Closure &amp; NSProgress</p>
</li>
<li>cURL Debug Output</li>
<li>Comprehensive Unit Test Coverage</li>
</ul>
<h3 id="某些点"><a href="#某些点" class="headerlink" title="某些点"></a>某些点</h3><ul>
<li>url编码<br>GET<figure class="highlight gams"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">GET Request With URL-Encoded <span class="keyword">Parameters</span></div><div class="line">Alamofire.request(.GET, <span class="string">"http://httpbin.org/get"</span>, <span class="keyword">parameters</span>: [<span class="string">"foo"</span>: <span class="string">"bar"</span>])</div><div class="line"><span class="comment">// http://httpbin.org/get?foo=bar</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>POST<br><figure class="highlight prolog"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">let parameters = [</div><div class="line">    <span class="string">"foo"</span>: <span class="string">"bar"</span>,</div><div class="line">    <span class="string">"baz"</span>: [<span class="string">"a"</span>, <span class="number">1</span>],</div><div class="line">    <span class="string">"qux"</span>: [</div><div class="line">        <span class="string">"x"</span>: <span class="number">1</span>,</div><div class="line">        <span class="string">"y"</span>: <span class="number">2</span>,</div><div class="line">        <span class="string">"z"</span>: <span class="number">3</span></div><div class="line">    ]</div><div class="line">]</div><div class="line"></div><div class="line"><span class="symbol">Alamofire</span>.request(.<span class="symbol">POST</span>, <span class="string">"http://httpbin.org/post"</span>, parameters: parameters)</div><div class="line">// <span class="symbol">HTTP</span> body: foo=bar&amp;baz[]=a&amp;baz[]=<span class="number">1</span>&amp;qux[x]=<span class="number">1</span>&amp;qux[y]=<span class="number">2</span>&amp;qux[z]=<span class="number">3</span></div></pre></td></tr></table></figure></p>
<ul>
<li><p>转object<br>Generic Response Object Serialization</p>
</li>
<li><p>校验</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">Manual Validation</div><div class="line"></div><div class="line">Alamofire.request(.GET, <span class="string">"http://httpbin.org/get"</span>, parameters: [<span class="string">"foo"</span>: <span class="string">"bar"</span>])</div><div class="line">         .validate(statusCode: <span class="number">200</span>..&lt;<span class="number">300</span>)</div><div class="line">         .validate(contentType: [<span class="string">"application/json"</span>])</div><div class="line">         .response &#123; <span class="symbol">_</span>, <span class="symbol">_</span>, <span class="symbol">_</span>, <span class="built_in">error</span> <span class="keyword">in</span></div><div class="line">                  println(<span class="built_in">error</span>)</div><div class="line">         &#125;</div><div class="line">Automatic Validation</div><div class="line"></div><div class="line">Automatically validates <span class="built_in">status</span> code within <span class="number">200</span>...<span class="number">299</span> <span class="built_in">range</span>, <span class="keyword">and</span> that the Content-Type header of the response matches the Accept header of the request, <span class="keyword">if</span> one <span class="built_in">is</span> provided.</div><div class="line"></div><div class="line">Alamofire.request(.GET, <span class="string">"http://httpbin.org/get"</span>, parameters: [<span class="string">"foo"</span>: <span class="string">"bar"</span>])</div><div class="line">         .validate()</div><div class="line">         .response &#123; <span class="symbol">_</span>, <span class="symbol">_</span>, <span class="symbol">_</span>, <span class="built_in">error</span> <span class="keyword">in</span></div><div class="line">             println(<span class="built_in">error</span>)</div><div class="line">         &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>方便打印<br>Printable</p>
</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">let request = Alamofire.request(<span class="selector-class">.GET</span>, <span class="string">"http://httpbin.org/ip"</span>)</div><div class="line"></div><div class="line"><span class="function"><span class="title">println</span><span class="params">(request)</span></span></div><div class="line"></div><div class="line"><span class="comment">// GET http://httpbin.org/ip (200)</span></div></pre></td></tr></table></figure>
<p>DebugPrintable</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">let request = Alamofire.request(<span class="selector-class">.GET</span>, <span class="string">"http://httpbin.org/get"</span>, parameters: [<span class="string">"foo"</span>: <span class="string">"bar"</span>])</div><div class="line"></div><div class="line"><span class="function"><span class="title">debugPrintln</span><span class="params">(request)</span></span></div></pre></td></tr></table></figure>
<ul>
<li>支持暂停/恢复/取消</li>
</ul>
<ol>
<li>suspend(): Suspends the underlying task and dispatch queue</li>
<li>resume(): Resumes the underlying task and dispatch queue. If the owning manager does not have startRequestsImmediately set to true, the request must call resume() in order to start.</li>
<li>cancel(): Cancels the underlying task, producing an error that is passed to any registered response handlers.</li>
</ol>
<ul>
<li>自定义response serializer</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/移动组周分享/">移动组周分享</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-研发路上的那些事儿" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/07/17/研发路上的那些事儿/" class="article-date">
      <time datetime="2015-07-16T16:56:00.000Z" itemprop="datePublished">2015-07-16</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/17/研发路上的那些事儿/">研发路上的那些事儿</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="心酸研发路-杨志平"><a href="#心酸研发路-杨志平" class="headerlink" title="心酸研发路 - 杨志平"></a>心酸研发路 - 杨志平</h2><ul>
<li>大版本发布周期过长（原因：团队专业有限，探索前进，频繁修改），导致没有什么机会思考、设计，人也拖的身心疲惫</li>
<li>引入架构思想，软件质量提高。后期频繁加入改动，冲淡架构</li>
<li>老板干涉过多 导致：压力过大 质量无法保证</li>
<li>老板高度重视UI</li>
</ul>
<h2 id="研发路上的那些事儿-张超耀"><a href="#研发路上的那些事儿-张超耀" class="headerlink" title="研发路上的那些事儿 - 张超耀"></a>研发路上的那些事儿 - 张超耀</h2><ul>
<li>没有专业的移动端团队人员</li>
<li>产品研发没有系统流程，走一步算一步</li>
<li>需求人人可以改</li>
<li>忙的时候忙的要死，闲的时候闲的蛋疼</li>
</ul>
<h2 id="研发之路上的坑-潘君"><a href="#研发之路上的坑-潘君" class="headerlink" title="研发之路上的坑 - 潘君"></a>研发之路上的坑 - 潘君</h2><h3 id="盲目相信自己-不合理的压缩周期"><a href="#盲目相信自己-不合理的压缩周期" class="headerlink" title="盲目相信自己,不合理的压缩周期"></a>盲目相信自己,不合理的压缩周期</h3><p>在开发周期过程中,过分相信努力的作用,以为团队只要努努力,可以爆发一个超越平时的战斗力.</p>
<p>在预估周期的过程中,过分考虑老板的感受,不合理的压缩周期,不断的向需求妥协,导致后期死的非常难看.</p>
<p>一方面自己的预估承诺没有兑现.另一方面团队本身也精疲力尽.</p>
<h3 id="好事多磨-鸡血不能多打"><a href="#好事多磨-鸡血不能多打" class="headerlink" title="好事多磨,鸡血不能多打"></a>好事多磨,鸡血不能多打</h3><p>一个好的项目不是短期可以做出来的,是必须慢慢打磨,而过分相信一个突击开发周期能够做出一个好产品是过于乐观的.</p>
<p>好事多磨,好的东西需要一个相对合理的周期.这个周期可能比较长,所以在较长的一段时间内要做的是保证团队的舒适度,而不是一味的打鸡血鼓励.</p>
<p>鸡血是一种需要正向循环的方式.如果没有一个好的反馈,鸡血的功效性就会越来越弱,最后反而会有逆效果.</p>
<h2 id="高层强插改需求-吴明"><a href="#高层强插改需求-吴明" class="headerlink" title="高层强插改需求 - 吴明"></a>高层强插改需求 - 吴明</h2><ul>
<li>背景<ul>
<li>原公司移动开发中，在一项目层层过滤确定产品后，开发人员并已经开发了一段时间后，公司老板或者其他高层介入修改需求，延长开发时间。</li>
</ul>
</li>
<li>缺点：<ol>
<li>开发时间浪费，花费时间做无用功</li>
<li>高层施压不利于下层产品开发，及产品迭代</li>
<li>项目延期打击开发团队人员士气和积极性</li>
<li>项目接近上线更改需求，严重影响开发人员心情，及代码编写质量</li>
</ol>
</li>
<li>后期流程改进<ol>
<li>从项目入口抓起：所有指定项目必须经该项目需求方，产品，开发等直接最高领导确定，并且不更改需求下，开发人员才开发项目。</li>
<li>项目分阶段给高层领导汇报，把控项目质量。</li>
<li>高层需要项目后期改需求，只能下个版本迭代，本项目不予以改需求。</li>
</ol>
</li>
</ul>
<h2 id="参与创业的辛酸史-郁兵生"><a href="#参与创业的辛酸史-郁兵生" class="headerlink" title="参与创业的辛酸史 - 郁兵生"></a>参与创业的辛酸史 - 郁兵生</h2><ul>
<li>初创团队，没日没夜加班搞项目</li>
<li>初创团队，不了解情况，项目周期把握不清。赶时间攒代码。</li>
</ul>
<h2 id="大众【设计占整个研发的重头】-顾鹏凌"><a href="#大众【设计占整个研发的重头】-顾鹏凌" class="headerlink" title="大众【设计占整个研发的重头】- 顾鹏凌"></a>大众【设计占整个研发的重头】- 顾鹏凌</h2><ul>
<li>完善的管理体</li>
<li>细控的研发流程</li>
<li>设计阶段作为重头，精雕细琢，避免后期遇到问题需要大改动</li>
</ul>
<h2 id="杂乱的管理-吴强"><a href="#杂乱的管理-吴强" class="headerlink" title="杂乱的管理  - 吴强"></a>杂乱的管理  - 吴强</h2><ul>
<li>初创团队，相关人员不完备</li>
<li>产品经理只做了原型的工作，没有把控住需求的变更</li>
<li>一人多职，多项目参与</li>
<li>空降产品经理，做事一意孤行，跟团队不和</li>
</ul>
<h2 id="51offer的原始状态-庄丰洲"><a href="#51offer的原始状态-庄丰洲" class="headerlink" title="51offer的原始状态 - 庄丰洲"></a>51offer的原始状态 - 庄丰洲</h2><ul>
<li>没有移动端团队人员和移动端研发规范流程</li>
<li>是个人都可以提需求</li>
</ul>
<h2 id="工作感悟－李仙鹏"><a href="#工作感悟－李仙鹏" class="headerlink" title="工作感悟－李仙鹏"></a>工作感悟－李仙鹏</h2><ul>
<li><p>团队结构：</p>
<blockquote>
<p>崇尚扁平化的互联网公司，员工之间没有非常明县的上下级关系。</p>
</blockquote>
</li>
<li><p>需求把控：</p>
<blockquote>
<p>需求不明确、中途变更、压榨开发都TMD是耍流氓</p>
<ol>
<li><p>一个好的项目需求，应该在kick off前全面规划产品，产品和设计明确需求并且画押签字，中途不得变更。当临时提出需求变更时，技术应该敢于把画押字据拿出来并且提出拒绝——把变更需求留在下一版本迭代。</p>
</li>
<li><p>不应该为了迎合进度而倒推时间压榨开发，这样做出来的东西很可能会是漏洞百出的</p>
</li>
</ol>
</blockquote>
</li>
</ul>
<h2 id="Better-的一路走来-王胜"><a href="#Better-的一路走来-王胜" class="headerlink" title="Better 的一路走来 - 王胜"></a><a href="http://www.iambetter.cn/" target="_blank" rel="external">Better</a> 的一路走来 - 王胜</h2><h3 id="第一个版本历时4个月的天天加班"><a href="#第一个版本历时4个月的天天加班" class="headerlink" title="第一个版本历时4个月的天天加班"></a>第一个版本历时4个月的天天加班</h3><ul>
<li>评估开发时间时，仅有原型；设计稿一出，开发人员瞬间觉得工作量要直线上升。</li>
<li>按照一个有经验的工程师估出时间，然后上面说再调一个人，时间周期按照除以2来算。掉入《人月计划》中所说的坑。</li>
<li>新组建的团队，缺少默契，需要磨合。【包括客户端之间，客户端与API之间，客户端与UI之间】</li>
<li>临近上线，上面对体验要求无止境，导致细节调整没完没了</li>
</ul>
<h3 id="一起努力，挺过4个月"><a href="#一起努力，挺过4个月" class="headerlink" title="一起努力，挺过4个月"></a>一起努力，挺过4个月</h3><ul>
<li>打过鸡血</li>
<li>慢慢地团队之间有了默契</li>
<li>制定上线体验阀值，不能无止境提出体验调整的需求</li>
</ul>
<h3 id="后续版本的研发"><a href="#后续版本的研发" class="headerlink" title="后续版本的研发"></a>后续版本的研发</h3><ul>
<li>严格按照Scrum流程迭代开发版本，目前2周一迭代</li>
<li>Sprint确定需求后，不能强制加入新的需求</li>
<li>特例的需求要插入Sprint，那么就顺延Sprint的周期</li>
</ul>
<h2 id="工作经历的一些片段-曾铭"><a href="#工作经历的一些片段-曾铭" class="headerlink" title="工作经历的一些片段 - 曾铭"></a>工作经历的一些片段 - 曾铭</h2><h3 id="文化"><a href="#文化" class="headerlink" title="文化"></a>文化</h3><ul>
<li>（敏感信息）略</li>
</ul>
<h3 id="好的"><a href="#好的" class="headerlink" title="好的"></a>好的</h3><ul>
<li>工程师主导的开发流程：产品做调研，提目标，开发参与设计 feature 包揽实现、测试、验证</li>
<li>牛人不少：一流的人招一流的人，二流的人招三流的人</li>
<li>优秀工具的使用 （工具绝非一蹴而就， svn -&gt; git，）</li>
<li>对代码的极致追求 （代码行数、朝歌-&gt;镐京、Hackathon：一夜实现客户端聊天）</li>
<li>相对优秀的办公环境 （畅通的网络等）</li>
</ul>
<h1 id="不好的"><a href="#不好的" class="headerlink" title="不好的"></a>不好的</h1><ul>
<li>目标不明确 (对商家态度的摇摆)</li>
<li>不接地气（商业化不成功）</li>
<li>理想主义者的碰撞, 无妥协</li>
<li>急躁（寻求改变的高期望）</li>
<li>压力大</li>
</ul>
<h3 id="以上不针对具体公司"><a href="#以上不针对具体公司" class="headerlink" title="以上不针对具体公司"></a>以上不针对具体公司</h3>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/移动组周分享/">移动组周分享</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/研发杂谈/">研发杂谈</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/3/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/5/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2018 Wilson
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>