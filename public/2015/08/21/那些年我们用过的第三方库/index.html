<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>那些年我们用过的第三方库 | Wilson</title>
  <meta name="description" content="自强不息 厚德载物" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" type="text/css" href="/css/screen.css" />
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Noto+Serif:400,700,400italic|Open+Sans:700,400" />

  <meta name="generator" content="Wilson">

  
  
  

  
</head>


<body class="post-template">

  <header class="site-head"  style="background-image: url(//blog.ghost.org/content/images/2013/Nov/cover.png)" >
    <div class="vertical">
        <div class="site-head-content inner">
             <a class="blog-logo" href="/"><img src="//https://mysiga.cn/img/avatar.png" alt="Blog Logo"/></a> 
            <h1 class="blog-title">Wilson</h1>
            <h2 class="blog-description">自强不息 厚德载物</h2>
        </div>
    </div>
</header>
  

<main class="content" role="main">
  <article class="post">
    <span class="post-meta">
      <time datetime="2015-08-21T12:00:00.000Z" itemprop="datePublished">
          2015-08-21
      </time>
    
</span>
    <h1 class="post-title">那些年我们用过的第三方库</h1>
    <section class="post-content">
      <h2 id="SnapKit（Masonry）-的使用-杨志平"><a href="#SnapKit（Masonry）-的使用-杨志平" class="headerlink" title="SnapKit（Masonry） 的使用 - 杨志平"></a>SnapKit（Masonry） 的使用 - 杨志平</h2><blockquote>
<p>这两个库的用法都是差不多的，只是由两个不同的人来主导开源  <br><br>**<a target="_blank" rel="noopener" href="https://github.com/SnapKit/SnapKit">SnapKit</a>**是Swift版 <br><br>**<a target="_blank" rel="noopener" href="https://github.com/SnapKit/Masonry">Masonry</a>**是OC版    </p>
<p>自动布局及交互式编程是iOS开发的趋势，同时Swift也会在不久将来替换OC语言。所以现在的iOS开发者可以开始学习Swift2.0 以及应用 Autolayout 来编程</p>
</blockquote>
<h3 id="代码对比（概况了解）"><a href="#代码对比（概况了解）" class="headerlink" title="代码对比（概况了解）"></a>代码对比（概况了解）</h3><h5 id="开始前OC原生布局代码"><a href="#开始前OC原生布局代码" class="headerlink" title="开始前OC原生布局代码"></a>开始前OC原生布局代码</h5><pre><code>
    UIView *superview = self;
    
    UIView *view1 = [[UIView alloc] init];
    view1.translatesAutoresizingMaskIntoConstraints = NO;
    view1.backgroundColor = [UIColor greenColor];
    [superview addSubview:view1];

    UIEdgeInsets padding = UIEdgeInsetsMake(10, 10, 10, 10);

    [superview addConstraints:@[

    //view1 constraints
    [NSLayoutConstraint constraintWithItem:view1
                                 attribute:NSLayoutAttributeTop
                                 relatedBy:NSLayoutRelationEqual
                                    toItem:superview
                                 attribute:NSLayoutAttributeTop
                                multiplier:1.0
                                  constant:padding.top],

    [NSLayoutConstraint constraintWithItem:view1
                                 attribute:NSLayoutAttributeLeft
                                 relatedBy:NSLayoutRelationEqual
                                    toItem:superview
                                 attribute:NSLayoutAttributeLeft
                                multiplier:1.0
                                  constant:padding.left],

    [NSLayoutConstraint constraintWithItem:view1
                                 attribute:NSLayoutAttributeBottom
                                 relatedBy:NSLayoutRelationEqual
                                    toItem:superview
                                 attribute:NSLayoutAttributeBottom
                                multiplier:1.0
                                  constant:-padding.bottom],

    [NSLayoutConstraint constraintWithItem:view1
                                 attribute:NSLayoutAttributeRight
                                 relatedBy:NSLayoutRelationEqual
                                    toItem:superview
                                 attribute:NSLayoutAttributeRight
                                multiplier:1
                                  constant:-padding.right],
     ]];
 
</code></pre>
<h5 id="使用Masonry"><a href="#使用Masonry" class="headerlink" title="使用Masonry"></a>使用Masonry</h5><p>精简</p>
<pre><code>
    UIEdgeInsets padding = UIEdgeInsetsMake(10, 10, 10, 10);

    [view1 mas_makeConstraints:^(MASConstraintMaker *make) &#123;
    make.top.equalTo(superview.mas_top).with.offset(padding.top); //with     is an optional semantic filler
        make.left.equalTo(superview.mas_left).with.offset(padding.left);
        make.bottom.equalTo(superview.mas_bottom).with.offset(-    padding.bottom);
        make.right.equalTo(superview.mas_right).with.offset(-padding.right);
    &#125;];
</code></pre>
<p>更加精简</p>
<pre><code>    [view1 mas_makeConstraints:^(MASConstraintMaker *make) &#123;
            make.edges.equalTo(superview).with.insets(padding);
    &#125;];
</code></pre>
<h5 id="同理使用SnapKit"><a href="#同理使用SnapKit" class="headerlink" title="同理使用SnapKit"></a>同理使用SnapKit</h5><p>精简</p>
<pre><code>
    let box = UIView()
    superview.addSubview(box)

    box.snp_makeConstraints &#123; (make) -&gt; Void in
        make.top.equalTo(superview).offset(20)
        make.left.equalTo(superview).offset(20)
        make.bottom.equalTo(superview).offset(-20)
        make.right.equalTo(superview).offset(-20)
    &#125;
</code></pre>
<p>更加精简</p>
<pre><code>    box.snp_makeConstraints &#123; (make) -&gt; Void in
        make.edges.equalTo(superview).inset(UIEdgeInsetsMake(20, 20, 20, 20))
    &#125;
</code></pre>
<h3 id="如何使用-amp-amp-原理"><a href="#如何使用-amp-amp-原理" class="headerlink" title="如何使用 &amp;&amp; 原理"></a>如何使用 &amp;&amp; 原理</h3><h4 id="常见的约束类型对比"><a href="#常见的约束类型对比" class="headerlink" title="常见的约束类型对比"></a>常见的约束类型对比</h4><table>
<thead>
<tr>
<th>ViewAttribute</th>
<th>NSLayoutAttribute</th>
</tr>
</thead>
<tbody><tr>
<td>view.snp_left</td>
<td>NSLayoutAttribute.Left</td>
</tr>
<tr>
<td>view.snp_right</td>
<td>NSLayoutAttribute.Right</td>
</tr>
<tr>
<td>view.snp_top</td>
<td>NSLayoutAttribute.Top</td>
</tr>
<tr>
<td>view.snp_bottom</td>
<td>NSLayoutAttribute.Bottom</td>
</tr>
<tr>
<td>view.snp_leading</td>
<td>NSLayoutAttribute.Leading</td>
</tr>
<tr>
<td>view.snp_trailing</td>
<td>NSLayoutAttribute.Trailing</td>
</tr>
<tr>
<td>view.snp_width</td>
<td>NSLayoutAttribute.Width</td>
</tr>
<tr>
<td>view.snp_height</td>
<td>NSLayoutAttribute.Height</td>
</tr>
<tr>
<td>view.snp_centerX</td>
<td>NSLayoutAttribute.CenterX</td>
</tr>
<tr>
<td>view.snp_centerY</td>
<td>NSLayoutAttribute.CenterY</td>
</tr>
<tr>
<td>view.snp_baseline</td>
<td>NSLayoutAttribute.Baseline</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<h4 id="常见的用法"><a href="#常见的用法" class="headerlink" title="常见的用法"></a>常见的用法</h4><pre><code>make.top.equalTo(42)
make.lessThanOrEqualTo.equalTo(SuperView)
make.top.equalTo(SuperView)
make.size.equalTo(CGSizeMake(50, 100))
make.edges.equalTo(UIEdgeInsetsMake(10, 0, 10, 0))
make.left.equalTo(view).offset(UIEdgeInsetsMake(10, 0, 10, 0))

make.height.equalTo(OtherView).offset(10)
make.trailing.equalTo(OtherView.snp_trailing).offset(10)
make.bottom.equalTo(-20).priority(250)

</code></pre>
<h4 id="对比交互式编程的约束布局"><a href="#对比交互式编程的约束布局" class="headerlink" title="对比交互式编程的约束布局"></a>对比交互式编程的约束布局</h4><p><img src="https://cloud.githubusercontent.com/assets/9360037/9401926/1e572316-4809-11e5-9a96-430e688cda85.png" alt="image"></p>
<hr>
<h2 id="JSONModel-for-swift-的探索-曾铭"><a href="#JSONModel-for-swift-的探索-曾铭" class="headerlink" title="JSONModel for swift 的探索 - 曾铭"></a>JSONModel for swift 的探索 - 曾铭</h2><pre><code>// 可在 Playground 中尝试
import Foundation
import UIKit


// 基本的类型转换
let a:String = &quot;&quot;
let b = &quot;&quot;
var c:String? = nil
c = &quot;test&quot;

let d:String = c as String!
var e = Int(c!)
e = Int(&quot;123&quot;)

var f = Int(&quot;123&quot;)!

print(&quot;a type:\(a.dynamicType)&quot;)
print(&quot;b type:\(b.dynamicType)&quot;)
print(&quot;c type:\(c.dynamicType)&quot;)
print(&quot;d type:\(d.dynamicType)&quot;)
print(&quot;e type:\(e.dynamicType)&quot;)
print(&quot;f type:\(f.dynamicType)\n&quot;)


// KVC for NSObject

class FooKVC : NSObject &#123;
    var p1 : String = &quot;s&quot;
&#125;

let fk1 = FooKVC()

fk1.p1

fk1.setValue(&quot;y&quot;, forKey: &quot;p1&quot;)

fk1.p1

// reflect for swift2.0

class A
&#123;
    var name = &quot;namevalue&quot;
    var age = 123
    var some:(String, Int) = (&quot;ming&quot;, 2)
&#125;

let a1 = A()

a1.age = 456

a1.age


let r = Mirror(reflecting: a1)
for c in r.children &#123;
    print(c.label.dynamicType)
    print(c.label)
    print(c.value.dynamicType)
    print(c.value)
    print(&quot;===&quot;)
&#125;
</code></pre>
<ul>
<li>KVO for NSObject 略, 注意监听者与被监听者都要是 NSObject 子类</li>
</ul>
<h3 id="JSONModel-for-swift"><a href="#JSONModel-for-swift" class="headerlink" title="JSONModel for swift?"></a>JSONModel for swift?</h3><blockquote>
</blockquote>
<p>NB: Swift works in a different way under the hood than Objective-C. Therefore I can’t find a way to re-create JSONModel in Swift. JSONModel in Objective-C works in Swift apps through CocoaPods or as an imported Objective-C library.</p>
<h3 id="JSONModel-做的事情"><a href="#JSONModel-做的事情" class="headerlink" title="JSONModel 做的事情"></a>JSONModel 做的事情</h3><ul>
<li>String(NSData) -&gt; Dictionary(Array)</li>
<li>Dictionary(Array) -&gt; Model-Object</li>
</ul>
<h3 id="对应实现"><a href="#对应实现" class="headerlink" title="对应实现"></a>对应实现</h3><ul>
<li>容易:<ul>
<li>swift 容器取值的坑 <a target="_blank" rel="noopener" href="https://github.com/SwiftyJSON/SwiftyJSON">https://github.com/SwiftyJSON/SwiftyJSON</a></li>
</ul>
</li>
<li>swift 反射不支持赋值，没办法<ul>
<li>通过 NSObject KVC 解决 <a target="_blank" rel="noopener" href="https://github.com/PonyCui/PPJSONSerialization">https://github.com/PonyCui/PPJSONSerialization</a></li>
<li>临时方案？</li>
</ul>
</li>
</ul>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/leemorgan/Swift-KVC/blob/master/KVC%20Playground.playground/Contents.swift">Swift-KVC (just <code>valueForKey:</code>)</a></li>
<li><a target="_blank" rel="noopener" href="http://www.jianshu.com/p/e036e53d240e">Swift: KVO 注意事项和属性观察器</a></li>
<li><a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/24844681/list-of-classs-properties-in-swift">List of class’s properties in swift</a></li>
</ul>
<hr>
<h2 id="RATreeView的简单使用-张超耀"><a href="#RATreeView的简单使用-张超耀" class="headerlink" title="RATreeView的简单使用 - 张超耀"></a>RATreeView的简单使用 - 张超耀</h2><h3 id="RATreeView-实现树形结构的TableView；点击每个cell，都可以展开出现新的cell；可以自定义树的层数"><a href="#RATreeView-实现树形结构的TableView；点击每个cell，都可以展开出现新的cell；可以自定义树的层数" class="headerlink" title="RATreeView:实现树形结构的TableView；点击每个cell，都可以展开出现新的cell；可以自定义树的层数"></a>RATreeView:实现树形结构的TableView；点击每个cell，都可以展开出现新的cell；可以自定义树的层数</h3><p><img src="https://camo.githubusercontent.com/87d3db881cf57dba674a89a6e1460c00277245b3/68747470733a2f2f7261772e6769746875622e636f6d2f417567757374796e69616b2f524154726565566965772f6d61737465722f53637265656e732f616e696d6174696f6e2e676966"></p>
<h3 id="主要方法介绍"><a href="#主要方法介绍" class="headerlink" title="主要方法介绍"></a>主要方法介绍</h3><ul>
<li><p>cell的高度<br><code>-(CGFloat)treeView:(RATreeView *)treeView heightForRowForItem:(id)item treeNodeInfo:(RATreeNodeInfo *)treeNodeInfo</code></p>
</li>
<li><p>这个函数决定是否可以展开，通过设定我们可以设置哪些单元格可以展开到下一层，哪些不可以展开<br><code>- (BOOL)treeView:(RATreeView *)treeView shouldExpandItem:(id)item treeNodeInfo:(RATreeNodeInfo *)treeNodeInfo   </code> </p>
</li>
<li><p>这个看字面意识就理解了，在单元格显示之前（或者说将要显示时）我们可以做些设置，这里是设置相应深度的颜色背景<br><code>- (void)treeView:(RATreeView *)treeView willDisplayCell:(UITableViewCell *)cell forItem:(id)item treeNodeInfo:(RATreeNodeInfo *)treeNodeInfo </code></p>
</li>
<li><p>这里就是我们最熟悉的点击cell处理函数，看代码慢慢体会treeNodeInfo的使用，不想多说了<br><code>-(void)treeView:(RATreeView *)treeView didSelectRowForItem:(id)item treeNodeInfo:(RATreeNodeInfo *)treeNodeInfo   </code></p>
</li>
<li><p>数据源处理，相当于UITableViewCell处理，关键还是理解treeNodeInfo概念<br><code>- (UITableViewCell *)treeView:(RATreeView *)treeView cellForItem:(id)item treeNodeInfo:(RATreeNodeInfo *)treeNodeInfo   </code></p>
</li>
<li><p>返回每一层包含成员的个数，来制表<br><code>- (NSInteger)treeView:(RATreeView *)treeView numberOfChildrenOfItem:(id)item   </code></p>
</li>
<li><p>返回cell对象<br><code>- (id)treeView:(RATreeView *)treeView child:(NSInteger)index ofItem:(id)item   </code></p>
<h3 id="RATreeView-github"><a href="#RATreeView-github" class="headerlink" title="RATreeView - github"></a><a target="_blank" rel="noopener" href="https://github.com/Augustyniak/RATreeView">RATreeView - github</a></h3></li>
</ul>
<hr>
<h2 id="Facebook-开源的图片加载库Fresco-王胜"><a href="#Facebook-开源的图片加载库Fresco-王胜" class="headerlink" title="Facebook 开源的图片加载库Fresco - 王胜"></a>Facebook 开源的图片加载库Fresco - 王胜</h2><h3 id="Fresco诞生背景"><a href="#Fresco诞生背景" class="headerlink" title="Fresco诞生背景"></a>Fresco诞生背景</h3><p>为提高Android中图片的加载速度，一般的图片库都采用了三级缓存：Memory Cache、Disk Cache和Network。但是，Android的系统层是将物理内存平均分配给每一个App。这样每个App所分配的空间都是有限的，早起的android设备，每个App只被分配16MB空间，这样，如果App中使用大量的图片，那么很容易因OOM而Crashes掉。Facebook App正是大量使用图片的App，面临这个问题刻不容缓，所以他们历尽艰难，开发了Fresco图片加载库。 </p>
<h3 id="Fresco诞生过程"><a href="#Fresco诞生过程" class="headerlink" title="Fresco诞生过程"></a>Fresco诞生过程</h3><h4 id="内存区域分析："><a href="#内存区域分析：" class="headerlink" title="内存区域分析："></a>内存区域分析：</h4><ul>
<li><p>Java heap</p>
<p>每个厂商会为App分配一个固定尺寸的运行空间。所有的申请通过Java的new操作申请，操作相对安全，通过GC内存自动回收保证内存不被泄露。但不幸的时，GC不够精确化，回收得不够及时。因此还是会存在OOM。</p>
</li>
<li><p>Native heap</p>
<p>通过C或者C++可绕过Java虚拟机直接操作物理内存，但Java程序员习惯了GC的自动回收，很难操作C++的手动操作内存。</p>
</li>
<li><p>Ashmen</p>
<p>Android还有一块内存区域，叫Ashmen。这里的操作很像Nativew heap，但是这里是系统调用的。Java 应用程序是不能直接访问Ashmen的，但是一些例外的情况可以操作，图片就是一种例外。</p>
<pre><code class="Java">BitmapFactory.Options = new BitmapFactory.Options();
options.inPurgeable = true;
Bitmap bitmap = BitmapFactory.decodeByteArray(jpeg, 0, jpeg.length, options);
</code></pre>
</li>
</ul>
<h4 id="难点突破："><a href="#难点突破：" class="headerlink" title="难点突破："></a>难点突破：</h4><p>尽管发现了Purgeable bitmaps，但是这个解码的过程是在UI线程操作的，因此他们又采用了异步实现，并保证了UI线程不引用时，unpin的区域不会被释放。</p>
<h4 id="上层构建"><a href="#上层构建" class="headerlink" title="上层构建"></a>上层构建</h4><p>提供给上层调用时，采用了MVC的架构：</p>
<ul>
<li>Model：DraweeHierarchy</li>
<li>Control：DraweeControllers</li>
<li>View：DraweeViews</li>
</ul>
<h3 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h3><ol>
<li><p>gradle配置中添加库引用</p>
<pre><code>compile &#39;com.facebook.fresco:fresco:0.6.1+&#39;
</code></pre>
</li>
<li><p>xml中添加组件</p>
<pre><code class="XML">&lt;com.facebook.drawee.view.SimpleDraweeView
     android:id=&quot;@+id/sdv&quot;
     android:layout_width=&quot;match_parent&quot;
     android:layout_height=&quot;match_parent&quot;
     fresco:roundAsCircle=&quot;true&quot;
     fresco:roundingBorderWidth=&quot;1dp&quot;
     fresco:roundingBorderColor=&quot;#00ff00&quot;
</code></pre>
</li>
<li><p>代码中指定图片地址</p>
<pre><code class="Java">SimpleDraweeView sdv = (SimpleDraweeView) findViewById(R.id.sdv);
sdv.setImageURI(Uri.parse(&quot;http://g.hiphotos.baidu.com/image/pic/item/2e2eb9389b504fc2b351980be7dde71190ef6db5.jpg&quot;));
</code></pre>
</li>
</ol>
<h3 id="参考资料："><a href="#参考资料：" class="headerlink" title="参考资料："></a>参考资料：</h3><ul>
<li><a target="_blank" rel="noopener" href="https://code.facebook.com/posts/366199913563917/introducing-fresco-a-new-image-library-for-android/">Fresco的由来</a></li>
<li><a target="_blank" rel="noopener" href="http://github.com/facebook/fresco">Fresco的源码托管</a></li>
<li><a target="_blank" rel="noopener" href="http://fresco-cn.org/docs/index.html">中文使用手册</a></li>
</ul>
<hr>
<p>#SIAlertView 阅读 - 潘君</p>
<ul>
<li>创建自定义alert view的流程</li>
</ul>
<p>自定义window-&gt;添加自定义view controller-&gt;定制view-&gt;view引用window</p>
<ul>
<li><p>@class</p>
<pre><code>@class SIAlertView;
</code></pre>
<p>能不使用import的就不使用<br>用@class代替</p>
</li>
<li><p>通知 和 Block</p>
</li>
<li><p>层级</p>
<pre><code>const UIWindowLevel UIWindowLevelSIAlert = 1996.0;  // don&#39;t overlap system&#39;s alert
const UIWindowLevel UIWindowLevelSIAlertBackground = 1985.0; // below the alert window
</code></pre>
</li>
<li><p>UIViewTintAdjustmentMode<br>通过获取keyWindow的<code>UIViewTintAdjustmentMode</code>来设置alertWindow的<br>该属性能够设置tint的调整模式</p>
<pre><code>typedef enum &#123;
   // 和父视图的一样
   UIViewTintAdjustmentModeAutomatic,              
   // 不对tintColor做任何修改
   UIViewTintAdjustmentModeNormal,
   // 在原有tintColor基础上变暗
   UIViewTintAdjustmentModeDimmed,&#125;UIViewTintAdjustmentMode;
</code></pre>
</li>
</ul>
<ul>
<li><p> iOS特有版本代码</p>
<pre><code>#ifdef __IPHONE_7_0
//some code 
#endif
此处填写iOS7才能运行的代码
</code></pre>
</li>
<li><p>initialize<br>```</p>
</li>
</ul>
<ul>
<li>(void)initialize<br>{<br>  if (self != [SIAlertView class])<pre><code>  return;
</code></pre>
  // 默认值赋值<br>}</li>
</ul>
<p>一些值放在+(void)initialize；中赋值为默认值，这样不管通过何种方式初始化</p>
<pre><code>
- UIAppearance
SIAlertView *appearance = [self appearance];
UIView符合UIAppearence协议，能够全局修改所有实例的UI

- 调用Bundle中资源
[UIImage imageNamed:@&quot;SIAlertView.bundle/button-default&quot;]
bundle中资源的调用方法


- _cmd
oc特有的方法，无法通过c语言获取

-  [self invalidateLayout]

- 合理利用循环引用
</code></pre>
<pre><code>if (!self.alertWindow) &#123;
    UIWindow *window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];
    window.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    window.opaque = NO;
    window.windowLevel = UIWindowLevelSIAlert;
    window.rootViewController = viewController;
    self.alertWindow = window;
&#125;
</code></pre>
<pre><code>
- oldKeyWindow
通知alert后面的视图转变方向
取用一些oldKeyWindow的值

----

## android饼图库 -吴明
- 饼图选择
    - [AChartEngine](https://github.com/jondwillis/AChartEngine/tree/master/achartengine):(太丑了)
    - [xcl-charts](https://github.com/xcltapestry/XCL-Charts):(接口文档没有)
    - [HelloCharts](https://github.com/lecho/hellocharts-android):(接口文档没有)
    - [MPAndroidChart](https://github.com/PhilJay/MPAndroidChart):(接口文档多)
- [MPAndroidChart](https://github.com/PhilJay/MPAndroidChart)
    - ![Alt Image Text](https://camo.githubusercontent.com/7e8a4a3c938c21d032d44d999edd781b6e146f2a/68747470733a2f2f7261772e6769746875622e636f6d2f5068696c4a61792f4d50416e64726f696443686172742f6d61737465722f73637265656e73686f74732f73696d706c6564657369676e5f7069656368617274312e706e67)
    - 饼图对象:PieChat
    - [详见接口文档](https://github.com/PhilJay/MPAndroidChart/wiki)
    
    
---- 

## HeaderFooterRecyclerViewAdapter——李仙鹏
[HeaderFooterRecyclerViewAdapter](https://gist.github.com/mheras/0908873267def75dc746)，用于RecyclerView。可方便的添加header或者footer。使用非常简单，只需要按照实际需求，在对应的header、content、footer相关方法进行重写即可。

附上源码
</code></pre>
<p>public abstract class HeaderFooterRecyclerViewAdapter extends RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt; {</p>
<pre><code>private static final int VIEW_TYPE_MAX_COUNT = 1000;
private static final int HEADER_VIEW_TYPE_OFFSET = 0;
private static final int FOOTER_VIEW_TYPE_OFFSET = HEADER_VIEW_TYPE_OFFSET + VIEW_TYPE_MAX_COUNT;
private static final int CONTENT_VIEW_TYPE_OFFSET = FOOTER_VIEW_TYPE_OFFSET + VIEW_TYPE_MAX_COUNT;

private int headerItemCount;
private int contentItemCount;
private int footerItemCount;

/**
 * &#123;@inheritDoc&#125;
 */
@Override
public final RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) &#123;

    // Delegate to proper methods based on the viewType ranges.
    if (viewType &gt;= HEADER_VIEW_TYPE_OFFSET &amp;&amp; viewType &lt; HEADER_VIEW_TYPE_OFFSET + VIEW_TYPE_MAX_COUNT) &#123;
        return onCreateHeaderItemViewHolder(parent, viewType - HEADER_VIEW_TYPE_OFFSET);
    &#125; else if (viewType &gt;= FOOTER_VIEW_TYPE_OFFSET &amp;&amp; viewType &lt; FOOTER_VIEW_TYPE_OFFSET + VIEW_TYPE_MAX_COUNT) &#123;
        return onCreateFooterItemViewHolder(parent, viewType - FOOTER_VIEW_TYPE_OFFSET);
    &#125; else if (viewType &gt;= CONTENT_VIEW_TYPE_OFFSET &amp;&amp; viewType &lt; CONTENT_VIEW_TYPE_OFFSET + VIEW_TYPE_MAX_COUNT) &#123;
        return onCreateContentItemViewHolder(parent, viewType - CONTENT_VIEW_TYPE_OFFSET);
    &#125; else &#123;
        // This shouldn&#39;t happen as we check that the viewType provided by the client is valid.
        throw new IllegalStateException();
    &#125;
&#125;

/**
 * &#123;@inheritDoc&#125;
 */
@Override
public final void onBindViewHolder(RecyclerView.ViewHolder viewHolder, int position) &#123;
    // Delegate to proper methods based on the viewType ranges.
    if (headerItemCount &gt; 0 &amp;&amp; position &lt; headerItemCount) &#123;
        onBindHeaderItemViewHolder(viewHolder, position);
    &#125; else if (contentItemCount &gt; 0 &amp;&amp; position - headerItemCount &lt; contentItemCount) &#123;
        onBindContentItemViewHolder(viewHolder, position - headerItemCount);
    &#125; else &#123;
        onBindFooterItemViewHolder(viewHolder, position - headerItemCount - contentItemCount);
    &#125;
&#125;

/**
 * &#123;@inheritDoc&#125;
 */
@Override
public final int getItemCount() &#123;
    // Cache the counts and return the sum of them.
    headerItemCount = getHeaderItemCount();
    contentItemCount = getContentItemCount();
    footerItemCount = getFooterItemCount();
    return headerItemCount + contentItemCount + footerItemCount;
&#125;

/**
 * &#123;@inheritDoc&#125;
 */
@Override
public final int getItemViewType(int position) &#123;
    // Delegate to proper methods based on the position, but validate first.
    if (headerItemCount &gt; 0 &amp;&amp; position &lt; headerItemCount) &#123;
        return validateViewType(getHeaderItemViewType(position)) + HEADER_VIEW_TYPE_OFFSET;
    &#125; else if (contentItemCount &gt; 0 &amp;&amp; position - headerItemCount &lt; contentItemCount) &#123;
        return validateViewType(getContentItemViewType(position - headerItemCount)) + CONTENT_VIEW_TYPE_OFFSET;
    &#125; else &#123;
        return validateViewType(getFooterItemViewType(position - headerItemCount - contentItemCount)) + FOOTER_VIEW_TYPE_OFFSET;
    &#125;
&#125;

/**
 * Validates that the view type is within the valid range.
 *
 * @param viewType the view type.
 * @return the given view type.
 */
private int validateViewType(int viewType) &#123;
    if (viewType &lt; 0 || viewType &gt;= VIEW_TYPE_MAX_COUNT) &#123;
        throw new IllegalStateException(&quot;viewType must be between 0 and &quot; + VIEW_TYPE_MAX_COUNT);
    &#125;
    return viewType;
&#125;

/**
 * Notifies that a header item is inserted.
 *
 * @param position the position of the header item.
 */
public final void notifyHeaderItemInserted(int position) &#123;
    int newHeaderItemCount = getHeaderItemCount();
    if (position &lt; 0 || position &gt;= newHeaderItemCount) &#123;
        throw new IndexOutOfBoundsException(&quot;The given position &quot; + position + &quot; is not within the position bounds for header items [0 - &quot; + (newHeaderItemCount - 1) + &quot;].&quot;);
    &#125;
    notifyItemInserted(position);
&#125;

/**
 * Notifies that multiple header items are inserted.
 *
 * @param positionStart the position.
 * @param itemCount     the item count.
 */
public final void notifyHeaderItemRangeInserted(int positionStart, int itemCount) &#123;
    int newHeaderItemCount = getHeaderItemCount();
    if (positionStart &lt; 0 || itemCount &lt; 0 || positionStart + itemCount &gt; newHeaderItemCount) &#123;
        throw new IndexOutOfBoundsException(&quot;The given range [&quot; + positionStart + &quot; - &quot; + (positionStart + itemCount - 1) + &quot;] is not within the position bounds for header items [0 - &quot; + (newHeaderItemCount - 1) + &quot;].&quot;);
    &#125;
    notifyItemRangeInserted(positionStart, itemCount);
&#125;

/**
 * Notifies that a header item is changed.
 *
 * @param position the position.
 */
public final void notifyHeaderItemChanged(int position) &#123;
    if (position &lt; 0 || position &gt;= headerItemCount) &#123;
        throw new IndexOutOfBoundsException(&quot;The given position &quot; + position + &quot; is not within the position bounds for header items [0 - &quot; + (headerItemCount - 1) + &quot;].&quot;);
    &#125;
    notifyItemChanged(position);
&#125;

/**
 * Notifies that multiple header items are changed.
 *
 * @param positionStart the position.
 * @param itemCount     the item count.
 */
public final void notifyHeaderItemRangeChanged(int positionStart, int itemCount) &#123;
    if (positionStart &lt; 0 || itemCount &lt; 0 || positionStart + itemCount &gt;= headerItemCount) &#123;
        throw new IndexOutOfBoundsException(&quot;The given range [&quot; + positionStart + &quot; - &quot; + (positionStart + itemCount - 1) + &quot;] is not within the position bounds for header items [0 - &quot; + (headerItemCount - 1) + &quot;].&quot;);
    &#125;
    notifyItemRangeChanged(positionStart, itemCount);
&#125;


/**
 * Notifies that an existing header item is moved to another position.
 *
 * @param fromPosition the original position.
 * @param toPosition   the new position.
 */
public void notifyHeaderItemMoved(int fromPosition, int toPosition) &#123;
    if (fromPosition &lt; 0 || toPosition &lt; 0 || fromPosition &gt;= headerItemCount || toPosition &gt;= headerItemCount) &#123;
        throw new IndexOutOfBoundsException(&quot;The given fromPosition &quot; + fromPosition + &quot; or toPosition &quot; + toPosition + &quot; is not within the position bounds for header items [0 - &quot; + (headerItemCount - 1) + &quot;].&quot;);
    &#125;
    notifyItemMoved(fromPosition, toPosition);
&#125;

/**
 * Notifies that a header item is removed.
 *
 * @param position the position.
 */
public void notifyHeaderItemRemoved(int position) &#123;
    if (position &lt; 0 || position &gt;= headerItemCount) &#123;
        throw new IndexOutOfBoundsException(&quot;The given position &quot; + position + &quot; is not within the position bounds for header items [0 - &quot; + (headerItemCount - 1) + &quot;].&quot;);
    &#125;
    notifyItemRemoved(position);
&#125;

/**
 * Notifies that multiple header items are removed.
 *
 * @param positionStart the position.
 * @param itemCount     the item count.
 */
public void notifyHeaderItemRangeRemoved(int positionStart, int itemCount) &#123;
    if (positionStart &lt; 0 || itemCount &lt; 0 || positionStart + itemCount &gt; headerItemCount) &#123;
        throw new IndexOutOfBoundsException(&quot;The given range [&quot; + positionStart + &quot; - &quot; + (positionStart + itemCount - 1) + &quot;] is not within the position bounds for header items [0 - &quot; + (headerItemCount - 1) + &quot;].&quot;);
    &#125;
    notifyItemRangeRemoved(positionStart, itemCount);
&#125;

/**
 * Notifies that a content item is inserted.
 *
 * @param position the position of the content item.
 */
public final void notifyContentItemInserted(int position) &#123;
    int newHeaderItemCount = getHeaderItemCount();
    int newContentItemCount = getContentItemCount();
    if (position &lt; 0 || position &gt;= newContentItemCount) &#123;
        throw new IndexOutOfBoundsException(&quot;The given position &quot; + position + &quot; is not within the position bounds for content items [0 - &quot; + (newContentItemCount - 1) + &quot;].&quot;);
    &#125;
    notifyItemInserted(position + newHeaderItemCount);
&#125;

/**
 * Notifies that multiple content items are inserted.
 *
 * @param positionStart the position.
 * @param itemCount     the item count.
 */
public final void notifyContentItemRangeInserted(int positionStart, int itemCount) &#123;
    int newHeaderItemCount = getHeaderItemCount();
    int newContentItemCount = getContentItemCount();
    if (positionStart &lt; 0 || itemCount &lt; 0 || positionStart + itemCount &gt; newContentItemCount) &#123;
        throw new IndexOutOfBoundsException(&quot;The given range [&quot; + positionStart + &quot; - &quot; + (positionStart + itemCount - 1) + &quot;] is not within the position bounds for content items [0 - &quot; + (newContentItemCount - 1) + &quot;].&quot;);
    &#125;
    notifyItemRangeInserted(positionStart + newHeaderItemCount, itemCount);
&#125;

/**
 * Notifies that a content item is changed.
 *
 * @param position the position.
 */
public final void notifyContentItemChanged(int position) &#123;
    if (position &lt; 0 || position &gt;= contentItemCount) &#123;
        throw new IndexOutOfBoundsException(&quot;The given position &quot; + position + &quot; is not within the position bounds for content items [0 - &quot; + (contentItemCount - 1) + &quot;].&quot;);
    &#125;
    notifyItemChanged(position + headerItemCount);
&#125;

/**
 * Notifies that multiple content items are changed.
 *
 * @param positionStart the position.
 * @param itemCount     the item count.
 */
public final void notifyContentItemRangeChanged(int positionStart, int itemCount) &#123;
    if (positionStart &lt; 0 || itemCount &lt; 0 || positionStart + itemCount &gt; contentItemCount) &#123;
        throw new IndexOutOfBoundsException(&quot;The given range [&quot; + positionStart + &quot; - &quot; + (positionStart + itemCount - 1) + &quot;] is not within the position bounds for content items [0 - &quot; + (contentItemCount - 1) + &quot;].&quot;);
    &#125;
    notifyItemRangeChanged(positionStart + headerItemCount, itemCount);
&#125;

/**
 * Notifies that an existing content item is moved to another position.
 *
 * @param fromPosition the original position.
 * @param toPosition   the new position.
 */
public final void notifyContentItemMoved(int fromPosition, int toPosition) &#123;
    if (fromPosition &lt; 0 || toPosition &lt; 0 || fromPosition &gt;= contentItemCount || toPosition &gt;= contentItemCount) &#123;
        throw new IndexOutOfBoundsException(&quot;The given fromPosition &quot; + fromPosition + &quot; or toPosition &quot; + toPosition + &quot; is not within the position bounds for content items [0 - &quot; + (contentItemCount - 1) + &quot;].&quot;);
    &#125;
    notifyItemMoved(fromPosition + headerItemCount, toPosition + headerItemCount);
&#125;

/**
 * Notifies that a content item is removed.
 *
 * @param position the position.
 */
public final void notifyContentItemRemoved(int position) &#123;
    if (position &lt; 0 || position &gt;= contentItemCount) &#123;
        throw new IndexOutOfBoundsException(&quot;The given position &quot; + position + &quot; is not within the position bounds for content items [0 - &quot; + (contentItemCount - 1) + &quot;].&quot;);
    &#125;
    notifyItemRemoved(position + headerItemCount);
&#125;

/**
 * Notifies that multiple content items are removed.
 *
 * @param positionStart the position.
 * @param itemCount     the item count.
 */
public final void notifyContentItemRangeRemoved(int positionStart, int itemCount) &#123;
    if (positionStart &lt; 0 || itemCount &lt; 0 || positionStart + itemCount &gt; contentItemCount) &#123;
        throw new IndexOutOfBoundsException(&quot;The given range [&quot; + positionStart + &quot; - &quot; + (positionStart + itemCount - 1) + &quot;] is not within the position bounds for content items [0 - &quot; + (contentItemCount - 1) + &quot;].&quot;);
    &#125;
    notifyItemRangeRemoved(positionStart + headerItemCount, itemCount);
&#125;

/**
 * Notifies that a footer item is inserted.
 *
 * @param position the position of the content item.
 */
public final void notifyFooterItemInserted(int position) &#123;
    int newHeaderItemCount = getHeaderItemCount();
    int newContentItemCount = getContentItemCount();
    int newFooterItemCount = getFooterItemCount();
    if (position &lt; 0 || position &gt;= newFooterItemCount) &#123;
        throw new IndexOutOfBoundsException(&quot;The given position &quot; + position + &quot; is not within the position bounds for footer items [0 - &quot; + (newFooterItemCount - 1) + &quot;].&quot;);
    &#125;
    notifyItemInserted(position + newHeaderItemCount + newContentItemCount);
&#125;

/**
 * Notifies that multiple footer items are inserted.
 *
 * @param positionStart the position.
 * @param itemCount     the item count.
 */
public final void notifyFooterItemRangeInserted(int positionStart, int itemCount) &#123;
    int newHeaderItemCount = getHeaderItemCount();
    int newContentItemCount = getContentItemCount();
    int newFooterItemCount = getFooterItemCount();
    if (positionStart &lt; 0 || itemCount &lt; 0 || positionStart + itemCount &gt; newFooterItemCount) &#123;
        throw new IndexOutOfBoundsException(&quot;The given range [&quot; + positionStart + &quot; - &quot; + (positionStart + itemCount - 1) + &quot;] is not within the position bounds for footer items [0 - &quot; + (newFooterItemCount - 1) + &quot;].&quot;);
    &#125;
    notifyItemRangeInserted(positionStart + newHeaderItemCount + newContentItemCount, itemCount);
&#125;

/**
 * Notifies that a footer item is changed.
 *
 * @param position the position.
 */
public final void notifyFooterItemChanged(int position) &#123;
    if (position &lt; 0 || position &gt;= footerItemCount) &#123;
        throw new IndexOutOfBoundsException(&quot;The given position &quot; + position + &quot; is not within the position bounds for footer items [0 - &quot; + (footerItemCount - 1) + &quot;].&quot;);
    &#125;
    notifyItemChanged(position + headerItemCount + contentItemCount);
&#125;

/**
 * Notifies that multiple footer items are changed.
 *
 * @param positionStart the position.
 * @param itemCount     the item count.
 */
public final void notifyFooterItemRangeChanged(int positionStart, int itemCount) &#123;
    if (positionStart &lt; 0 || itemCount &lt; 0 || positionStart + itemCount &gt; footerItemCount) &#123;
        throw new IndexOutOfBoundsException(&quot;The given range [&quot; + positionStart + &quot; - &quot; + (positionStart + itemCount - 1) + &quot;] is not within the position bounds for footer items [0 - &quot; + (footerItemCount - 1) + &quot;].&quot;);
    &#125;
    notifyItemRangeChanged(positionStart + headerItemCount + contentItemCount, itemCount);
&#125;

/**
 * Notifies that an existing footer item is moved to another position.
 *
 * @param fromPosition the original position.
 * @param toPosition   the new position.
 */
public final void notifyFooterItemMoved(int fromPosition, int toPosition) &#123;
    if (fromPosition &lt; 0 || toPosition &lt; 0 || fromPosition &gt;= footerItemCount || toPosition &gt;= footerItemCount) &#123;
        throw new IndexOutOfBoundsException(&quot;The given fromPosition &quot; + fromPosition + &quot; or toPosition &quot; + toPosition + &quot; is not within the position bounds for footer items [0 - &quot; + (footerItemCount - 1) + &quot;].&quot;);
    &#125;
    notifyItemMoved(fromPosition + headerItemCount + contentItemCount, toPosition + headerItemCount + contentItemCount);
&#125;

/**
 * Notifies that a footer item is removed.
 *
 * @param position the position.
 */
public final void notifyFooterItemRemoved(int position) &#123;
    if (position &lt; 0 || position &gt;= footerItemCount) &#123;
        throw new IndexOutOfBoundsException(&quot;The given position &quot; + position + &quot; is not within the position bounds for footer items [0 - &quot; + (footerItemCount - 1) + &quot;].&quot;);
    &#125;
    notifyItemRemoved(position + headerItemCount + contentItemCount);
&#125;

/**
 * Notifies that multiple footer items are removed.
 *
 * @param positionStart the position.
 * @param itemCount     the item count.
 */
public final void notifyFooterItemRangeRemoved(int positionStart, int itemCount) &#123;
    if (positionStart &lt; 0 || itemCount &lt; 0 || positionStart + itemCount &gt; footerItemCount) &#123;
        throw new IndexOutOfBoundsException(&quot;The given range [&quot; + positionStart + &quot; - &quot; + (positionStart + itemCount - 1) + &quot;] is not within the position bounds for footer items [0 - &quot; + (footerItemCount - 1) + &quot;].&quot;);
    &#125;
    notifyItemRangeRemoved(positionStart + headerItemCount + contentItemCount, itemCount);
&#125;

/**
 * Gets the header item view type. By default, this method returns 0.
 *
 * @param position the position.
 * @return the header item view type (within the range [0 - VIEW_TYPE_MAX_COUNT-1]).
 */
protected int getHeaderItemViewType(int position) &#123;
    return 0;
&#125;

/**
 * Gets the footer item view type. By default, this method returns 0.
 *
 * @param position the position.
 * @return the footer item view type (within the range [0 - VIEW_TYPE_MAX_COUNT-1]).
 */
protected int getFooterItemViewType(int position) &#123;
    return 0;
&#125;

/**
 * Gets the content item view type. By default, this method returns 0.
 *
 * @param position the position.
 * @return the content item view type (within the range [0 - VIEW_TYPE_MAX_COUNT-1]).
 */
protected int getContentItemViewType(int position) &#123;
    return 0;
&#125;

/**
 * Gets the header item count. This method can be called several times, so it should not calculate the count every time.
 *
 * @return the header item count.
 */
protected abstract int getHeaderItemCount();

/**
 * Gets the footer item count. This method can be called several times, so it should not calculate the count every time.
 *
 * @return the footer item count.
 */
protected abstract int getFooterItemCount();

/**
 * Gets the content item count. This method can be called several times, so it should not calculate the count every time.
 *
 * @return the content item count.
 */
protected abstract int getContentItemCount();

/**
 * This method works exactly the same as &#123;@link #onCreateViewHolder(android.view.ViewGroup, int)&#125;, but for header items.
 *
 * @param parent         the parent view.
 * @param headerViewType the view type for the header.
 * @return the view holder.
 */
protected abstract RecyclerView.ViewHolder onCreateHeaderItemViewHolder(ViewGroup parent, int headerViewType);

/**
 * This method works exactly the same as &#123;@link #onCreateViewHolder(android.view.ViewGroup, int)&#125;, but for footer items.
 *
 * @param parent         the parent view.
 * @param footerViewType the view type for the footer.
 * @return the view holder.
 */
protected abstract RecyclerView.ViewHolder onCreateFooterItemViewHolder(ViewGroup parent, int footerViewType);

/**
 * This method works exactly the same as &#123;@link #onCreateViewHolder(android.view.ViewGroup, int)&#125;, but for content items.
 *
 * @param parent          the parent view.
 * @param contentViewType the view type for the content.
 * @return the view holder.
 */
protected abstract RecyclerView.ViewHolder onCreateContentItemViewHolder(ViewGroup parent, int contentViewType);

/**
 * This method works exactly the same as &#123;@link #onBindViewHolder(android.support.v7.widget.RecyclerView.ViewHolder, int)&#125;, but for header items.
 *
 * @param headerViewHolder the view holder for the header item.
 * @param position         the position.
 */
protected abstract void onBindHeaderItemViewHolder(RecyclerView.ViewHolder headerViewHolder, int position);

/**
 * This method works exactly the same as &#123;@link #onBindViewHolder(android.support.v7.widget.RecyclerView.ViewHolder, int)&#125;, but for footer items.
 *
 * @param footerViewHolder the view holder for the footer item.
 * @param position         the position.
 */
protected abstract void onBindFooterItemViewHolder(RecyclerView.ViewHolder footerViewHolder, int position);

/**
 * This method works exactly the same as &#123;@link #onBindViewHolder(android.support.v7.widget.RecyclerView.ViewHolder, int)&#125;, but for content items.
 *
 * @param contentViewHolder the view holder for the content item.
 * @param position          the position.
 */
protected abstract void onBindContentItemViewHolder(RecyclerView.ViewHolder contentViewHolder, int position);
</code></pre>
<p>}</p>
<pre><code>
</code></pre>

    </section>
    <footer class="post-footer">
      <section class="author">
    <h4>Wilson</h4>
    <p>A designer, developer and entrepreneur. Spends his time travelling the world with a bag of kites. Likes journalism and publishing platforms.</p>
</section>
      <section class="share">
    <h4>Share this post</h4>
    <a class="icon-twitter" target="_blank" rel="noopener" href="http://twitter.com/share?url=https://mysiga.cn/2015/08/21/那些年我们用过的第三方库/"
       onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">Twitter</span>
    </a>
    <a class="icon-facebook" target="_blank" rel="noopener" href="https://www.facebook.com/sharer/sharer.php?u=https://mysiga.cn/2015/08/21/那些年我们用过的第三方库/"
       onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <span class="hidden">Facebook</span>
    </a>
    <a class="icon-google-plus" target="_blank" rel="noopener" href="https://plus.google.com/share?url=https://mysiga.cn/2015/08/21/那些年我们用过的第三方库/"
       onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
        <span class="hidden">Google+</span>
    </a>
</section>
    </footer>
  </article>
  <nav class="pagination" role="pagination">
    
    <a class="newer-posts" href="/2015/09/25/%E5%8D%95%E4%BD%8D%E5%92%8C%E5%BA%A6%E9%87%8F/">
        ← 单位和度量
    </a>
    
    <span class="page-number">•</span>
    
    <a class="older-posts" href="/2015/08/14/%E8%81%8A%E8%81%8A%E6%8F%90%E9%AB%98%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F/">
        聊聊提高代码质量 →
    </a>
    
</nav>
  <div id="comment" class="comments-area">
    <h1 class="title"><a href="#disqus_comments" name="disqus_comments">Comments</a></h1>

    
</div>
</main>


  
<footer class="site-footer">
  
  <div class="inner">
     <section class="copyright">All content copyright <a href="/">Wilson</a> &copy; 2014 &bull; All rights reserved.</section>
     <section class="poweredby">Proudly published with <a class="icon-ghost" target="_blank" rel="noopener" href="http://zespia.tw/hexo/">Hexo</a></section>
  </div>
</footer>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<script type="text/javascript" src="/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/js/index.js"></script>






</body>
</html>
